{"ast":null,"code":"import _classCallCheck from \"/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation/front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation/front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation/front/src/Questionnaire.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport dummyData from \"./DummyData\";\nimport url from \"./url\";\nimport error_panel from './images/error_panel.png';\nimport './Questionnaire.css';\n\nvar Questionnaire =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Questionnaire, _Component);\n\n  function Questionnaire(props) {\n    var _this;\n\n    _classCallCheck(this, Questionnaire);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Questionnaire).call(this, props));\n\n    _this.buildStepList = function (answers) {\n      var step_list = [\"initial_questions\"];\n\n      if (answers.number_english_courses > 0) {\n        step_list.push(\"ranking_english_courses\");\n      }\n\n      if (answers.number_other_courses > 0) {\n        step_list.push(\"ranking_other_courses\");\n      }\n\n      step_list.push(\"final_question\");\n      console.log(_this.state);\n      return step_list;\n    };\n\n    _this.getStepIndex = function () {\n      return _this.state.step_index;\n    };\n\n    _this.handleStepChange = function (direction) {\n      if (direction === \"previous\" && _this.state.step_index > 0) {\n        _this.setState({\n          step_index: _this.state.step_index - 1\n        });\n      } else if (direction === \"next\" && _this.state.step_index < _this.state.step_list.length - 1) {\n        _this.setState({\n          step_index: _this.state.step_index + 1\n        });\n      }\n    };\n\n    _this.getStepList = function () {\n      return _this.state.step_list;\n    };\n\n    _this.setStepList = function (new_step_list) {\n      _this.setState({\n        step_list: new_step_list\n      });\n    };\n\n    _this.getAnswers = function () {\n      return _this.state.answers;\n    };\n\n    _this.setAnswers = function (new_answers) {\n      var new_step_list = _this.buildStepList(new_answers);\n\n      _this.setState({\n        answers: new_answers,\n        step_list: new_step_list\n      });\n    };\n\n    _this.getAnswersAreSent = function () {\n      return _this.state.answers_are_sent;\n    };\n\n    _this.sendAnswers = function () {\n      //ajouter requête\n      _this.setState({\n        answers_are_sent: true\n      });\n    };\n\n    _this.state = {\n      data: null,\n      is_loaded: false,\n      step_list: [\"initial_questions\"],\n      step_index: 0,\n      answers_are_sent: false,\n      answers: {\n        year: '',\n        TOEIC: '',\n        justification_no_english: '',\n        justification_no_english_text: '',\n        number_english_courses: 1,\n        number_other_courses: 0,\n        english_courses_ranking: [],\n        other_courses_ranking: []\n      }\n    };\n    console.log(\"built\");\n    return _this;\n  }\n\n  _createClass(Questionnaire, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      /*axios.get(url+\"courses\")\n      .then(res => res.json())\n      .then(\n        (result) => {\n          this.setState({\n            is_loaded: true,\n            data: result\n          });\n        },\n        (error) => {\n          this.setState({\n            isLoaded: false\n          });\n        }\n      );*/\n      console.log(\"didMount\");\n      this.setState({\n        data: dummyData\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var data = this.state.data;\n      var step = null;\n      var current_step_name = this.state.step_list[this.state.step_index];\n\n      if (current_step_name === \"initial_questions\") {\n        step = React.createElement(InitialQuestions, {\n          getStepIndex: this.getStepIndex,\n          handleStepChange: this.handleStepChange,\n          getStepList: this.getStepList,\n          setStepList: this.setStepList,\n          getAnswers: this.getAnswers,\n          setAnswers: this.setAnswers,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        });\n      } else if (current_step_name === \"ranking_english_courses\") {\n        var list_english_courses = data.courses.filter(function (value, index, arr) {\n          return value.language === \"Anglais\";\n        });\n        step = React.createElement(CourseRankingQuestion, {\n          instructions: \"Veuillez ordonner les cours d'Anglais par ordre de pr\\xE9f\\xE9rence\",\n          courses: list_english_courses,\n          key: \"english_courses_ranking\",\n          answer: \"english_courses_ranking\",\n          getStepIndex: this.getStepIndex,\n          handleStepChange: this.handleStepChange,\n          getStepList: this.getStepList,\n          setStepList: this.setStepList,\n          getAnswers: this.getAnswers,\n          setAnswers: this.setAnswers,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        });\n      } else if (current_step_name === \"ranking_other_courses\") {\n        var list_other_courses = data.courses.filter(function (value, index, arr) {\n          return value.language != \"Anglais\";\n        });\n        step = React.createElement(CourseRankingQuestion, {\n          instructions: \"Veuillez ordonner les autres cours par ordre de pr\\xE9f\\xE9rence\",\n          courses: list_other_courses,\n          key: \"other_courses_ranking\",\n          answer: \"other_courses_ranking\",\n          getStepIndex: this.getStepIndex,\n          handleStepChange: this.handleStepChange,\n          getStepList: this.getStepList,\n          setStepList: this.setStepList,\n          getAnswers: this.getAnswers,\n          setAnswers: this.setAnswers,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        });\n      } else if (current_step_name === \"final_question\") {\n        step = React.createElement(FinalQuestion, {\n          instructions: \"Ce questionnaire est maintenant termin\\xE9. Veuillez envoyer vos r\\xE9ponses pour que celles-ci soient prises en compte.\",\n          key: \"final-question\",\n          getStepIndex: this.getStepIndex,\n          handleStepChange: this.handleStepChange,\n          getStepList: this.getStepList,\n          setStepList: this.setStepList,\n          getAnswersAreSent: this.getAnswersAreSent,\n          sendAnswers: this.sendAnswers,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"questionnaire\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, step);\n    }\n  }]);\n\n  return Questionnaire;\n}(Component);\n\nvar InitialQuestions =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(InitialQuestions, _Component2);\n\n  function InitialQuestions(props) {\n    var _this2;\n\n    _classCallCheck(this, InitialQuestions);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(InitialQuestions).call(this, props));\n\n    _this2.handleInputChange = function (event) {\n      var target = event.target;\n      var value = target.type === 'number' ? Math.max(target.value, 0) : target.type === 'text' ? target.value.substring(0, 200) : target.value;\n      var name = target.name;\n\n      var new_answers = _this2.props.getAnswers();\n\n      new_answers[name] = value;\n\n      _this2.props.setAnswers(new_answers);\n    };\n\n    _this2.verificationFunction = function () {\n      var answers = _this2.props.getAnswers();\n\n      var all_questions_answered_properly = answers.year != '' && answers.TOEIC != '' && !(answers.number_english_courses === 0 && answers.justification_no_english === '') && !(answers.number_english_courses === 0 && answers.justification_no_english === 'Autre' && answers.justification_no_english_text === '');\n      var current_error_messages = [];\n\n      if (!all_questions_answered_properly) {\n        current_error_messages.push(React.createElement(ErrorMessage, {\n          text: \"Veuillez r\\xE9pondre \\xE0 toutes les questions de cette page.\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }));\n      }\n\n      _this2.setState({\n        error_messages: current_error_messages\n      }); //ajouter d'autres erreurs éventuelles\n\n\n      return all_questions_answered_properly;\n    };\n\n    _this2.state = {\n      error_messages: []\n    };\n    return _this2;\n  }\n\n  _createClass(InitialQuestions, [{\n    key: \"render\",\n    value: function render() {\n      var additionnal_question_about_english_courses = [];\n\n      if (this.props.getAnswers().number_english_courses < 1) {\n        additionnal_question_about_english_courses.push([React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, \"Veuillez justifier l'absence de cours d'anglais dans vos choix.\"), React.createElement(\"select\", {\n          name: \"justification_no_english\",\n          type: \"select\",\n          className: \"questionnaire-form-select\",\n          value: this.props.getAnswers().justification_no_english,\n          onChange: this.handleInputChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, React.createElement(\"option\", {\n          value: \"Je suis le CIM ou j'ai valid\\xE9 le CIM\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, \"Je suis le CIM ou j'ai valid\\xE9 le CIM\"), React.createElement(\"option\", {\n          value: \"J'ai valid\\xE9 tous mes ECTS d'Anglais et l'obligation TOEIC\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, \"J'ai valid\\xE9 tous mes ECTS d'Anglais et l'obligation TOEIC\"), React.createElement(\"option\", {\n          value: \"Je dois me concentrer sur ma LV2 ce semestre\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, \"Je dois me concentrer sur ma  ce semestre\"), React.createElement(\"option\", {\n          value: \"Je suis des cours hors ENPC\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        }, \"Je suis des cours hors ENPC\"), React.createElement(\"option\", {\n          value: \"Je ne suis pas \\xE0 l'ENPC ce semestre\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, \"Je ne suis pas \\xE0 l'ENPC ce semestre\"), React.createElement(\"option\", {\n          value: \"Je suis stagiaire \\xE9tranger(e)\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, \"Je suis stagiaire \\xE9tranger(e)\"), React.createElement(\"option\", {\n          value: \"Autre\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, \"Autre\")), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        })]);\n      }\n\n      if (this.props.getAnswers().number_english_courses < 1 && this.props.getAnswers().justification_no_english === \"Autre\") {\n        additionnal_question_about_english_courses.push([React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196\n          },\n          __self: this\n        }, \"Veuillez pr\\xE9ciser cette autre raison.\"), React.createElement(\"input\", {\n          name: \"justification_no_english_text\",\n          type: \"text\",\n          className: \"questionnaire-form-text\",\n          value: this.props.getAnswers().justification_no_english_text,\n          onChange: this.handleInputChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        })]);\n      }\n\n      var instructions = \"Veuillez répondre aux questions suivantes. Il vous sera demandé de classer les cours par ordre de préférence dans la suite du questionnaire.\";\n\n      if (this.state.error_messages.length > 0) {\n        instructions = this.state.error_messages;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(QuestionInstructions, {\n        text: instructions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"question-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"initial-questions-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"En quelle ann\\xE9e \\xEAtes-vous ? \"), React.createElement(\"select\", {\n        name: \"year\",\n        type: \"select\",\n        className: \"questionnaire-form-select\",\n        value: this.props.getAnswers().year,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        selected: true,\n        disabled: true,\n        hidden: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"Choisir\"), React.createElement(\"option\", {\n        value: \"1A\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"1A\"), React.createElement(\"option\", {\n        value: \"2/3A\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"2/3A\"), React.createElement(\"option\", {\n        value: \"Cycle Master\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, \"Cycle Master\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"Quelle note avez-vous obtenue au TOEIC ? \"), React.createElement(\"select\", {\n        name: \"TOEIC\",\n        type: \"select\",\n        className: \"questionnaire-form-select\",\n        value: this.props.getAnswers().TOEIC,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        selected: true,\n        disabled: true,\n        hidden: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Choisir\"), React.createElement(\"option\", {\n        value: \"moins de 650\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, \"moins de 650\"), React.createElement(\"option\", {\n        value: \"entre 650 et 785\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"entre 650 et 785\"), React.createElement(\"option\", {\n        value: \"plus de 785\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"plus de 785\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"Combien de cours d'Anglais souhaitez-vous suivre ? (Attention, une justification sera demand\\xE9e si vous ne souhaitez pas en suivre)\"), React.createElement(\"input\", {\n        name: \"number_english_courses\",\n        type: \"number\",\n        className: \"questionnaire-form-number\",\n        value: this.props.getAnswers().number_english_courses,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }), additionnal_question_about_english_courses, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"Combien de cours de langues diff\\xE9rentes de l'anglais souhaitez-vous suivre ? (une langue au niveau d\\xE9butant compte pour deux)\"), React.createElement(\"input\", {\n        name: \"number_other_courses\",\n        type: \"number\",\n        className: \"questionnaire-form-number\",\n        value: this.props.getAnswers().number_other_courses,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }))), React.createElement(QuestionFooter, {\n        handleStepChange: this.props.handleStepChange,\n        getStepList: this.props.getStepList,\n        getStepIndex: this.props.getStepIndex,\n        verificationFunction: this.verificationFunction,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return InitialQuestions;\n}(Component);\n\nvar CourseRankingQuestion =\n/*#__PURE__*/\nfunction (_Component3) {\n  _inherits(CourseRankingQuestion, _Component3);\n\n  function CourseRankingQuestion(props) {\n    var _this3;\n\n    _classCallCheck(this, CourseRankingQuestion);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(CourseRankingQuestion).call(this, props));\n\n    _this3.setRanking = function (new_ranking) {\n      var new_answers = _this3.props.getAnswers();\n\n      new_answers[_this3.props.answer] = new_ranking;\n\n      _this3.props.setAnswers(new_answers);\n    };\n\n    _this3.getRanking = function () {\n      return _this3.props.getAnswers()[_this3.props.answer];\n    };\n\n    _this3.handleAddCourseToRanking = function (course) {\n      if (!_this3.getRanking().includes(course)) {\n        var new_ranking = _this3.getRanking();\n\n        new_ranking.push(course);\n\n        _this3.setRanking(new_ranking);\n      }\n    };\n\n    _this3.handleRankUp = function (index_in_ranking) {\n      //fait gagner une place dans le classement\n      if (index_in_ranking > 0) {\n        var new_ranking = _this3.getRanking();\n\n        var course_to_move = _this3.getRanking()[index_in_ranking]; //swap\n\n\n        new_ranking[index_in_ranking] = new_ranking[index_in_ranking - 1];\n        new_ranking[index_in_ranking - 1] = course_to_move;\n\n        _this3.setRanking(new_ranking);\n      }\n    };\n\n    _this3.handleRankDown = function (index_in_ranking) {\n      //fait perdre une place dans le classement\n      if (index_in_ranking < _this3.getRanking().length - 1) {\n        var new_ranking = _this3.getRanking();\n\n        var course_to_move = _this3.getRanking()[index_in_ranking]; //swap\n\n\n        new_ranking[index_in_ranking] = new_ranking[index_in_ranking + 1];\n        new_ranking[index_in_ranking + 1] = course_to_move;\n\n        _this3.setRanking(new_ranking);\n      }\n    };\n\n    _this3.handleDeletionFromRanking = function (index_in_ranking) {\n      var new_ranking = _this3.getRanking();\n\n      new_ranking.splice(index_in_ranking, 1);\n\n      _this3.setRanking(new_ranking);\n    };\n\n    _this3.verificationFunction = function () {\n      var answers = _this3.props.getAnswers();\n\n      var current_error_messages = [];\n      var all_is_right = true;\n\n      if (answers[_this3.props.answer].length === 0) {\n        //classement vide affiche un message d'erreur\n        current_error_messages.push(React.createElement(ErrorMessage, {\n          text: \"Attention ! Vous n'avez class\\xE9 aucun cours ! Veuillez modifier le nombre de cours en d\\xE9but de questionnaire si vous ne souhaitez en suivre aucun dans cette cat\\xE9gorie.\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 325\n          },\n          __self: this\n        }));\n        all_is_right = false;\n      }\n\n      _this3.setState({\n        error_messages: current_error_messages\n      });\n\n      return all_is_right;\n    };\n\n    _this3.state = {\n      error_messages: []\n    };\n    return _this3;\n  }\n\n  _createClass(CourseRankingQuestion, [{\n    key: \"render\",\n    value: function render() {\n      var instructions = this.props.instructions;\n\n      if (this.state.error_messages.length > 0) {\n        instructions = this.state.error_messages;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, React.createElement(QuestionInstructions, {\n        text: instructions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"question-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, React.createElement(CourseList, {\n        courses: this.props.courses,\n        handleAddCourseToRanking: this.handleAddCourseToRanking,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }), React.createElement(CourseRanking, {\n        ranking: this.getRanking(),\n        handleRankUp: this.handleRankUp,\n        handleRankDown: this.handleRankDown,\n        handleDeletionFromRanking: this.handleDeletionFromRanking,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      })), React.createElement(QuestionFooter, {\n        handleStepChange: this.props.handleStepChange,\n        getStepList: this.props.getStepList,\n        getStepIndex: this.props.getStepIndex,\n        verificationFunction: this.verificationFunction,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CourseRankingQuestion;\n}(Component);\n\nvar CourseRanking =\n/*#__PURE__*/\nfunction (_Component4) {\n  _inherits(CourseRanking, _Component4);\n\n  function CourseRanking() {\n    _classCallCheck(this, CourseRanking);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseRanking).apply(this, arguments));\n  }\n\n  _createClass(CourseRanking, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var ranking_display = [];\n\n      var _loop = function _loop(index) {\n        ranking_display.push(React.createElement(CourseBox, {\n          key: index,\n          course: _this4.props.ranking[index],\n          buttons: [React.createElement(Button, {\n            text: \"monter\",\n            onClick: function onClick() {\n              return _this4.props.handleRankUp(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 356\n            },\n            __self: this\n          }), React.createElement(Button, {\n            text: \"descendre\",\n            onClick: function onClick() {\n              return _this4.props.handleRankDown(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 357\n            },\n            __self: this\n          }), React.createElement(Button, {\n            text: \"supprimer\",\n            onClick: function onClick() {\n              return _this4.props.handleDeletionFromRanking(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 358\n            },\n            __self: this\n          })],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 355\n          },\n          __self: this\n        }));\n      };\n\n      for (var index = 0; index < this.props.ranking.length; index++) {\n        _loop(index);\n      }\n\n      return React.createElement(\"div\", {\n        className: \"course-ranking\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"course-ranking-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, \"Mon classement\"), React.createElement(CourseBoxList, {\n        content: ranking_display,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CourseRanking;\n}(Component);\n\nvar FinalQuestion =\n/*#__PURE__*/\nfunction (_Component5) {\n  _inherits(FinalQuestion, _Component5);\n\n  function FinalQuestion(props) {\n    var _this5;\n\n    _classCallCheck(this, FinalQuestion);\n\n    _this5 = _possibleConstructorReturn(this, _getPrototypeOf(FinalQuestion).call(this, props));\n    _this5.state = {\n      answers_are_sent: false\n    };\n    return _this5;\n  }\n\n  _createClass(FinalQuestion, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, React.createElement(QuestionInstructions, {\n        text: this.props.instructions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"question-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, this.props.getAnswersAreSent() ? React.createElement(\"div\", {\n        className: \"final-buttons-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }, \"Vos r\\xE9ponses ont bien \\xE9t\\xE9 envoy\\xE9es.\") : React.createElement(\"div\", {\n        className: \"final-buttons-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, React.createElement(FinalButton, {\n        text: \"Envoyer les réponses\",\n        onClick: this.props.sendAnswers,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }), React.createElement(FinalButton, {\n        text: \"Annuler le questionnaire\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      }))), this.props.getAnswersAreSent() ? null : React.createElement(QuestionFooter, {\n        handleStepChange: this.props.handleStepChange,\n        getStepList: this.props.getStepList,\n        getStepIndex: this.props.getStepIndex,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return FinalQuestion;\n}(Component);\n\nvar CourseList =\n/*#__PURE__*/\nfunction (_Component6) {\n  _inherits(CourseList, _Component6);\n\n  function CourseList(props) {\n    var _this6;\n\n    _classCallCheck(this, CourseList);\n\n    _this6 = _possibleConstructorReturn(this, _getPrototypeOf(CourseList).call(this, props));\n\n    _this6.getCurrentFilters = function () {\n      return _this6.state.current_filters;\n    };\n\n    _this6.handleFilterChange = function (event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n      var new_filters = _this6.state.current_filters;\n      new_filters[name] = value;\n\n      _this6.setState({\n        current_filters: new_filters\n      });\n    };\n\n    _this6.buildCriteriaWithOptions = function () {\n      var list_languages = [];\n      var list_schedules = [];\n      var list_levels = [];\n\n      for (var index = 0; index < _this6.props.courses.length; index++) {\n        var current_course = _this6.props.courses[index];\n\n        if (!list_languages.includes(current_course.language)) {\n          list_languages.push(current_course.language);\n        }\n\n        ;\n\n        if (!list_levels.includes(current_course.level)) {\n          list_levels.push(current_course.level);\n        }\n\n        ;\n\n        for (var index_schedule = 0; index_schedule < current_course.schedules.length; index_schedule++) {\n          var schedule = current_course.schedules[index_schedule];\n\n          if (!list_schedules.includes(schedule)) {\n            list_schedules.push(schedule);\n          }\n\n          ;\n        }\n      }\n\n      var criteria_with_options = {};\n\n      if (list_languages.length > 1) {\n        criteria_with_options.language = list_languages;\n      }\n\n      if (list_schedules.length > 1) {\n        criteria_with_options.schedule = list_schedules;\n      }\n\n      if (list_levels.length > 1) {\n        criteria_with_options.level = list_levels;\n      }\n\n      console.log(criteria_with_options);\n      return criteria_with_options;\n    };\n\n    _this6.buildListCoursesToDisplay = function () {\n      var list_courses_to_display = _this6.props.courses;\n\n      if (_this6.state.current_filters.language != \"\") {\n        list_courses_to_display = list_courses_to_display.filter(function (value, index, arr) {\n          return value.language === _this6.state.current_filters.language;\n        });\n      }\n\n      if (_this6.state.current_filters.schedule != \"\") {\n        list_courses_to_display = list_courses_to_display.filter(function (value, index, arr) {\n          return value.schedules.includes(_this6.state.current_filters.schedule);\n        });\n      }\n\n      if (_this6.state.current_filters.level != \"\") {\n        list_courses_to_display = list_courses_to_display.filter(function (value, index, arr) {\n          return value.level === _this6.state.current_filters.level;\n        });\n      }\n\n      return list_courses_to_display;\n    };\n\n    _this6.state = {\n      current_filters: {\n        language: \"\",\n        schedule: \"\",\n        level: \"\"\n      },\n      criteria_with_options: _this6.buildCriteriaWithOptions()\n    }; //pas de filtrage par défaut\n\n    return _this6;\n  }\n\n  _createClass(CourseList, [{\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      var list_display = [];\n      var list_courses_to_display = this.buildListCoursesToDisplay();\n\n      var _loop2 = function _loop2(index) {\n        list_display.push(React.createElement(CourseBox, {\n          key: index,\n          course: list_courses_to_display[index],\n          buttons: [React.createElement(Button, {\n            text: \"ajouter au classement\",\n            onClick: function onClick() {\n              return _this7.props.handleAddCourseToRanking(list_courses_to_display[index]);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 459\n            },\n            __self: this\n          })],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 458\n          },\n          __self: this\n        }));\n      };\n\n      for (var index = 0; index < list_courses_to_display.length; index++) {\n        _loop2(index);\n      }\n\n      return React.createElement(\"div\", {\n        className: \"course-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"course-list-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465\n        },\n        __self: this\n      }, \"Liste des cours\"), React.createElement(CourseListFilter, {\n        criteriaWithOptions: this.state.criteria_with_options,\n        getCurrentFilters: this.getCurrentFilters,\n        handleFilterChange: this.handleFilterChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466\n        },\n        __self: this\n      }), React.createElement(CourseBoxList, {\n        content: list_display,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CourseList;\n}(Component);\n\nvar CourseListFilter =\n/*#__PURE__*/\nfunction (_Component7) {\n  _inherits(CourseListFilter, _Component7);\n\n  function CourseListFilter() {\n    _classCallCheck(this, CourseListFilter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseListFilter).apply(this, arguments));\n  }\n\n  _createClass(CourseListFilter, [{\n    key: \"render\",\n    value: function render() {\n      var criteria_selection = [];\n\n      for (var criterion in this.props.criteriaWithOptions) {\n        var list_options = [React.createElement(\"option\", {\n          value: \"\",\n          key: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 477\n          },\n          __self: this\n        })];\n\n        for (var index = 0; index < this.props.criteriaWithOptions[criterion].length; index++) {\n          var option_name = this.props.criteriaWithOptions[criterion][index];\n          list_options.push(React.createElement(\"option\", {\n            value: option_name,\n            key: option_name,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 480\n            },\n            __self: this\n          }, option_name));\n          list_options.push(\"\\n\");\n        }\n\n        criteria_selection.push(React.createElement(\"div\", {\n          className: \"course-list-filter-option\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 484\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 485\n          },\n          __self: this\n        }, criterion == \"language\" ? \"Langue : \" : criterion == \"schedule\" ? \"Horaire : \" : criterion == \"level\" ? \"Niveau : \" : \"erreur\"), React.createElement(\"select\", {\n          name: criterion,\n          type: \"select\",\n          value: this.props.getCurrentFilters()[criterion],\n          onChange: this.props.handleFilterChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 486\n          },\n          __self: this\n        }, list_options)));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"course-list-filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 500\n        },\n        __self: this\n      }, criteria_selection);\n    }\n  }]);\n\n  return CourseListFilter;\n}(Component); //structure générale de question\n\n\nvar QuestionInstructions =\n/*#__PURE__*/\nfunction (_Component8) {\n  _inherits(QuestionInstructions, _Component8);\n\n  function QuestionInstructions() {\n    _classCallCheck(this, QuestionInstructions);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(QuestionInstructions).apply(this, arguments));\n  }\n\n  _createClass(QuestionInstructions, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"h2\", {\n        className: \"question-instructions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509\n        },\n        __self: this\n      }, \" \", this.props.text);\n    }\n  }]);\n\n  return QuestionInstructions;\n}(Component);\n\nvar QuestionFooter =\n/*#__PURE__*/\nfunction (_Component9) {\n  _inherits(QuestionFooter, _Component9);\n\n  function QuestionFooter() {\n    _classCallCheck(this, QuestionFooter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(QuestionFooter).apply(this, arguments));\n  }\n\n  _createClass(QuestionFooter, [{\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      var current_step_index = this.props.getStepIndex();\n      var step_list_length = this.props.getStepList().length;\n      var left_button = null;\n      var right_button = null;\n\n      if (current_step_index > 0) {\n        left_button = React.createElement(ChangeStepButton, {\n          text: \"Pr\\xE9c\\xE9dent\",\n          onClick: function onClick() {\n            return _this8.props.handleStepChange(\"previous\");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 522\n          },\n          __self: this\n        });\n      }\n\n      var nextButtonEffect = function nextButtonEffect() {\n        _this8.props.handleStepChange(\"next\");\n      };\n\n      if (this.props.verificationFunction) {\n        //s'il y a une vérification à faire, elle est faite avant de passer à la question suivante\n        nextButtonEffect = function nextButtonEffect() {\n          if (_this8.props.verificationFunction()) {\n            _this8.props.handleStepChange(\"next\");\n          }\n        };\n      }\n\n      if (current_step_index < step_list_length - 1) {\n        right_button = React.createElement(ChangeStepButton, {\n          text: \"Suivant\",\n          onClick: nextButtonEffect,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 534\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"question-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537\n        },\n        __self: this\n      }, \" \", React.createElement(\"div\", {\n        className: \"question-footer-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537\n        },\n        __self: this\n      }, \" \", left_button), React.createElement(\"div\", {\n        className: \"question-footer-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537\n        },\n        __self: this\n      }, right_button));\n    }\n  }]);\n\n  return QuestionFooter;\n}(Component); //classes utiles\n\n\nvar CourseBox =\n/*#__PURE__*/\nfunction (_Component10) {\n  _inherits(CourseBox, _Component10);\n\n  function CourseBox() {\n    _classCallCheck(this, CourseBox);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseBox).apply(this, arguments));\n  }\n\n  _createClass(CourseBox, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"course-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 546\n        },\n        __self: this\n      }, \" \", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 546\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 546\n        },\n        __self: this\n      }, this.props.course.name), \" \", React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 546\n        },\n        __self: this\n      }, this.props.course.language), this.props.course.schedules.map(function (date) {\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 546\n          },\n          __self: this\n        }, date);\n      })), \" \", React.createElement(\"div\", {\n        className: \"course-box-buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 546\n        },\n        __self: this\n      }, this.props.buttons));\n    }\n  }]);\n\n  return CourseBox;\n}(Component);\n\nvar Button =\n/*#__PURE__*/\nfunction (_Component11) {\n  _inherits(Button, _Component11);\n\n  function Button() {\n    _classCallCheck(this, Button);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Button).apply(this, arguments));\n  }\n\n  _createClass(Button, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"button\", {\n        className: \"button\",\n        onClick: this.props.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554\n        },\n        __self: this\n      }, this.props.text);\n    }\n  }]);\n\n  return Button;\n}(Component);\n\nvar ChangeStepButton =\n/*#__PURE__*/\nfunction (_Component12) {\n  _inherits(ChangeStepButton, _Component12);\n\n  function ChangeStepButton() {\n    _classCallCheck(this, ChangeStepButton);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ChangeStepButton).apply(this, arguments));\n  }\n\n  _createClass(ChangeStepButton, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"button\", {\n        className: \"change-step-button\",\n        onClick: this.props.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 562\n        },\n        __self: this\n      }, this.props.text);\n    }\n  }]);\n\n  return ChangeStepButton;\n}(Component);\n\nvar FinalButton =\n/*#__PURE__*/\nfunction (_Component13) {\n  _inherits(FinalButton, _Component13);\n\n  function FinalButton() {\n    _classCallCheck(this, FinalButton);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FinalButton).apply(this, arguments));\n  }\n\n  _createClass(FinalButton, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"button\", {\n        className: \"final-button\",\n        onClick: this.props.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 570\n        },\n        __self: this\n      }, this.props.text);\n    }\n  }]);\n\n  return FinalButton;\n}(Component);\n\nvar ErrorMessage =\n/*#__PURE__*/\nfunction (_Component14) {\n  _inherits(ErrorMessage, _Component14);\n\n  function ErrorMessage() {\n    _classCallCheck(this, ErrorMessage);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ErrorMessage).apply(this, arguments));\n  }\n\n  _createClass(ErrorMessage, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"error-message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 579\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: error_panel,\n        alt: \"error_panel\",\n        style: {\n          height: \"5vh\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 579\n        },\n        __self: this\n      }), this.props.text);\n    }\n  }]);\n\n  return ErrorMessage;\n}(Component);\n\nvar CourseBoxList =\n/*#__PURE__*/\nfunction (_Component15) {\n  _inherits(CourseBoxList, _Component15);\n\n  function CourseBoxList() {\n    _classCallCheck(this, CourseBoxList);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseBoxList).apply(this, arguments));\n  }\n\n  _createClass(CourseBoxList, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"course-box-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 587\n        },\n        __self: this\n      }, this.props.content);\n    }\n  }]);\n\n  return CourseBoxList;\n}(Component);\n\nexport default Questionnaire;","map":{"version":3,"sources":["/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation/front/src/Questionnaire.js"],"names":["React","Component","axios","dummyData","url","error_panel","Questionnaire","props","buildStepList","answers","step_list","number_english_courses","push","number_other_courses","console","log","state","getStepIndex","step_index","handleStepChange","direction","setState","length","getStepList","setStepList","new_step_list","getAnswers","setAnswers","new_answers","getAnswersAreSent","answers_are_sent","sendAnswers","data","is_loaded","year","TOEIC","justification_no_english","justification_no_english_text","english_courses_ranking","other_courses_ranking","step","current_step_name","list_english_courses","courses","filter","value","index","arr","language","list_other_courses","InitialQuestions","handleInputChange","event","target","type","Math","max","substring","name","verificationFunction","all_questions_answered_properly","current_error_messages","error_messages","additionnal_question_about_english_courses","instructions","CourseRankingQuestion","setRanking","new_ranking","answer","getRanking","handleAddCourseToRanking","course","includes","handleRankUp","index_in_ranking","course_to_move","handleRankDown","handleDeletionFromRanking","splice","all_is_right","CourseRanking","ranking_display","ranking","FinalQuestion","CourseList","getCurrentFilters","current_filters","handleFilterChange","new_filters","buildCriteriaWithOptions","list_languages","list_schedules","list_levels","current_course","level","index_schedule","schedules","schedule","criteria_with_options","buildListCoursesToDisplay","list_courses_to_display","list_display","CourseListFilter","criteria_selection","criterion","criteriaWithOptions","list_options","option_name","QuestionInstructions","text","QuestionFooter","current_step_index","step_list_length","left_button","right_button","nextButtonEffect","CourseBox","map","date","buttons","Button","onClick","ChangeStepButton","FinalButton","ErrorMessage","height","CourseBoxList","content"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport dummyData from \"./DummyData\";\nimport url from \"./url\";\nimport error_panel from './images/error_panel.png';\nimport './Questionnaire.css';\n\nclass Questionnaire extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { data: null, is_loaded: false, step_list: [\"initial_questions\"], step_index: 0, answers_are_sent: false,answers: { year: '', TOEIC: '', justification_no_english: '', justification_no_english_text: '', number_english_courses: 1, number_other_courses: 0, english_courses_ranking:[], other_courses_ranking:[]}};\n        console.log(\"built\")\n      }\n\n\n    componentDidMount(){\n      /*axios.get(url+\"courses\")\n      .then(res => res.json())\n      .then(\n        (result) => {\n          this.setState({\n            is_loaded: true,\n            data: result\n          });\n        },\n        (error) => {\n          this.setState({\n            isLoaded: false\n          });\n        }\n      );*/\n      console.log(\"didMount\")\n      this.setState({data: dummyData})\n    }\n\n    buildStepList=(answers)=>{\n      let step_list=[\"initial_questions\"];\n      if(answers.number_english_courses>0){\n        step_list.push(\"ranking_english_courses\");\n      }\n      if(answers.number_other_courses>0){\n        step_list.push(\"ranking_other_courses\");\n      }\n      step_list.push(\"final_question\")\n      console.log(this.state)\n      return step_list\n    }\n    \n    getStepIndex=()=>{return this.state.step_index;}\n    \n    handleStepChange = (direction) => {\n      if(direction===\"previous\"&&this.state.step_index>0){\n        this.setState({step_index: this.state.step_index-1});\n      } else if(direction===\"next\"&&this.state.step_index<this.state.step_list.length-1){\n        this.setState({step_index: this.state.step_index+1});\n      }\n    }\n\n    getStepList=()=>{return this.state.step_list;}\n\n    setStepList=(new_step_list)=>{this.setState({step_list: new_step_list});}\n\n    getAnswers=()=>{ return this.state.answers;}\n\n    setAnswers=(new_answers)=>{\n      let new_step_list=this.buildStepList(new_answers);\n      this.setState({answers: new_answers, step_list: new_step_list});\n    }\n\n    getAnswersAreSent=()=>{\n        return this.state.answers_are_sent;\n    }\n\n    sendAnswers=()=>{\n        //ajouter requête\n        this.setState({answers_are_sent: true});\n    }\n\n    render() {\n        let data=this.state.data;\n        let step=null;\n        let current_step_name=this.state.step_list[this.state.step_index];\n        if(current_step_name===\"initial_questions\"){\n          step=<InitialQuestions \n          getStepIndex={this.getStepIndex}\n          handleStepChange={this.handleStepChange}\n          getStepList={this.getStepList}\n          setStepList={this.setStepList} \n          getAnswers={this.getAnswers}\n          setAnswers={this.setAnswers}\n          />;\n        }else if(current_step_name===\"ranking_english_courses\"){\n          let list_english_courses=data.courses.filter(function(value, index, arr){return value.language===\"Anglais\";});\n          step=<CourseRankingQuestion \n          instructions=\"Veuillez ordonner les cours d'Anglais par ordre de préférence\"\n          courses={list_english_courses} \n          key=\"english_courses_ranking\"\n          answer=\"english_courses_ranking\"\n          getStepIndex={this.getStepIndex}\n          handleStepChange={this.handleStepChange}\n          getStepList={this.getStepList}\n          setStepList={this.setStepList} \n          getAnswers={this.getAnswers}\n          setAnswers={this.setAnswers}\n          />;\n        }else if(current_step_name===\"ranking_other_courses\"){\n          let list_other_courses=data.courses.filter(function(value, index, arr){return value.language!=\"Anglais\";});\n          step=<CourseRankingQuestion \n          instructions=\"Veuillez ordonner les autres cours par ordre de préférence\"\n          courses={list_other_courses} \n          key=\"other_courses_ranking\"\n          answer=\"other_courses_ranking\"\n          getStepIndex={this.getStepIndex}\n          handleStepChange={this.handleStepChange}\n          getStepList={this.getStepList}\n          setStepList={this.setStepList} \n          getAnswers={this.getAnswers}\n          setAnswers={this.setAnswers}\n          />;\n        }else if(current_step_name===\"final_question\"){\n            step=<FinalQuestion\n            instructions=\"Ce questionnaire est maintenant terminé. Veuillez envoyer vos réponses pour que celles-ci soient prises en compte.\" \n            key=\"final-question\"\n            getStepIndex={this.getStepIndex}\n            handleStepChange={this.handleStepChange}\n            getStepList={this.getStepList}\n            setStepList={this.setStepList}\n            getAnswersAreSent={this.getAnswersAreSent}\n            sendAnswers={this.sendAnswers}\n            />;\n          }\n      return (\n        <div className=\"questionnaire\">{step}</div>\n      );\n    }\n  }\n\nclass InitialQuestions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {error_messages: []};\n  }\n\n  handleInputChange= (event) => {\n    const target = event.target;\n    const value = target.type === 'number' ? Math.max(target.value, 0) : (target.type==='text' ? target.value.substring(0,200) : target.value);\n    const name = target.name;\n\n    let new_answers= this.props.getAnswers();\n    new_answers[name]=value;\n    this.props.setAnswers(new_answers);\n  }\n\n  verificationFunction =()=>{\n    let answers=this.props.getAnswers();\n    let all_questions_answered_properly=(answers.year!='')&&(answers.TOEIC!='')&&!((answers.number_english_courses===0)&&(answers.justification_no_english===''))&&!((answers.number_english_courses===0)&&(answers.justification_no_english==='Autre')&&(answers.justification_no_english_text===''));\n    let current_error_messages=[];\n    if(!all_questions_answered_properly){\n      current_error_messages.push(<ErrorMessage text=\"Veuillez répondre à toutes les questions de cette page.\"/>);\n    }\n    this.setState({error_messages: current_error_messages});\n    //ajouter d'autres erreurs éventuelles\n    return all_questions_answered_properly;\n  }\n\n  render() {\n    let additionnal_question_about_english_courses=[];\n    if(this.props.getAnswers().number_english_courses<1)\n    {\n      additionnal_question_about_english_courses.push(\n        [\n        <label>Veuillez justifier l'absence de cours d'anglais dans vos choix.</label>,\n        <select\n          name=\"justification_no_english\"\n          type='select'\n          className=\"questionnaire-form-select\"\n          value={this.props.getAnswers().justification_no_english}\n          onChange={this.handleInputChange} >\n          <option value=\"Je suis le CIM ou j'ai validé le CIM\">Je suis le CIM ou j'ai validé le CIM</option>\n          <option value=\"J'ai validé tous mes ECTS d'Anglais et l'obligation TOEIC\">J'ai validé tous mes ECTS d'Anglais et l'obligation TOEIC</option>\n          <option value='Je dois me concentrer sur ma LV2 ce semestre'>Je dois me concentrer sur ma  ce semestre</option>\n          <option value=\"Je suis des cours hors ENPC\">Je suis des cours hors ENPC</option>\n          <option value=\"Je ne suis pas à l'ENPC ce semestre\">Je ne suis pas à l'ENPC ce semestre</option>\n          <option value=\"Je suis stagiaire étranger(e)\">Je suis stagiaire étranger(e)</option>\n          <option value='Autre'>Autre</option>\n        </select>,\n        <br/>\n        ]\n      );\n    }\n    if((this.props.getAnswers().number_english_courses<1)&&(this.props.getAnswers().justification_no_english===\"Autre\"))\n    {\n      additionnal_question_about_english_courses.push(\n      [\n      <label>Veuillez préciser cette autre raison.</label>,\n      <input\n        name=\"justification_no_english_text\"\n        type=\"text\"\n        className=\"questionnaire-form-text\"\n        value={this.props.getAnswers().justification_no_english_text}\n        onChange={this.handleInputChange} />,\n        <br/>\n      ]\n      );\n    }\n    let instructions=\"Veuillez répondre aux questions suivantes. Il vous sera demandé de classer les cours par ordre de préférence dans la suite du questionnaire.\";\n    if(this.state.error_messages.length>0){\n      instructions=this.state.error_messages;\n    }\n    return (\n      <div className=\"question\">\n      <QuestionInstructions text={instructions}/>\n      <div className=\"question-content\">\n      <form className=\"initial-questions-form\">\n        <label>\n          En quelle année êtes-vous ? </label>\n          <select\n            name=\"year\"\n            type='select'\n            className=\"questionnaire-form-select\"\n            value={this.props.getAnswers().year}\n            onChange={this.handleInputChange} >\n            <option value=\"\" selected disabled hidden>Choisir</option>\n            <option value='1A'>1A</option>\n            <option value='2/3A'>2/3A</option>\n            <option value='Cycle Master'>Cycle Master</option>\n          </select>\n          <br/>\n        <label>\n          Quelle note avez-vous obtenue au TOEIC ? </label>\n          <select\n            name=\"TOEIC\"\n            type='select'\n            className=\"questionnaire-form-select\"\n            value={this.props.getAnswers().TOEIC}\n            onChange={this.handleInputChange} >\n            <option value=\"\" selected disabled hidden>Choisir</option>\n            <option value='moins de 650'>moins de 650</option>\n            <option value='entre 650 et 785'>entre 650 et 785</option>\n            <option value='plus de 785'>plus de 785</option>\n          </select>\n          <br/>\n        <label>\n          Combien de cours d'Anglais souhaitez-vous suivre ? (Attention, une justification sera demandée si vous ne souhaitez pas en suivre)</label>\n          <input\n            name=\"number_english_courses\"\n            type=\"number\"\n            className=\"questionnaire-form-number\"\n            value={this.props.getAnswers().number_english_courses}\n            onChange={this.handleInputChange} />\n          <br/>\n        {additionnal_question_about_english_courses}\n        <label>\n          Combien de cours de langues différentes de l'anglais souhaitez-vous suivre ? (une langue au niveau débutant compte pour deux)</label>\n          <input\n            name=\"number_other_courses\"\n            type=\"number\"\n            className=\"questionnaire-form-number\"\n            value={this.props.getAnswers().number_other_courses}\n            onChange={this.handleInputChange} />\n      </form>\n      </div>\n      <QuestionFooter handleStepChange={this.props.handleStepChange} getStepList={this.props.getStepList} getStepIndex={this.props.getStepIndex} verificationFunction={this.verificationFunction}/>\n      </div>\n    );\n  }\n}\n\nclass CourseRankingQuestion extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {error_messages: []};\n      }\n\n    setRanking=(new_ranking)=>{\n      let new_answers=this.props.getAnswers();\n      new_answers[this.props.answer]=new_ranking;\n      this.props.setAnswers(new_answers)\n    }\n\n    getRanking=()=>{\n      return this.props.getAnswers()[this.props.answer];\n    }\n\n    handleAddCourseToRanking = course =>{\n        if(!(this.getRanking().includes(course))){\n            let new_ranking=this.getRanking();\n            new_ranking.push(course);\n            this.setRanking(new_ranking);\n        }\n    }\n\n    handleRankUp = (index_in_ranking) =>{//fait gagner une place dans le classement\n        if(index_in_ranking>0){\n            let new_ranking=this.getRanking();\n            let course_to_move=this.getRanking()[index_in_ranking];//swap\n            new_ranking[index_in_ranking]=new_ranking[index_in_ranking-1];\n            new_ranking[index_in_ranking-1]=course_to_move;\n            this.setRanking(new_ranking);\n        }\n    }\n\n    handleRankDown = (index_in_ranking) =>{//fait perdre une place dans le classement\n        if(index_in_ranking<this.getRanking().length-1){\n          let new_ranking=this.getRanking();\n          let course_to_move=this.getRanking()[index_in_ranking];//swap\n          new_ranking[index_in_ranking]=new_ranking[index_in_ranking+1];\n          new_ranking[index_in_ranking+1]=course_to_move;\n          this.setRanking(new_ranking);\n      }\n    }\n\n    handleDeletionFromRanking =(index_in_ranking)=>{\n        let new_ranking=this.getRanking();\n        new_ranking.splice(index_in_ranking, 1);\n        this.setRanking(new_ranking);\n    }\n\n    verificationFunction=()=>{\n        let answers = this.props.getAnswers();\n        let current_error_messages=[];\n        let all_is_right=true;\n        if(answers[this.props.answer].length===0){//classement vide affiche un message d'erreur\n            current_error_messages.push(<ErrorMessage text=\"Attention ! Vous n'avez classé aucun cours ! Veuillez modifier le nombre de cours en début de questionnaire si vous ne souhaitez en suivre aucun dans cette catégorie.\"/>);\n            all_is_right=false;\n        }\n        this.setState({error_messages: current_error_messages});\n        return all_is_right;\n    }\n\n    render() {\n        let instructions=this.props.instructions;\n        if(this.state.error_messages.length>0){\n            instructions=this.state.error_messages;\n          }\n      return (\n        <div className=\"question\">\n          <QuestionInstructions text={instructions}/>\n          <div className=\"question-content\">\n              <CourseList courses={this.props.courses} handleAddCourseToRanking={this.handleAddCourseToRanking}/>\n              <CourseRanking ranking= {this.getRanking()} handleRankUp={this.handleRankUp} handleRankDown={this.handleRankDown} handleDeletionFromRanking={this.handleDeletionFromRanking}/>\n          </div>   \n          <QuestionFooter handleStepChange={this.props.handleStepChange} getStepList={this.props.getStepList} getStepIndex={this.props.getStepIndex} verificationFunction={this.verificationFunction}/>\n        </div>\n      );\n    }\n  }\n\nclass CourseRanking extends Component {\n    render() {\n        let ranking_display=[];\n        for(let index=0; index<this.props.ranking.length; index++){\n            ranking_display.push(\n            <CourseBox key={index} course={this.props.ranking[index]} buttons={[\n                <Button text=\"monter\" onClick={()=>this.props.handleRankUp(index)}/>,\n                <Button text=\"descendre\" onClick={()=>this.props.handleRankDown(index)}/>,\n                <Button text=\"supprimer\" onClick={()=>this.props.handleDeletionFromRanking(index)}/>]}/>\n            );\n        }\n      return (\n        <div className=\"course-ranking\"><h1 className=\"course-ranking-header\">Mon classement</h1><CourseBoxList content={ranking_display}/></div>\n      );\n    }\n  }\n\n\nclass FinalQuestion extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {answers_are_sent: false};\n      }\n\n    render() {\n        return (\n          <div className=\"question\">\n            <QuestionInstructions text={this.props.instructions}/>\n            <div className=\"question-content\">\n            {this.props.getAnswersAreSent() ? <div className=\"final-buttons-box\">Vos réponses ont bien été envoyées.</div> :\n                <div className=\"final-buttons-box\">\n                <FinalButton text={\"Envoyer les réponses\"} onClick={this.props.sendAnswers}/>\n                <FinalButton text={\"Annuler le questionnaire\"}/>\n                </div>}\n            </div>   \n            {this.props.getAnswersAreSent() ? null : <QuestionFooter handleStepChange={this.props.handleStepChange} getStepList={this.props.getStepList} getStepIndex={this.props.getStepIndex}/>}\n          </div>\n        );\n      }\n  }\n\nclass CourseList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {current_filters: {language:\"\", schedule:\"\", level:\"\"}, criteria_with_options: this.buildCriteriaWithOptions()};//pas de filtrage par défaut\n  }\n\n  getCurrentFilters=()=>{\n    return this.state.current_filters;\n  }\n\n  handleFilterChange=(event) => {\n    const target = event.target;\n    const value =  target.value;\n    const name = target.name;\n\n    let new_filters= this.state.current_filters;\n    new_filters[name]=value;\n    this.setState({current_filters: new_filters});\n  }\n\n  buildCriteriaWithOptions=()=>{\n    let list_languages=[];\n    let list_schedules=[];\n    let list_levels=[];\n    for(let index=0; index<this.props.courses.length; index++){\n      let current_course=this.props.courses[index];\n      if(!list_languages.includes(current_course.language)){list_languages.push(current_course.language)};\n      if(!list_levels.includes(current_course.level)){list_levels.push(current_course.level)};\n      for(let index_schedule=0; index_schedule<current_course.schedules.length; index_schedule++){\n        let schedule=current_course.schedules[index_schedule];\n        if(!list_schedules.includes(schedule)){list_schedules.push(schedule)};\n      }\n    }\n    let criteria_with_options ={};\n    if(list_languages.length>1){\n      criteria_with_options.language=list_languages;\n    }\n    if(list_schedules.length>1){\n      criteria_with_options.schedule=list_schedules;\n    }\n    if(list_levels.length>1){\n      criteria_with_options.level=list_levels;\n    }\n    console.log(criteria_with_options);\n    return criteria_with_options;\n\n  }\n\n  buildListCoursesToDisplay=()=>{\n    let list_courses_to_display=this.props.courses;\n    if(this.state.current_filters.language!=\"\"){\n      list_courses_to_display = list_courses_to_display.filter((value, index, arr)=>{return value.language===this.state.current_filters.language;});\n    }\n    if(this.state.current_filters.schedule!=\"\"){\n      list_courses_to_display = list_courses_to_display.filter((value, index, arr)=>{return value.schedules.includes(this.state.current_filters.schedule);});\n    }\n    if(this.state.current_filters.level!=\"\"){\n      list_courses_to_display = list_courses_to_display.filter((value, index, arr)=>{return value.level===this.state.current_filters.level;});\n    }\n    return list_courses_to_display;\n  }\n\n    render() {\n        let list_display=[];\n        let list_courses_to_display=this.buildListCoursesToDisplay();\n        for(let index=0; index<list_courses_to_display.length; index++){\n            list_display.push(\n            <CourseBox key={index} course={list_courses_to_display[index]} buttons={[\n                <Button text=\"ajouter au classement\" onClick={()=>this.props.handleAddCourseToRanking(list_courses_to_display[index])}/>\n                ]}/>\n            );\n        } \n      return (\n        <div className=\"course-list\">\n          <h1 className=\"course-list-header\">Liste des cours</h1>\n          <CourseListFilter criteriaWithOptions={this.state.criteria_with_options} getCurrentFilters={this.getCurrentFilters} handleFilterChange={this.handleFilterChange}/>\n          <CourseBoxList content={list_display}/>\n        </div>\n      );\n    }\n  }\n\nclass CourseListFilter extends Component {\n  render() {\n    let criteria_selection=[];\n    for(let criterion in this.props.criteriaWithOptions){\n      let list_options=[<option value=\"\" key={\"\"}></option>];\n      for(let index=0; index<this.props.criteriaWithOptions[criterion].length; index++){\n        let option_name=this.props.criteriaWithOptions[criterion][index];\n        list_options.push(<option value={option_name} key={option_name}>{option_name}</option>);\n        list_options.push(\"\\n\");\n      }\n      criteria_selection.push(\n        <div className=\"course-list-filter-option\">\n        <label >{criterion==\"language\"?\"Langue : \":(criterion==\"schedule\"?\"Horaire : \":(criterion==\"level\"?\"Niveau : \":\"erreur\"))}</label>\n        <select\n            name={criterion}\n            type='select'\n            value={this.props.getCurrentFilters()[criterion]}\n            onChange={this.props.handleFilterChange} >\n            {list_options}\n          </select>\n      </div>\n        \n      );\n    }\n    \n    \n  return (\n    <div className=\"course-list-filter\">{criteria_selection}</div>\n  );\n}\n}\n\n//structure générale de question\nclass QuestionInstructions extends Component {\n    render() {\n      return (\n        <h2 className=\"question-instructions\"> {this.props.text}</h2>\n      );\n    }\n  }\n\nclass QuestionFooter extends Component {\n\n    render() {\n      let current_step_index=this.props.getStepIndex();\n      let step_list_length=this.props.getStepList().length;\n      let left_button=null;\n      let right_button=null;\n      if(current_step_index>0){\n        left_button=<ChangeStepButton text=\"Précédent\" onClick={()=>this.props.handleStepChange(\"previous\")}/>\n      }\n      let nextButtonEffect=()=>{this.props.handleStepChange(\"next\")}\n      if(this.props.verificationFunction){//s'il y a une vérification à faire, elle est faite avant de passer à la question suivante\n        nextButtonEffect=()=>{\n          if(this.props.verificationFunction())\n          {\n            this.props.handleStepChange(\"next\");\n          }\n        }\n      }\n      if(current_step_index<step_list_length-1){\n        right_button=<ChangeStepButton text=\"Suivant\" onClick={nextButtonEffect }/>\n      }\n      return (\n        <div className=\"question-footer\"> <div className=\"question-footer-left\"> {left_button}</div><div className=\"question-footer-right\">{right_button}</div></div>\n      );\n    }\n  }\n\n//classes utiles\nclass CourseBox extends Component {\n    render() {\n      return (\n        <div className=\"course-box\"> <div><h2>{this.props.course.name}</h2> <h3>{this.props.course.language}</h3>{this.props.course.schedules.map(date => <p>{date}</p>)}</div> <div className=\"course-box-buttons\">{this.props.buttons}</div></div>\n      );\n    }\n  }\n\nclass Button extends Component {\n  render() {\n    return (\n      <button className=\"button\" onClick={this.props.onClick}>{this.props.text}</button>\n    );\n  }\n}\n\nclass ChangeStepButton extends Component {\n  render() {\n    return (\n      <button className=\"change-step-button\" onClick={this.props.onClick}>{this.props.text}</button>\n    );\n  }\n}\n\nclass FinalButton extends Component {\n    render() {\n      return (\n        <button className=\"final-button\" onClick={this.props.onClick}>{this.props.text}</button>\n      );\n    }\n  }\n\n  \nclass ErrorMessage extends Component {\n  render() {\n    return (\n      <div className=\"error-message\" ><img src={error_panel} alt=\"error_panel\" style={{height: \"5vh\"}}/>{this.props.text}</div>\n    );\n  }\n}\n\nclass CourseBoxList extends Component {\n  render() {\n    return (\n      <div className=\"course-box-list\" >{this.props.content}</div>\n    );\n  }\n}\n\n\nexport default Questionnaire;"]},"metadata":{},"sourceType":"module"}