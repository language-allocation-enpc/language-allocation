{"ast":null,"code":"import _classCallCheck from \"/home/jeffrey/Bureau/cours/projet_de_d\\xE9partement/language-allocation/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/jeffrey/Bureau/cours/projet_de_d\\xE9partement/language-allocation/front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/jeffrey/Bureau/cours/projet_de_d\\xE9partement/language-allocation/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/jeffrey/Bureau/cours/projet_de_d\\xE9partement/language-allocation/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/jeffrey/Bureau/cours/projet_de_d\\xE9partement/language-allocation/front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/jeffrey/Bureau/cours/projet_de_d\\xE9partement/language-allocation/front/src/Admin.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport \"./Admin.css\";\nimport url from \"./url\";\naxios.defaults.withCredentials = true;\n\nvar AdminPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AdminPage, _Component);\n\n  function AdminPage(props) {\n    var _this;\n\n    _classCallCheck(this, AdminPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AdminPage).call(this, props));\n\n    _this.getAuth = function () {\n      axios.get(url + 'admin/check-auth', {\n        withCredentials: false,\n        Authorization: 'Bearer ' + _this.state.token\n      }).then(function (res) {\n        _this.state.isAuth = true;\n        return true;\n      }, function (err) {\n        console.log(err);\n        _this.state.isAuth = false;\n        return false;\n      });\n    };\n\n    _this.logout = function () {\n      axios.delete(url + 'admin/logout', {\n        withCredentials: true,\n        Authorization: 'Bearer ' + _this.state.token\n      }).then(function (res) {\n        console.log(res.data.msg);\n        _this.state.isAuth = false;\n\n        _this.props.history.push('/admin/login');\n      }, function (err) {\n        console.log(err);\n        _this.state.isAuth = false;\n\n        _this.props.history.push('/admin/login');\n      });\n    };\n\n    _this.state = {\n      token: window.sessionStorage.getItem(\"jwt_token\"),\n      isAuth: null\n    };\n    return _this;\n  }\n\n  _createClass(AdminPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get(url + 'admin/check-auth', {\n        withCredentials: true,\n        headers: {\n          Authorization: 'Bearer ' + this.state.token\n        }\n      }).then(function (res) {\n        _this2.setState({\n          isAuth: true\n        });\n\n        console.log(\"Successfully authentified\");\n      }, function (err) {\n        console.log(\"in the error loop\");\n\n        _this2.setState({\n          isAuth: false\n        });\n\n        _this2.props.history.push('/admin/login');\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.state.isAuth) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"buttonList\",\n          style: {\n            textAlign: 'center',\n            position: 'absolute',\n            left: '50%',\n            top: '40%',\n            transform: 'translate(-50%, -50%)'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, \"Bienvenue sur le portail de gestion du questionnaire de langues de la DLC\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        })), React.createElement(\"form\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"button\",\n          style: {\n            backgroundColor: \"#4CAF50\",\n            border: \"none\",\n            color: \"white\",\n            padding: \"15px 32px\",\n            textAlign: \"center\",\n            textDecoration: \"none\",\n            display: \"inlineBlock\",\n            fontSize: \"16px\"\n          },\n          value: \"Gestion des Cours\",\n          onClick: function onClick() {\n            return window.location.href = '/admin/manage-courses';\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        })), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }), React.createElement(\"form\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"button\",\n          style: {\n            backgroundColor: \"#4CAF50\",\n            border: \"none\",\n            color: \"white\",\n            padding: \"15px 32px\",\n            textAlign: \"center\",\n            textDecoration: \"none\",\n            display: \"inlineBlock\",\n            fontSize: \"16px\"\n          },\n          value: \"Gestion des \\xE9tudiants\",\n          onClick: function onClick() {\n            return window.location.href = '/admin/manage-students';\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        })), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }), React.createElement(\"form\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"button\",\n          style: {\n            backgroundColor: \"#4CAF50\",\n            border: \"none\",\n            color: \"white\",\n            padding: \"15px 32px\",\n            textAlign: \"center\",\n            textDecoration: \"none\",\n            display: \"inlineBlock\",\n            fontSize: \"16px\"\n          },\n          value: \"R\\xE9sultats\",\n          onClick: function onClick() {\n            return window.location.href = '/admin/get-affect';\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        })), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }), React.createElement(\"form\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"button\",\n          style: {\n            backgroundColor: \"#BB3C21\",\n            border: \"none\",\n            color: \"white\",\n            padding: \"15px 32px\",\n            textAlign: \"center\",\n            textDecoration: \"none\",\n            display: \"inlineBlock\",\n            fontSize: \"16px\"\n          },\n          value: \"Se d\\xE9connecter\",\n          onClick: function onClick() {\n            return _this3.logout();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }))));\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, \"En cours d'authentification\");\n      }\n    }\n  }]);\n\n  return AdminPage;\n}(Component);\n\nexport default AdminPage;","map":{"version":3,"sources":["/home/jeffrey/Bureau/cours/projet_de_département/language-allocation/front/src/Admin.js"],"names":["React","Component","Redirect","axios","url","defaults","withCredentials","AdminPage","props","getAuth","get","Authorization","state","token","then","res","isAuth","err","console","log","logout","delete","data","msg","history","push","window","sessionStorage","getItem","headers","setState","textAlign","position","left","top","transform","backgroundColor","border","color","padding","textDecoration","display","fontSize","location","href"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { Redirect } from 'react-router-dom'\nimport axios from 'axios';\nimport \"./Admin.css\"\nimport url from \"./url\";\n\naxios.defaults.withCredentials = true\nclass AdminPage extends Component {\n  constructor(props) {\n      super(props);\n      this.state = {token:window.sessionStorage.getItem(\"jwt_token\"), isAuth:null};\n\n    }\n\n\n  componentDidMount(){\n    axios.get(url+'admin/check-auth', {withCredentials:true, headers:{Authorization: 'Bearer '+this.state.token}}).then(\n      (res)=>{\n        this.setState({isAuth:true});\n        console.log(\"Successfully authentified\")\n    },\n      (err)=>{\n        console.log(\"in the error loop\")\n        this.setState({isAuth:false});\n        this.props.history.push('/admin/login')\n      }\n    )\n  }\n\n  getAuth=()=>{\n    axios.get(url+'admin/check-auth', {withCredentials:false, Authorization: 'Bearer '+this.state.token}).then(\n      (res)=>{\n        this.state.isAuth=true;\n        return true;\n    },\n      (err)=>{\n        console.log(err);\n        this.state.isAuth=false;\n        return false;\n      }\n    )\n  }\n\n  logout=()=>{\n    axios.delete(url+'admin/logout', {withCredentials:true, Authorization: 'Bearer '+this.state.token}).then(\n      (res)=>{\n        console.log(res.data.msg)\n        this.state.isAuth=false;\n        this.props.history.push('/admin/login');\n    },\n      (err)=>{\n        console.log(err);\n        this.state.isAuth=false;\n        this.props.history.push('/admin/login');\n      }\n    )\n  }\n\n\n  render() {\n      if (this.state.isAuth){\n        return (\n          <div>\n\n        <div className=\"buttonList\" style={{textAlign:'center',\n      position: 'absolute', left: '50%', top: '40%',\n      transform: 'translate(-50%, -50%)'\n\n    }}><h2>Bienvenue sur le portail de gestion du questionnaire de langues de la DLC<br/><br/></h2>\n        <form>\n        <input type=\"button\" style={{  backgroundColor: \"#4CAF50\",border: \"none\",color: \"white\",padding: \"15px 32px\",textAlign: \"center\",textDecoration: \"none\",display: \"inlineBlock\",fontSize: \"16px\"}} value=\"Gestion des Cours\" onClick={()=>window.location.href='/admin/manage-courses'} />\n        </form>\n        <br/>\n        <form>\n        <input type=\"button\" style={{  backgroundColor: \"#4CAF50\",border: \"none\",color: \"white\",padding: \"15px 32px\",textAlign: \"center\",textDecoration: \"none\",display: \"inlineBlock\",fontSize: \"16px\"}} value=\"Gestion des étudiants\" onClick={()=>window.location.href='/admin/manage-students'} />\n        </form>\n        <br/>\n        <form>\n        <input type=\"button\" style={{  backgroundColor: \"#4CAF50\",border: \"none\",color: \"white\",padding: \"15px 32px\",textAlign: \"center\",textDecoration: \"none\",display: \"inlineBlock\",fontSize: \"16px\"}} value=\"Résultats\" onClick={()=>window.location.href='/admin/get-affect'} />\n        </form>\n        <br/>\n        <form>\n        <input type=\"button\" style={{  backgroundColor: \"#BB3C21\",border: \"none\",color: \"white\",padding: \"15px 32px\",textAlign: \"center\",textDecoration: \"none\",display: \"inlineBlock\",fontSize: \"16px\"}} value=\"Se déconnecter\" onClick={()=>this.logout()} />\n        </form>\n        </div>\n        </div>\n\n      )\n    }\n    else{\n      return(<div>En cours d'authentification</div>)\n    }\n\n  }\n}\n\nexport default AdminPage;\n"]},"metadata":{},"sourceType":"module"}