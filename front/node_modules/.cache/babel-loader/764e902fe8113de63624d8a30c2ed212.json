{"ast":null,"code":"import _classCallCheck from \"/home/luca/Documents/ENPC-2A/Projet-departement/front/language-allocation/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/luca/Documents/ENPC-2A/Projet-departement/front/language-allocation/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/luca/Documents/ENPC-2A/Projet-departement/front/language-allocation/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/luca/Documents/ENPC-2A/Projet-departement/front/language-allocation/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/luca/Documents/ENPC-2A/Projet-departement/front/language-allocation/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/luca/Documents/ENPC-2A/Projet-departement/front/language-allocation/src/Components.js\";\nimport React, { Component } from 'react';\nimport data from \"./DummyData\";\nimport './Components.css';\nimport error_panel from './images/error_panel.png';\n\nvar MainContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MainContainer, _Component);\n\n  function MainContainer(props) {\n    var _this;\n\n    _classCallCheck(this, MainContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MainContainer).call(this, props));\n\n    _this.handlePageChange = function (page_name) {\n      var new_state = _this.state;\n      new_state.page = page_name;\n\n      _this.setState(new_state);\n    };\n\n    _this.state = {\n      page: \"questionnaire\"\n    };\n    return _this;\n  }\n\n  _createClass(MainContainer, [{\n    key: \"render\",\n    value: function render() {\n      var page = null;\n\n      if (this.state.page === \"questionnaire\") {\n        page = React.createElement(Questionnaire, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 20\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"main-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }, page);\n    }\n  }]);\n\n  return MainContainer;\n}(Component);\n\nvar LoginPage =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(LoginPage, _Component2);\n\n  function LoginPage() {\n    _classCallCheck(this, LoginPage);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LoginPage).apply(this, arguments));\n  }\n\n  _createClass(LoginPage, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, \"nothing for the moment\");\n    }\n  }]);\n\n  return LoginPage;\n}(Component);\n\nvar Questionnaire =\n/*#__PURE__*/\nfunction (_Component3) {\n  _inherits(Questionnaire, _Component3);\n\n  function Questionnaire(props) {\n    var _this2;\n\n    _classCallCheck(this, Questionnaire);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(Questionnaire).call(this, props));\n\n    _this2.buildStepList = function (answers) {\n      var step_list = [\"initial_questions\"];\n\n      if (answers.number_english_courses > 0) {\n        step_list.push(\"ranking_english_courses\");\n      }\n\n      if (answers.number_other_courses > 0) {\n        step_list.push(\"ranking_other_courses\");\n      }\n\n      return step_list;\n    };\n\n    _this2.getStepIndex = function () {\n      return _this2.state.step_index;\n    };\n\n    _this2.handleStepChange = function (direction) {\n      if (direction === \"previous\" && _this2.state.step_index > 0) {\n        _this2.setState({\n          step_index: _this2.state.step_index - 1\n        });\n      } else if (direction === \"next\" && _this2.state.step_index < _this2.state.step_list.length - 1) {\n        _this2.setState({\n          step_index: _this2.state.step_index + 1\n        });\n      }\n    };\n\n    _this2.getStepList = function () {\n      return _this2.state.step_list;\n    };\n\n    _this2.setStepList = function (new_step_list) {\n      _this2.setState({\n        step_list: new_step_list\n      });\n    };\n\n    _this2.getAnswers = function () {\n      return _this2.state.answers;\n    };\n\n    _this2.setAnswers = function (new_answers) {\n      var new_step_list = _this2.buildStepList(new_answers);\n\n      _this2.setState({\n        answers: new_answers,\n        step_list: new_step_list\n      });\n    };\n\n    _this2.state = {\n      step_list: [\"initial_questions\"],\n      step_index: 0,\n      answers: {\n        year: '',\n        TOEIC: '',\n        justification_no_english: '',\n        justification_no_english_text: '',\n        number_english_courses: 1,\n        number_other_courses: 0,\n        english_courses_ranking: [],\n        other_courses_ranking: []\n      }\n    };\n    return _this2;\n  }\n\n  _createClass(Questionnaire, [{\n    key: \"render\",\n    value: function render() {\n      var step = null;\n      var current_step_name = this.state.step_list[this.state.step_index];\n\n      if (current_step_name === \"initial_questions\") {\n        step = React.createElement(InitialQuestions, {\n          getStepIndex: this.getStepIndex,\n          handleStepChange: this.handleStepChange,\n          getStepList: this.getStepList,\n          setStepList: this.setStepList,\n          getAnswers: this.getAnswers,\n          setAnswers: this.setAnswers,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        });\n      } else if (current_step_name === \"ranking_english_courses\") {\n        var list_english_courses = data.courses.filter(function (value, index, arr) {\n          return value.language === \"Anglais\";\n        });\n        step = React.createElement(CourseRankingQuestion, {\n          instructions: \"Veuillez ordonner les cours d'Anglais par ordre de pr\\xE9f\\xE9rence\",\n          courses: list_english_courses,\n          key: \"english_courses_ranking\",\n          answer: \"english_courses_ranking\",\n          getStepIndex: this.getStepIndex,\n          handleStepChange: this.handleStepChange,\n          getStepList: this.getStepList,\n          setStepList: this.setStepList,\n          getAnswers: this.getAnswers,\n          setAnswers: this.setAnswers,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        });\n      } else if (current_step_name === \"ranking_other_courses\") {\n        var list_other_courses = data.courses.filter(function (value, index, arr) {\n          return value.language != \"Anglais\";\n        });\n        console.log(list_other_courses);\n        step = React.createElement(CourseRankingQuestion, {\n          instructions: \"Veuillez ordonner les autres cours par ordre de pr\\xE9f\\xE9rence\",\n          courses: list_other_courses,\n          key: \"other_courses_ranking\",\n          answer: \"other_courses_ranking\",\n          getStepIndex: this.getStepIndex,\n          handleStepChange: this.handleStepChange,\n          getStepList: this.getStepList,\n          setStepList: this.setStepList,\n          getAnswers: this.getAnswers,\n          setAnswers: this.setAnswers,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"questionnaire\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, step);\n    }\n  }]);\n\n  return Questionnaire;\n}(Component);\n\nvar InitialQuestions =\n/*#__PURE__*/\nfunction (_Component4) {\n  _inherits(InitialQuestions, _Component4);\n\n  function InitialQuestions(props) {\n    var _this3;\n\n    _classCallCheck(this, InitialQuestions);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(InitialQuestions).call(this, props));\n\n    _this3.handleInputChange = function (event) {\n      var target = event.target;\n      var value = target.type === 'number' ? Math.max(target.value, 0) : target.type === 'text' ? target.value.substring(0, 200) : target.value;\n      var name = target.name;\n\n      var new_answers = _this3.props.getAnswers();\n\n      new_answers[name] = value;\n\n      _this3.props.setAnswers(new_answers);\n    };\n\n    _this3.verificationFunction = function () {\n      var answers = _this3.props.getAnswers();\n\n      var all_questions_answered_properly = answers.year != '' && answers.TOEIC != '' && !(answers.number_english_courses === 0 && answers.justification_no_english === '') && !(answers.number_english_courses === 0 && answers.justification_no_english === 'Autre' && answers.justification_no_english_text === '');\n\n      _this3.setState({\n        error_message: []\n      });\n\n      if (!all_questions_answered_properly) {\n        var current_error_messages = _this3.state.error_messages;\n        current_error_messages.push(React.createElement(ErrorMessage, {\n          text: \"Veuillez r\\xE9pondre \\xE0 toutes les questions de cette page.\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }));\n\n        _this3.setState({\n          error_messages: current_error_messages\n        });\n      } //ajouter d'autres erreurs éventuelles\n\n\n      return all_questions_answered_properly;\n    };\n\n    _this3.state = {\n      error_messages: []\n    };\n    return _this3;\n  }\n\n  _createClass(InitialQuestions, [{\n    key: \"render\",\n    value: function render() {\n      var additionnal_question_about_english_courses = [];\n\n      if (this.props.getAnswers().number_english_courses < 1) {\n        additionnal_question_about_english_courses.push([React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, \"Veuillez justifier l'absence de cours d'anglais dans vos choix.\"), React.createElement(\"select\", {\n          name: \"justification_no_english\",\n          type: \"select\",\n          value: this.props.getAnswers().justification_no_english,\n          onChange: this.handleInputChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, React.createElement(\"option\", {\n          value: \"Je dois me concentrer sur ma LV2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, \"Je dois me concentrer sur ma LV2\"), React.createElement(\"option\", {\n          value: \"J'ai d\\xE9j\\xE0 valid\\xE9 tous les ECTS n\\xE9cessaires en Anglais\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, \"J'ai d\\xE9j\\xE0 valid\\xE9 tous les ECTS n\\xE9cessaires en Anglais\"), React.createElement(\"option\", {\n          value: \"Je ne suis pas aux Ponts ce semestre\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, \"Je ne suis pas aux Ponts ce semestre\"), React.createElement(\"option\", {\n          value: \"Autre\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, \"Autre\")), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        })]);\n      }\n\n      if (this.props.getAnswers().justification_no_english === \"Autre\") {\n        additionnal_question_about_english_courses.push([React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }, \"Veuillez pr\\xE9ciser cette autre raison.\"), React.createElement(\"input\", {\n          name: \"justification_no_english_text\",\n          type: \"text\",\n          value: this.props.getAnswers().justification_no_english_text,\n          onChange: this.handleInputChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        })]);\n      }\n\n      var instructions = \"Veuillez répondre aux questions suivantes. Il vous sera demandé de classer les cours par ordre de préférence dans la suite du questionnaire.\";\n\n      if (this.state.error_messages.length > 0) {\n        instructions = this.state.error_messages;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(QuestionInstructions, {\n        text: instructions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"question-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"initial-questions-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"En quelle ann\\xE9e \\xEAtes-vous ? \"), React.createElement(\"select\", {\n        name: \"year\",\n        type: \"select\",\n        value: this.props.getAnswers().year,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        selected: true,\n        disabled: true,\n        hidden: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"Choisir\"), React.createElement(\"option\", {\n        value: \"1A\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"1A\"), React.createElement(\"option\", {\n        value: \"2/3A\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"2/3A\"), React.createElement(\"option\", {\n        value: \"Cycle Master\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"Cycle Master\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Quelle note avez-vous obtenue au TOEIC ? \"), React.createElement(\"select\", {\n        name: \"TOEIC\",\n        type: \"select\",\n        value: this.props.getAnswers().TOEIC,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        selected: true,\n        disabled: true,\n        hidden: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \"Choisir\"), React.createElement(\"option\", {\n        value: \"moins de 650\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"moins de 650\"), React.createElement(\"option\", {\n        value: \"entre 650 et 785\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"entre 650 et 785\"), React.createElement(\"option\", {\n        value: \"plus de 785\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"plus de 785\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, \"Combien de cours d'Anglais souhaitez-vous suivre ? (Attention, une justification sera demand\\xE9e si vous ne souhaitez pas en suivre)\"), React.createElement(\"input\", {\n        name: \"number_english_courses\",\n        type: \"number\",\n        value: this.props.getAnswers().number_english_courses,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }), additionnal_question_about_english_courses, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"Combien de cours de langues diff\\xE9rentes de l'anglais souhaitez-vous suivre ? (une langue au niveau d\\xE9butant compte pour deux)\"), React.createElement(\"input\", {\n        name: \"number_other_courses\",\n        type: \"number\",\n        value: this.props.getAnswers().number_other_courses,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }))), React.createElement(QuestionFooter, {\n        handleStepChange: this.props.handleStepChange,\n        getStepList: this.props.getStepList,\n        getStepIndex: this.props.getStepIndex,\n        verificationFunction: this.verificationFunction,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return InitialQuestions;\n}(Component);\n\nvar CourseRankingQuestion =\n/*#__PURE__*/\nfunction (_Component5) {\n  _inherits(CourseRankingQuestion, _Component5);\n\n  function CourseRankingQuestion() {\n    var _getPrototypeOf2;\n\n    var _this4;\n\n    _classCallCheck(this, CourseRankingQuestion);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this4 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CourseRankingQuestion)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this4.setRanking = function (new_ranking) {\n      var new_answers = _this4.props.getAnswers();\n\n      new_answers[_this4.props.answer] = new_ranking;\n\n      _this4.props.setAnswers(new_answers);\n    };\n\n    _this4.getRanking = function () {\n      return _this4.props.getAnswers()[_this4.props.answer];\n    };\n\n    _this4.handleAddCourseToRanking = function (course) {\n      if (!_this4.getRanking().includes(course)) {\n        var new_ranking = _this4.getRanking();\n\n        new_ranking.push(course);\n\n        _this4.setRanking(new_ranking);\n      }\n    };\n\n    _this4.handleRankUp = function (index_in_ranking) {\n      //fait gagner une place dans le classement\n      if (index_in_ranking > 0) {\n        var new_ranking = _this4.getRanking();\n\n        var course_to_move = _this4.getRanking()[index_in_ranking]; //swap\n\n\n        new_ranking[index_in_ranking] = new_ranking[index_in_ranking - 1];\n        new_ranking[index_in_ranking - 1] = course_to_move;\n\n        _this4.setRanking(new_ranking);\n      }\n    };\n\n    _this4.handleRankDown = function (index_in_ranking) {\n      //fait perdre une place dans le classement\n      if (index_in_ranking < _this4.getRanking().length - 1) {\n        var new_ranking = _this4.getRanking();\n\n        var course_to_move = _this4.getRanking()[index_in_ranking]; //swap\n\n\n        new_ranking[index_in_ranking] = new_ranking[index_in_ranking + 1];\n        new_ranking[index_in_ranking + 1] = course_to_move;\n\n        _this4.setRanking(new_ranking);\n      }\n    };\n\n    _this4.handleDeletionFromRanking = function (index_in_ranking) {\n      var new_ranking = _this4.getRanking();\n\n      new_ranking.splice(index_in_ranking, 1);\n\n      _this4.setRanking(new_ranking);\n    };\n\n    return _this4;\n  }\n\n  _createClass(CourseRankingQuestion, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(QuestionInstructions, {\n        text: this.props.instructions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"question-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, React.createElement(CourseList, {\n        courses: this.props.courses,\n        handleAddCourseToRanking: this.handleAddCourseToRanking,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }), React.createElement(CourseRanking, {\n        ranking: this.getRanking(),\n        handleRankUp: this.handleRankUp,\n        handleRankDown: this.handleRankDown,\n        handleDeletionFromRanking: this.handleDeletionFromRanking,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      })), React.createElement(QuestionFooter, {\n        handleStepChange: this.props.handleStepChange,\n        getStepList: this.props.getStepList,\n        getStepIndex: this.props.getStepIndex,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CourseRankingQuestion;\n}(Component);\n\nvar CourseRanking =\n/*#__PURE__*/\nfunction (_Component6) {\n  _inherits(CourseRanking, _Component6);\n\n  function CourseRanking() {\n    _classCallCheck(this, CourseRanking);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseRanking).apply(this, arguments));\n  }\n\n  _createClass(CourseRanking, [{\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var ranking_display = [];\n\n      var _loop = function _loop(index) {\n        ranking_display.push(React.createElement(CourseBox, {\n          key: index,\n          course: _this5.props.ranking[index],\n          buttons: [React.createElement(Button, {\n            text: \"monter\",\n            onClick: function onClick() {\n              return _this5.props.handleRankUp(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 311\n            },\n            __self: this\n          }), React.createElement(Button, {\n            text: \"descendre\",\n            onClick: function onClick() {\n              return _this5.props.handleRankDown(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 312\n            },\n            __self: this\n          }), React.createElement(Button, {\n            text: \"supprimer\",\n            onClick: function onClick() {\n              return _this5.props.handleDeletionFromRanking(index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 313\n            },\n            __self: this\n          })],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 310\n          },\n          __self: this\n        }));\n      };\n\n      for (var index = 0; index < this.props.ranking.length; index++) {\n        _loop(index);\n      }\n\n      return React.createElement(\"div\", {\n        className: \"course-ranking\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"course-ranking-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, \"Mon classement\"), React.createElement(CourseBoxList, {\n        content: ranking_display,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CourseRanking;\n}(Component);\n\nvar CourseList =\n/*#__PURE__*/\nfunction (_Component7) {\n  _inherits(CourseList, _Component7);\n\n  function CourseList(props) {\n    var _this6;\n\n    _classCallCheck(this, CourseList);\n\n    _this6 = _possibleConstructorReturn(this, _getPrototypeOf(CourseList).call(this, props));\n\n    _this6.getCurrentFilters = function () {\n      return _this6.state.current_filters;\n    };\n\n    _this6.handleFilterChange = function (event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n      var new_filters = _this6.state.current_filters;\n      new_filters[name] = value;\n\n      _this6.props.setState({\n        current_filters: new_filters\n      });\n    };\n\n    _this6.buildCriteriaWithOptions = function () {\n      var list_languages = [];\n      var list_schedules = [];\n      var list_levels = [];\n\n      for (var index = 0; index < _this6.props.courses.length; index++) {\n        var current_course = _this6.props.courses[index];\n\n        if (!list_languages.includes(current_course.language)) {\n          list_languages.push(current_course.language);\n        }\n\n        ;\n\n        if (!list_levels.includes(current_course.level)) {\n          list_levels.push(current_course.level);\n        }\n\n        ;\n\n        for (var index_schedule = 0; index_schedule < current_course.schedules.length; index_schedule++) {\n          var schedule = current_course.schedules[index_schedule];\n\n          if (!list_schedules.includes(schedule)) {\n            list_schedules.push(schedule);\n          }\n\n          ;\n        }\n      }\n\n      var criteria_with_options = {};\n\n      if (list_languages.length > 1) {\n        criteria_with_options.language = [list_languages];\n      }\n\n      if (list_schedules.length > 1) {\n        criteria_with_options.schedule = [list_schedules];\n      }\n\n      if (list_levels.length > 1) {\n        criteria_with_options.level = [list_levels];\n      }\n\n      console.log(criteria_with_options);\n      return criteria_with_options;\n    };\n\n    _this6.buildListCoursesToDisplay = function () {\n      var list_courses_to_display = _this6.props.courses;\n\n      if (_this6.state.current_filters.language != \"\") {\n        list_courses_to_display.filter(function (value, index, arr) {\n          return value.language === this.state.current_filters.language;\n        });\n      }\n\n      if (_this6.state.current_filters.schedule != \"\") {\n        list_courses_to_display.filter(function (value, index, arr) {\n          return value.schedules.includes(this.state.current_filters.schedule);\n        });\n      }\n\n      if (_this6.state.current_filters.level != \"\") {\n        list_courses_to_display.filter(function (value, index, arr) {\n          return value.level === this.state.current_filters.level;\n        });\n      }\n\n      console.log(list_courses_to_display);\n      return list_courses_to_display;\n    };\n\n    _this6.state = {\n      current_filters: {\n        language: \"\",\n        schedule: \"\",\n        level: \"\"\n      },\n      criteria_with_options: _this6.buildCriteriaWithOptions()\n    }; //pas de filtrage par défaut\n\n    return _this6;\n  }\n\n  _createClass(CourseList, [{\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      var list_display = [];\n      var list_courses_to_display = this.buildListCoursesToDisplay();\n\n      var _loop2 = function _loop2(index) {\n        list_display.push(React.createElement(CourseBox, {\n          key: index,\n          course: list_courses_to_display[index],\n          buttons: [React.createElement(Button, {\n            text: \"ajouter au classement\",\n            onClick: function onClick() {\n              return _this7.props.handleAddCourseToRanking(list_courses_to_display[index]);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 390\n            },\n            __self: this\n          })],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 389\n          },\n          __self: this\n        }));\n      };\n\n      for (var index = 0; index < list_courses_to_display.length; index++) {\n        _loop2(index);\n      }\n\n      return React.createElement(\"div\", {\n        className: \"course-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"course-list-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }, \"Liste des cours\"), React.createElement(CourseListFilter, {\n        criteriaWithOptions: this.state.criteria_with_options,\n        getCurrentFilters: this.getCurrentFilters,\n        handleFilterChange: this.props.handleFilterChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      }), React.createElement(CourseBoxList, {\n        content: list_display,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CourseList;\n}(Component);\n\nvar CourseListFilter =\n/*#__PURE__*/\nfunction (_Component8) {\n  _inherits(CourseListFilter, _Component8);\n\n  function CourseListFilter() {\n    _classCallCheck(this, CourseListFilter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseListFilter).apply(this, arguments));\n  }\n\n  _createClass(CourseListFilter, [{\n    key: \"render\",\n    value: function render() {\n      var criteria_selection = [];\n\n      for (var criterion in this.props.criteriaWithOptions) {\n        var list_options = [React.createElement(\"option\", {\n          value: \"\",\n          key: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 408\n          },\n          __self: this\n        })];\n\n        for (var index = 0; index < this.props.criteriaWithOptions[criterion].length; index++) {\n          var option_name = this.props.criteriaWithOptions[criterion][index];\n          list_options.push(React.createElement(\"option\", {\n            value: option_name,\n            key: option_name,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 411\n            },\n            __self: this\n          }, option_name));\n        }\n\n        criteria_selection.push(React.createElement(\"div\", {\n          className: \"course-list-filter-option\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 414\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 415\n          },\n          __self: this\n        }, criterion == \"language\" ? \"Langue : \" : criterion == \"schedule\" ? \"Horaire : \" : criterion == \"level\" ? \"Niveau : \" : \"erreur\"), React.createElement(\"select\", {\n          name: criterion,\n          type: \"select\",\n          value: this.props.getCurrentFilters()[criterion],\n          onChange: this.props.handleFilterChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 416\n          },\n          __self: this\n        }, list_options)));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"course-list-filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429\n        },\n        __self: this\n      }, criteria_selection);\n    }\n  }]);\n\n  return CourseListFilter;\n}(Component); //structure générale de question\n\n\nvar QuestionInstructions =\n/*#__PURE__*/\nfunction (_Component9) {\n  _inherits(QuestionInstructions, _Component9);\n\n  function QuestionInstructions() {\n    _classCallCheck(this, QuestionInstructions);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(QuestionInstructions).apply(this, arguments));\n  }\n\n  _createClass(QuestionInstructions, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"h2\", {\n        className: \"question-instructions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438\n        },\n        __self: this\n      }, \" \", this.props.text);\n    }\n  }]);\n\n  return QuestionInstructions;\n}(Component);\n\nvar QuestionFooter =\n/*#__PURE__*/\nfunction (_Component10) {\n  _inherits(QuestionFooter, _Component10);\n\n  function QuestionFooter() {\n    _classCallCheck(this, QuestionFooter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(QuestionFooter).apply(this, arguments));\n  }\n\n  _createClass(QuestionFooter, [{\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      var current_step_index = this.props.getStepIndex();\n      var step_list_length = this.props.getStepList().length;\n      var left_button = null;\n      var right_button = null;\n\n      if (current_step_index > 0) {\n        left_button = React.createElement(ChangeStepButton, {\n          text: \"Pr\\xE9c\\xE9dent\",\n          onClick: function onClick() {\n            return _this8.props.handleStepChange(\"previous\");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 451\n          },\n          __self: this\n        });\n      }\n\n      var nextButtonEffect = function nextButtonEffect() {\n        _this8.props.handleStepChange(\"next\");\n      };\n\n      if (this.props.verificationFunction) {\n        //s'il y a une vérification à faire, elle est faite avant de passer à la question suivante\n        nextButtonEffect = function nextButtonEffect() {\n          if (_this8.props.verificationFunction()) {\n            _this8.props.handleStepChange(\"next\");\n          }\n        };\n      }\n\n      if (current_step_index < step_list_length - 1) {\n        right_button = React.createElement(ChangeStepButton, {\n          text: \"Suivant\",\n          onClick: nextButtonEffect,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 463\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"question-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466\n        },\n        __self: this\n      }, \" \", React.createElement(\"div\", {\n        className: \"question-footer-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466\n        },\n        __self: this\n      }, \" \", left_button), React.createElement(\"div\", {\n        className: \"question-footer-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466\n        },\n        __self: this\n      }, right_button));\n    }\n  }]);\n\n  return QuestionFooter;\n}(Component); //classes utiles\n\n\nvar CourseBox =\n/*#__PURE__*/\nfunction (_Component11) {\n  _inherits(CourseBox, _Component11);\n\n  function CourseBox() {\n    _classCallCheck(this, CourseBox);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseBox).apply(this, arguments));\n  }\n\n  _createClass(CourseBox, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"course-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475\n        },\n        __self: this\n      }, \" \", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475\n        },\n        __self: this\n      }, this.props.course.name), \" \", React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475\n        },\n        __self: this\n      }, this.props.course.language), this.props.course.schedules.map(function (date) {\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 475\n          },\n          __self: this\n        }, date);\n      })), \" \", React.createElement(\"div\", {\n        className: \"course-box-buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475\n        },\n        __self: this\n      }, this.props.buttons));\n    }\n  }]);\n\n  return CourseBox;\n}(Component);\n\nvar Button =\n/*#__PURE__*/\nfunction (_Component12) {\n  _inherits(Button, _Component12);\n\n  function Button() {\n    _classCallCheck(this, Button);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Button).apply(this, arguments));\n  }\n\n  _createClass(Button, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"button\", {\n        className: \"button\",\n        onClick: this.props.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483\n        },\n        __self: this\n      }, this.props.text);\n    }\n  }]);\n\n  return Button;\n}(Component);\n\nvar ChangeStepButton =\n/*#__PURE__*/\nfunction (_Component13) {\n  _inherits(ChangeStepButton, _Component13);\n\n  function ChangeStepButton() {\n    _classCallCheck(this, ChangeStepButton);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ChangeStepButton).apply(this, arguments));\n  }\n\n  _createClass(ChangeStepButton, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"button\", {\n        className: \"change-step-button\",\n        onClick: this.props.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491\n        },\n        __self: this\n      }, this.props.text);\n    }\n  }]);\n\n  return ChangeStepButton;\n}(Component);\n\nvar ErrorMessage =\n/*#__PURE__*/\nfunction (_Component14) {\n  _inherits(ErrorMessage, _Component14);\n\n  function ErrorMessage() {\n    _classCallCheck(this, ErrorMessage);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ErrorMessage).apply(this, arguments));\n  }\n\n  _createClass(ErrorMessage, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"error-message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: error_panel,\n        alt: \"error_panel\",\n        style: {\n          height: \"5vh\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499\n        },\n        __self: this\n      }), this.props.text);\n    }\n  }]);\n\n  return ErrorMessage;\n}(Component);\n\nvar CourseBoxList =\n/*#__PURE__*/\nfunction (_Component15) {\n  _inherits(CourseBoxList, _Component15);\n\n  function CourseBoxList() {\n    _classCallCheck(this, CourseBoxList);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseBoxList).apply(this, arguments));\n  }\n\n  _createClass(CourseBoxList, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"course-box-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 507\n        },\n        __self: this\n      }, this.props.content);\n    }\n  }]);\n\n  return CourseBoxList;\n}(Component);\n\nexport default MainContainer;","map":{"version":3,"sources":["/home/luca/Documents/ENPC-2A/Projet-departement/front/language-allocation/src/Components.js"],"names":["React","Component","data","error_panel","MainContainer","props","handlePageChange","page_name","new_state","state","page","setState","LoginPage","Questionnaire","buildStepList","answers","step_list","number_english_courses","push","number_other_courses","getStepIndex","step_index","handleStepChange","direction","length","getStepList","setStepList","new_step_list","getAnswers","setAnswers","new_answers","year","TOEIC","justification_no_english","justification_no_english_text","english_courses_ranking","other_courses_ranking","step","current_step_name","list_english_courses","courses","filter","value","index","arr","language","list_other_courses","console","log","InitialQuestions","handleInputChange","event","target","type","Math","max","substring","name","verificationFunction","all_questions_answered_properly","error_message","current_error_messages","error_messages","additionnal_question_about_english_courses","instructions","CourseRankingQuestion","setRanking","new_ranking","answer","getRanking","handleAddCourseToRanking","course","includes","handleRankUp","index_in_ranking","course_to_move","handleRankDown","handleDeletionFromRanking","splice","CourseRanking","ranking_display","ranking","CourseList","getCurrentFilters","current_filters","handleFilterChange","new_filters","buildCriteriaWithOptions","list_languages","list_schedules","list_levels","current_course","level","index_schedule","schedules","schedule","criteria_with_options","buildListCoursesToDisplay","list_courses_to_display","list_display","CourseListFilter","criteria_selection","criterion","criteriaWithOptions","list_options","option_name","QuestionInstructions","text","QuestionFooter","current_step_index","step_list_length","left_button","right_button","nextButtonEffect","CourseBox","map","date","buttons","Button","onClick","ChangeStepButton","ErrorMessage","height","CourseBoxList","content"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAO,kBAAP;AACA,OAAOC,WAAP,MAAwB,0BAAxB;;IAEMC,a;;;;;AACF,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,uFAAMA,KAAN;;AADe,UAKnBC,gBALmB,GAKA,UAAAC,SAAS,EAAI;AAC5B,UAAIC,SAAS,GAAC,MAAKC,KAAnB;AACAD,MAAAA,SAAS,CAACE,IAAV,GAAeH,SAAf;;AACA,YAAKI,QAAL,CAAcH,SAAd;AACH,KATkB;;AAEf,UAAKC,KAAL,GAAa;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAb;AAFe;AAGhB;;;;6BAOI;AACL,UAAIA,IAAI,GAAC,IAAT;;AACA,UAAG,KAAKD,KAAL,CAAWC,IAAX,KAAkB,eAArB,EAAqC;AACjCA,QAAAA,IAAI,GAAC,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAL;AACH;;AACH,aACE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAiCA,IAAjC,CADF;AAGD;;;;EAnByBT,S;;IAsBtBW,S;;;;;;;;;;;;;6BACK;AACP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF;AAGD;;;;EALqBX,S;;IAQlBY,a;;;;;AACF,yBAAYR,KAAZ,EAAmB;AAAA;;AAAA;;AACf,wFAAMA,KAAN;;AADe,WAInBS,aAJmB,GAIL,UAACC,OAAD,EAAW;AACvB,UAAIC,SAAS,GAAC,CAAC,mBAAD,CAAd;;AACA,UAAGD,OAAO,CAACE,sBAAR,GAA+B,CAAlC,EAAoC;AAClCD,QAAAA,SAAS,CAACE,IAAV,CAAe,yBAAf;AACD;;AACD,UAAGH,OAAO,CAACI,oBAAR,GAA6B,CAAhC,EAAkC;AAChCH,QAAAA,SAAS,CAACE,IAAV,CAAe,uBAAf;AACD;;AACD,aAAOF,SAAP;AACD,KAbkB;;AAAA,WAenBI,YAfmB,GAeN,YAAI;AAAC,aAAO,OAAKX,KAAL,CAAWY,UAAlB;AAA8B,KAf7B;;AAAA,WAiBnBC,gBAjBmB,GAiBA,UAACC,SAAD,EAAe;AAChC,UAAGA,SAAS,KAAG,UAAZ,IAAwB,OAAKd,KAAL,CAAWY,UAAX,GAAsB,CAAjD,EAAmD;AACjD,eAAKV,QAAL,CAAc;AAACU,UAAAA,UAAU,EAAE,OAAKZ,KAAL,CAAWY,UAAX,GAAsB;AAAnC,SAAd;AACD,OAFD,MAEO,IAAGE,SAAS,KAAG,MAAZ,IAAoB,OAAKd,KAAL,CAAWY,UAAX,GAAsB,OAAKZ,KAAL,CAAWO,SAAX,CAAqBQ,MAArB,GAA4B,CAAzE,EAA2E;AAChF,eAAKb,QAAL,CAAc;AAACU,UAAAA,UAAU,EAAE,OAAKZ,KAAL,CAAWY,UAAX,GAAsB;AAAnC,SAAd;AACD;AACF,KAvBkB;;AAAA,WAyBnBI,WAzBmB,GAyBP,YAAI;AAAC,aAAO,OAAKhB,KAAL,CAAWO,SAAlB;AAA6B,KAzB3B;;AAAA,WA2BnBU,WA3BmB,GA2BP,UAACC,aAAD,EAAiB;AAAC,aAAKhB,QAAL,CAAc;AAACK,QAAAA,SAAS,EAAEW;AAAZ,OAAd;AAA2C,KA3BtD;;AAAA,WA6BnBC,UA7BmB,GA6BR,YAAI;AAAE,aAAO,OAAKnB,KAAL,CAAWM,OAAlB;AAA2B,KA7BzB;;AAAA,WA+BnBc,UA/BmB,GA+BR,UAACC,WAAD,EAAe;AACxB,UAAIH,aAAa,GAAC,OAAKb,aAAL,CAAmBgB,WAAnB,CAAlB;;AACA,aAAKnB,QAAL,CAAc;AAACI,QAAAA,OAAO,EAAEe,WAAV;AAAuBd,QAAAA,SAAS,EAAEW;AAAlC,OAAd;AACD,KAlCkB;;AAEf,WAAKlB,KAAL,GAAa;AAACO,MAAAA,SAAS,EAAE,CAAC,mBAAD,CAAZ;AAAmCK,MAAAA,UAAU,EAAE,CAA/C;AAAkDN,MAAAA,OAAO,EAAE;AAAEgB,QAAAA,IAAI,EAAE,EAAR;AAAYC,QAAAA,KAAK,EAAE,EAAnB;AAAuBC,QAAAA,wBAAwB,EAAE,EAAjD;AAAqDC,QAAAA,6BAA6B,EAAE,EAApF;AAAwFjB,QAAAA,sBAAsB,EAAE,CAAhH;AAAmHE,QAAAA,oBAAoB,EAAE,CAAzI;AAA4IgB,QAAAA,uBAAuB,EAAC,EAApK;AAAwKC,QAAAA,qBAAqB,EAAC;AAA9L;AAA3D,KAAb;AAFe;AAGhB;;;;6BAiCM;AACL,UAAIC,IAAI,GAAC,IAAT;AACA,UAAIC,iBAAiB,GAAC,KAAK7B,KAAL,CAAWO,SAAX,CAAqB,KAAKP,KAAL,CAAWY,UAAhC,CAAtB;;AACA,UAAGiB,iBAAiB,KAAG,mBAAvB,EAA2C;AACzCD,QAAAA,IAAI,GAAC,oBAAC,gBAAD;AACL,UAAA,YAAY,EAAE,KAAKjB,YADd;AAEL,UAAA,gBAAgB,EAAE,KAAKE,gBAFlB;AAGL,UAAA,WAAW,EAAE,KAAKG,WAHb;AAIL,UAAA,WAAW,EAAE,KAAKC,WAJb;AAKL,UAAA,UAAU,EAAE,KAAKE,UALZ;AAML,UAAA,UAAU,EAAE,KAAKC,UANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAL;AAQD,OATD,MASM,IAAGS,iBAAiB,KAAG,yBAAvB,EAAiD;AACrD,YAAIC,oBAAoB,GAACrC,IAAI,CAACsC,OAAL,CAAaC,MAAb,CAAoB,UAASC,KAAT,EAAgBC,KAAhB,EAAuBC,GAAvB,EAA2B;AAAC,iBAAOF,KAAK,CAACG,QAAN,KAAiB,SAAxB;AAAmC,SAAnF,CAAzB;AACAR,QAAAA,IAAI,GAAC,oBAAC,qBAAD;AACL,UAAA,YAAY,EAAC,qEADR;AAEL,UAAA,OAAO,EAAEE,oBAFJ;AAGL,UAAA,GAAG,EAAC,yBAHC;AAIL,UAAA,MAAM,EAAC,yBAJF;AAKL,UAAA,YAAY,EAAE,KAAKnB,YALd;AAML,UAAA,gBAAgB,EAAE,KAAKE,gBANlB;AAOL,UAAA,WAAW,EAAE,KAAKG,WAPb;AAQL,UAAA,WAAW,EAAE,KAAKC,WARb;AASL,UAAA,UAAU,EAAE,KAAKE,UATZ;AAUL,UAAA,UAAU,EAAE,KAAKC,UAVZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAL;AAYD,OAdK,MAcA,IAAGS,iBAAiB,KAAG,uBAAvB,EAA+C;AACnD,YAAIQ,kBAAkB,GAAC5C,IAAI,CAACsC,OAAL,CAAaC,MAAb,CAAoB,UAASC,KAAT,EAAgBC,KAAhB,EAAuBC,GAAvB,EAA2B;AAAC,iBAAOF,KAAK,CAACG,QAAN,IAAgB,SAAvB;AAAkC,SAAlF,CAAvB;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAYF,kBAAZ;AACAT,QAAAA,IAAI,GAAC,oBAAC,qBAAD;AACL,UAAA,YAAY,EAAC,kEADR;AAEL,UAAA,OAAO,EAAES,kBAFJ;AAGL,UAAA,GAAG,EAAC,uBAHC;AAIL,UAAA,MAAM,EAAC,uBAJF;AAKL,UAAA,YAAY,EAAE,KAAK1B,YALd;AAML,UAAA,gBAAgB,EAAE,KAAKE,gBANlB;AAOL,UAAA,WAAW,EAAE,KAAKG,WAPb;AAQL,UAAA,WAAW,EAAE,KAAKC,WARb;AASL,UAAA,UAAU,EAAE,KAAKE,UATZ;AAUL,UAAA,UAAU,EAAE,KAAKC,UAVZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAL;AAYD;;AACH,aACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgCQ,IAAhC,CADF;AAGD;;;;EAlFuBpC,S;;IAqFtBgD,gB;;;;;AAEJ,4BAAY5C,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,2FAAMA,KAAN;;AADiB,WAKnB6C,iBALmB,GAKA,UAACC,KAAD,EAAW;AAC5B,UAAMC,MAAM,GAAGD,KAAK,CAACC,MAArB;AACA,UAAMV,KAAK,GAAGU,MAAM,CAACC,IAAP,KAAgB,QAAhB,GAA2BC,IAAI,CAACC,GAAL,CAASH,MAAM,CAACV,KAAhB,EAAuB,CAAvB,CAA3B,GAAwDU,MAAM,CAACC,IAAP,KAAc,MAAd,GAAuBD,MAAM,CAACV,KAAP,CAAac,SAAb,CAAuB,CAAvB,EAAyB,GAAzB,CAAvB,GAAuDJ,MAAM,CAACV,KAApI;AACA,UAAMe,IAAI,GAAGL,MAAM,CAACK,IAApB;;AAEA,UAAI3B,WAAW,GAAE,OAAKzB,KAAL,CAAWuB,UAAX,EAAjB;;AACAE,MAAAA,WAAW,CAAC2B,IAAD,CAAX,GAAkBf,KAAlB;;AACA,aAAKrC,KAAL,CAAWwB,UAAX,CAAsBC,WAAtB;AACD,KAbkB;;AAAA,WAenB4B,oBAfmB,GAeG,YAAI;AACxB,UAAI3C,OAAO,GAAC,OAAKV,KAAL,CAAWuB,UAAX,EAAZ;;AACA,UAAI+B,+BAA+B,GAAE5C,OAAO,CAACgB,IAAR,IAAc,EAAf,IAAqBhB,OAAO,CAACiB,KAAR,IAAe,EAApC,IAAyC,EAAGjB,OAAO,CAACE,sBAAR,KAAiC,CAAlC,IAAuCF,OAAO,CAACkB,wBAAR,KAAmC,EAA5E,CAAzC,IAA2H,EAAGlB,OAAO,CAACE,sBAAR,KAAiC,CAAlC,IAAuCF,OAAO,CAACkB,wBAAR,KAAmC,OAA1E,IAAqFlB,OAAO,CAACmB,6BAAR,KAAwC,EAA/H,CAA/J;;AACA,aAAKvB,QAAL,CAAc;AAACiD,QAAAA,aAAa,EAAE;AAAhB,OAAd;;AACA,UAAG,CAACD,+BAAJ,EAAoC;AAClC,YAAIE,sBAAsB,GAAC,OAAKpD,KAAL,CAAWqD,cAAtC;AACAD,QAAAA,sBAAsB,CAAC3C,IAAvB,CAA4B,oBAAC,YAAD;AAAc,UAAA,IAAI,EAAC,+DAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAA5B;;AACA,eAAKP,QAAL,CAAc;AAACmD,UAAAA,cAAc,EAAED;AAAjB,SAAd;AACD,OARuB,CASxB;;;AACA,aAAOF,+BAAP;AACD,KA1BkB;;AAEjB,WAAKlD,KAAL,GAAa;AAACqD,MAAAA,cAAc,EAAE;AAAjB,KAAb;AAFiB;AAGlB;;;;6BAyBQ;AACP,UAAIC,0CAA0C,GAAC,EAA/C;;AACA,UAAG,KAAK1D,KAAL,CAAWuB,UAAX,GAAwBX,sBAAxB,GAA+C,CAAlD,EACA;AACE8C,QAAAA,0CAA0C,CAAC7C,IAA3C,CACE,CACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6EADA,EAEA;AACE,UAAA,IAAI,EAAC,0BADP;AAEE,UAAA,IAAI,EAAC,QAFP;AAGE,UAAA,KAAK,EAAE,KAAKb,KAAL,CAAWuB,UAAX,GAAwBK,wBAHjC;AAIE,UAAA,QAAQ,EAAE,KAAKiB,iBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAKE;AAAQ,UAAA,KAAK,EAAC,kCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CALF,EAME;AAAQ,UAAA,KAAK,EAAC,mEAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+EANF,EAOE;AAAQ,UAAA,KAAK,EAAC,sCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAPF,EAQE;AAAQ,UAAA,KAAK,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBARF,CAFA,EAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAZA,CADF;AAgBD;;AACD,UAAG,KAAK7C,KAAL,CAAWuB,UAAX,GAAwBK,wBAAxB,KAAmD,OAAtD,EACA;AACE8B,QAAAA,0CAA0C,CAAC7C,IAA3C,CACA,CACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sDADA,EAEA;AACE,UAAA,IAAI,EAAC,+BADP;AAEE,UAAA,IAAI,EAAC,MAFP;AAGE,UAAA,KAAK,EAAE,KAAKb,KAAL,CAAWuB,UAAX,GAAwBM,6BAHjC;AAIE,UAAA,QAAQ,EAAE,KAAKgB,iBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFA,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAPF,CADA;AAWD;;AACD,UAAIc,YAAY,GAAC,8IAAjB;;AACA,UAAG,KAAKvD,KAAL,CAAWqD,cAAX,CAA0BtC,MAA1B,GAAiC,CAApC,EAAsC;AACpCwC,QAAAA,YAAY,GAAC,KAAKvD,KAAL,CAAWqD,cAAxB;AACD;;AACD,aACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,oBAAD;AAAsB,QAAA,IAAI,EAAEE,YAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,EAEA;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAM,QAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CADF,EAGI;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,IAAI,EAAC,QAFP;AAGE,QAAA,KAAK,EAAE,KAAK3D,KAAL,CAAWuB,UAAX,GAAwBG,IAHjC;AAIE,QAAA,QAAQ,EAAE,KAAKmB,iBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE;AAAQ,QAAA,KAAK,EAAC,EAAd;AAAiB,QAAA,QAAQ,MAAzB;AAA0B,QAAA,QAAQ,MAAlC;AAAmC,QAAA,MAAM,MAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBALF,EAME;AAAQ,QAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANF,EAOE;AAAQ,QAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPF,EAQE;AAAQ,QAAA,KAAK,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBARF,CAHJ,EAaI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbJ,EAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAdF,EAgBI;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,IAAI,EAAC,QAFP;AAGE,QAAA,KAAK,EAAE,KAAK7C,KAAL,CAAWuB,UAAX,GAAwBI,KAHjC;AAIE,QAAA,QAAQ,EAAE,KAAKkB,iBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE;AAAQ,QAAA,KAAK,EAAC,EAAd;AAAiB,QAAA,QAAQ,MAAzB;AAA0B,QAAA,QAAQ,MAAlC;AAAmC,QAAA,MAAM,MAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBALF,EAME;AAAQ,QAAA,KAAK,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBANF,EAOE;AAAQ,QAAA,KAAK,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAPF,EAQE;AAAQ,QAAA,KAAK,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBARF,CAhBJ,EA0BI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA1BJ,EA2BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iJA3BF,EA6BI;AACE,QAAA,IAAI,EAAC,wBADP;AAEE,QAAA,IAAI,EAAC,QAFP;AAGE,QAAA,KAAK,EAAE,KAAK7C,KAAL,CAAWuB,UAAX,GAAwBX,sBAHjC;AAIE,QAAA,QAAQ,EAAE,KAAKiC,iBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA7BJ,EAkCI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAlCJ,EAmCGa,0CAnCH,EAoCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+IApCF,EAsCI;AACE,QAAA,IAAI,EAAC,sBADP;AAEE,QAAA,IAAI,EAAC,QAFP;AAGE,QAAA,KAAK,EAAE,KAAK1D,KAAL,CAAWuB,UAAX,GAAwBT,oBAHjC;AAIE,QAAA,QAAQ,EAAE,KAAK+B,iBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAtCJ,CADA,CAFA,EAgDA,oBAAC,cAAD;AAAgB,QAAA,gBAAgB,EAAE,KAAK7C,KAAL,CAAWiB,gBAA7C;AAA+D,QAAA,WAAW,EAAE,KAAKjB,KAAL,CAAWoB,WAAvF;AAAoG,QAAA,YAAY,EAAE,KAAKpB,KAAL,CAAWe,YAA7H;AAA2I,QAAA,oBAAoB,EAAE,KAAKsC,oBAAtK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAhDA,CADF;AAoDD;;;;EAzH4BzD,S;;IA4HzBgE,qB;;;;;;;;;;;;;;;;;;WAEFC,U,GAAW,UAACC,WAAD,EAAe;AACxB,UAAIrC,WAAW,GAAC,OAAKzB,KAAL,CAAWuB,UAAX,EAAhB;;AACAE,MAAAA,WAAW,CAAC,OAAKzB,KAAL,CAAW+D,MAAZ,CAAX,GAA+BD,WAA/B;;AACA,aAAK9D,KAAL,CAAWwB,UAAX,CAAsBC,WAAtB;AACD,K;;WAEDuC,U,GAAW,YAAI;AACb,aAAO,OAAKhE,KAAL,CAAWuB,UAAX,GAAwB,OAAKvB,KAAL,CAAW+D,MAAnC,CAAP;AACD,K;;WAEDE,wB,GAA2B,UAAAC,MAAM,EAAG;AAChC,UAAG,CAAE,OAAKF,UAAL,GAAkBG,QAAlB,CAA2BD,MAA3B,CAAL,EAAyC;AACrC,YAAIJ,WAAW,GAAC,OAAKE,UAAL,EAAhB;;AACAF,QAAAA,WAAW,CAACjD,IAAZ,CAAiBqD,MAAjB;;AACA,eAAKL,UAAL,CAAgBC,WAAhB;AACH;AACJ,K;;WAEDM,Y,GAAe,UAACC,gBAAD,EAAqB;AAAC;AACjC,UAAGA,gBAAgB,GAAC,CAApB,EAAsB;AAClB,YAAIP,WAAW,GAAC,OAAKE,UAAL,EAAhB;;AACA,YAAIM,cAAc,GAAC,OAAKN,UAAL,GAAkBK,gBAAlB,CAAnB,CAFkB,CAEqC;;;AACvDP,QAAAA,WAAW,CAACO,gBAAD,CAAX,GAA8BP,WAAW,CAACO,gBAAgB,GAAC,CAAlB,CAAzC;AACAP,QAAAA,WAAW,CAACO,gBAAgB,GAAC,CAAlB,CAAX,GAAgCC,cAAhC;;AACA,eAAKT,UAAL,CAAgBC,WAAhB;AACH;AACJ,K;;WAEDS,c,GAAiB,UAACF,gBAAD,EAAqB;AAAC;AACnC,UAAGA,gBAAgB,GAAC,OAAKL,UAAL,GAAkB7C,MAAlB,GAAyB,CAA7C,EAA+C;AAC7C,YAAI2C,WAAW,GAAC,OAAKE,UAAL,EAAhB;;AACA,YAAIM,cAAc,GAAC,OAAKN,UAAL,GAAkBK,gBAAlB,CAAnB,CAF6C,CAEU;;;AACvDP,QAAAA,WAAW,CAACO,gBAAD,CAAX,GAA8BP,WAAW,CAACO,gBAAgB,GAAC,CAAlB,CAAzC;AACAP,QAAAA,WAAW,CAACO,gBAAgB,GAAC,CAAlB,CAAX,GAAgCC,cAAhC;;AACA,eAAKT,UAAL,CAAgBC,WAAhB;AACH;AACF,K;;WAEDU,yB,GAA2B,UAACH,gBAAD,EAAoB;AAC3C,UAAIP,WAAW,GAAC,OAAKE,UAAL,EAAhB;;AACAF,MAAAA,WAAW,CAACW,MAAZ,CAAmBJ,gBAAnB,EAAqC,CAArC;;AACA,aAAKR,UAAL,CAAgBC,WAAhB;AACH,K;;;;;;;6BAEQ;AACP,aACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,oBAAD;AAAsB,QAAA,IAAI,EAAE,KAAK9D,KAAL,CAAW2D,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,UAAD;AAAY,QAAA,OAAO,EAAE,KAAK3D,KAAL,CAAWmC,OAAhC;AAAyC,QAAA,wBAAwB,EAAE,KAAK8B,wBAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI,oBAAC,aAAD;AAAe,QAAA,OAAO,EAAG,KAAKD,UAAL,EAAzB;AAA4C,QAAA,YAAY,EAAE,KAAKI,YAA/D;AAA6E,QAAA,cAAc,EAAE,KAAKG,cAAlG;AAAkH,QAAA,yBAAyB,EAAE,KAAKC,yBAAlJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CAFF,EAME,oBAAC,cAAD;AAAgB,QAAA,gBAAgB,EAAE,KAAKxE,KAAL,CAAWiB,gBAA7C;AAA+D,QAAA,WAAW,EAAE,KAAKjB,KAAL,CAAWoB,WAAvF;AAAoG,QAAA,YAAY,EAAE,KAAKpB,KAAL,CAAWe,YAA7H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANF,CADF;AAUD;;;;EAzD+BnB,S;;IA4D9B8E,a;;;;;;;;;;;;;6BACO;AAAA;;AACL,UAAIC,eAAe,GAAC,EAApB;;AADK,iCAEGrC,KAFH;AAGDqC,QAAAA,eAAe,CAAC9D,IAAhB,CACA,oBAAC,SAAD;AAAW,UAAA,GAAG,EAAEyB,KAAhB;AAAuB,UAAA,MAAM,EAAE,MAAI,CAACtC,KAAL,CAAW4E,OAAX,CAAmBtC,KAAnB,CAA/B;AAA0D,UAAA,OAAO,EAAE,CAC/D,oBAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAsB,YAAA,OAAO,EAAE;AAAA,qBAAI,MAAI,CAACtC,KAAL,CAAWoE,YAAX,CAAwB9B,KAAxB,CAAJ;AAAA,aAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAD+D,EAE/D,oBAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,WAAb;AAAyB,YAAA,OAAO,EAAE;AAAA,qBAAI,MAAI,CAACtC,KAAL,CAAWuE,cAAX,CAA0BjC,KAA1B,CAAJ;AAAA,aAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAF+D,EAG/D,oBAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,WAAb;AAAyB,YAAA,OAAO,EAAE;AAAA,qBAAI,MAAI,CAACtC,KAAL,CAAWwE,yBAAX,CAAqClC,KAArC,CAAJ;AAAA,aAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAH+D,CAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA;AAHC;;AAEL,WAAI,IAAIA,KAAK,GAAC,CAAd,EAAiBA,KAAK,GAAC,KAAKtC,KAAL,CAAW4E,OAAX,CAAmBzD,MAA1C,EAAkDmB,KAAK,EAAvD,EAA0D;AAAA,cAAlDA,KAAkD;AAOzD;;AACH,aACE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgC;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAhC,EAAyF,oBAAC,aAAD;AAAe,QAAA,OAAO,EAAEqC,eAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAzF,CADF;AAGD;;;;EAduB/E,S;;IAiBtBiF,U;;;;;AACJ,sBAAY7E,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,qFAAMA,KAAN;;AADiB,WAKnB8E,iBALmB,GAKD,YAAI;AACpB,aAAO,OAAK1E,KAAL,CAAW2E,eAAlB;AACD,KAPkB;;AAAA,WASnBC,kBATmB,GASA,UAAClC,KAAD,EAAW;AAC5B,UAAMC,MAAM,GAAGD,KAAK,CAACC,MAArB;AACA,UAAMV,KAAK,GAAIU,MAAM,CAACV,KAAtB;AACA,UAAMe,IAAI,GAAGL,MAAM,CAACK,IAApB;AAEA,UAAI6B,WAAW,GAAE,OAAK7E,KAAL,CAAW2E,eAA5B;AACAE,MAAAA,WAAW,CAAC7B,IAAD,CAAX,GAAkBf,KAAlB;;AACA,aAAKrC,KAAL,CAAWM,QAAX,CAAoB;AAACyE,QAAAA,eAAe,EAAEE;AAAlB,OAApB;AACD,KAjBkB;;AAAA,WAmBnBC,wBAnBmB,GAmBM,YAAI;AAC3B,UAAIC,cAAc,GAAC,EAAnB;AACA,UAAIC,cAAc,GAAC,EAAnB;AACA,UAAIC,WAAW,GAAC,EAAhB;;AACA,WAAI,IAAI/C,KAAK,GAAC,CAAd,EAAiBA,KAAK,GAAC,OAAKtC,KAAL,CAAWmC,OAAX,CAAmBhB,MAA1C,EAAkDmB,KAAK,EAAvD,EAA0D;AACxD,YAAIgD,cAAc,GAAC,OAAKtF,KAAL,CAAWmC,OAAX,CAAmBG,KAAnB,CAAnB;;AACA,YAAG,CAAC6C,cAAc,CAAChB,QAAf,CAAwBmB,cAAc,CAAC9C,QAAvC,CAAJ,EAAqD;AAAC2C,UAAAA,cAAc,CAACtE,IAAf,CAAoByE,cAAc,CAAC9C,QAAnC;AAA6C;;AAAA;;AACnG,YAAG,CAAC6C,WAAW,CAAClB,QAAZ,CAAqBmB,cAAc,CAACC,KAApC,CAAJ,EAA+C;AAACF,UAAAA,WAAW,CAACxE,IAAZ,CAAiByE,cAAc,CAACC,KAAhC;AAAuC;;AAAA;;AACvF,aAAI,IAAIC,cAAc,GAAC,CAAvB,EAA0BA,cAAc,GAACF,cAAc,CAACG,SAAf,CAAyBtE,MAAlE,EAA0EqE,cAAc,EAAxF,EAA2F;AACzF,cAAIE,QAAQ,GAACJ,cAAc,CAACG,SAAf,CAAyBD,cAAzB,CAAb;;AACA,cAAG,CAACJ,cAAc,CAACjB,QAAf,CAAwBuB,QAAxB,CAAJ,EAAsC;AAACN,YAAAA,cAAc,CAACvE,IAAf,CAAoB6E,QAApB;AAA8B;;AAAA;AACtE;AACF;;AACD,UAAIC,qBAAqB,GAAE,EAA3B;;AACA,UAAGR,cAAc,CAAChE,MAAf,GAAsB,CAAzB,EAA2B;AACzBwE,QAAAA,qBAAqB,CAACnD,QAAtB,GAA+B,CAAC2C,cAAD,CAA/B;AACD;;AACD,UAAGC,cAAc,CAACjE,MAAf,GAAsB,CAAzB,EAA2B;AACzBwE,QAAAA,qBAAqB,CAACD,QAAtB,GAA+B,CAACN,cAAD,CAA/B;AACD;;AACD,UAAGC,WAAW,CAAClE,MAAZ,GAAmB,CAAtB,EAAwB;AACtBwE,QAAAA,qBAAqB,CAACJ,KAAtB,GAA4B,CAACF,WAAD,CAA5B;AACD;;AACD3C,MAAAA,OAAO,CAACC,GAAR,CAAYgD,qBAAZ;AACA,aAAOA,qBAAP;AACD,KA5CkB;;AAAA,WA8CnBC,yBA9CmB,GA8CO,YAAI;AAC5B,UAAIC,uBAAuB,GAAC,OAAK7F,KAAL,CAAWmC,OAAvC;;AACA,UAAG,OAAK/B,KAAL,CAAW2E,eAAX,CAA2BvC,QAA3B,IAAqC,EAAxC,EAA2C;AACzCqD,QAAAA,uBAAuB,CAACzD,MAAxB,CAA+B,UAASC,KAAT,EAAgBC,KAAhB,EAAuBC,GAAvB,EAA2B;AAAC,iBAAOF,KAAK,CAACG,QAAN,KAAiB,KAAKpC,KAAL,CAAW2E,eAAX,CAA2BvC,QAAnD;AAA6D,SAAxH;AACD;;AACD,UAAG,OAAKpC,KAAL,CAAW2E,eAAX,CAA2BW,QAA3B,IAAqC,EAAxC,EAA2C;AACzCG,QAAAA,uBAAuB,CAACzD,MAAxB,CAA+B,UAASC,KAAT,EAAgBC,KAAhB,EAAuBC,GAAvB,EAA2B;AAAC,iBAAOF,KAAK,CAACoD,SAAN,CAAgBtB,QAAhB,CAAyB,KAAK/D,KAAL,CAAW2E,eAAX,CAA2BW,QAApD,CAAP;AAAsE,SAAjI;AACD;;AACD,UAAG,OAAKtF,KAAL,CAAW2E,eAAX,CAA2BQ,KAA3B,IAAkC,EAArC,EAAwC;AACtCM,QAAAA,uBAAuB,CAACzD,MAAxB,CAA+B,UAASC,KAAT,EAAgBC,KAAhB,EAAuBC,GAAvB,EAA2B;AAAC,iBAAOF,KAAK,CAACkD,KAAN,KAAc,KAAKnF,KAAL,CAAW2E,eAAX,CAA2BQ,KAAhD;AAAuD,SAAlH;AACD;;AACD7C,MAAAA,OAAO,CAACC,GAAR,CAAYkD,uBAAZ;AACA,aAAOA,uBAAP;AACD,KA3DkB;;AAEjB,WAAKzF,KAAL,GAAa;AAAC2E,MAAAA,eAAe,EAAE;AAACvC,QAAAA,QAAQ,EAAC,EAAV;AAAckD,QAAAA,QAAQ,EAAC,EAAvB;AAA2BH,QAAAA,KAAK,EAAC;AAAjC,OAAlB;AAAwDI,MAAAA,qBAAqB,EAAE,OAAKT,wBAAL;AAA/E,KAAb,CAFiB,CAE4G;;AAF5G;AAGlB;;;;6BA0DU;AAAA;;AACL,UAAIY,YAAY,GAAC,EAAjB;AACA,UAAID,uBAAuB,GAAC,KAAKD,yBAAL,EAA5B;;AAFK,mCAGGtD,KAHH;AAIDwD,QAAAA,YAAY,CAACjF,IAAb,CACA,oBAAC,SAAD;AAAW,UAAA,GAAG,EAAEyB,KAAhB;AAAuB,UAAA,MAAM,EAAEuD,uBAAuB,CAACvD,KAAD,CAAtD;AAA+D,UAAA,OAAO,EAAE,CACpE,oBAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,uBAAb;AAAqC,YAAA,OAAO,EAAE;AAAA,qBAAI,MAAI,CAACtC,KAAL,CAAWiE,wBAAX,CAAoC4B,uBAAuB,CAACvD,KAAD,CAA3D,CAAJ;AAAA,aAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADoE,CAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA;AAJC;;AAGL,WAAI,IAAIA,KAAK,GAAC,CAAd,EAAiBA,KAAK,GAACuD,uBAAuB,CAAC1E,MAA/C,EAAuDmB,KAAK,EAA5D,EAA+D;AAAA,eAAvDA,KAAuD;AAM9D;;AACH,aACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,EAEE,oBAAC,gBAAD;AAAkB,QAAA,mBAAmB,EAAE,KAAKlC,KAAL,CAAWuF,qBAAlD;AAAyE,QAAA,iBAAiB,EAAE,KAAKb,iBAAjG;AAAoH,QAAA,kBAAkB,EAAE,KAAK9E,KAAL,CAAWgF,kBAAnJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE,oBAAC,aAAD;AAAe,QAAA,OAAO,EAAEc,YAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,CADF;AAOD;;;;EA/EoBlG,S;;IAkFnBmG,gB;;;;;;;;;;;;;6BACK;AACP,UAAIC,kBAAkB,GAAC,EAAvB;;AACA,WAAI,IAAIC,SAAR,IAAqB,KAAKjG,KAAL,CAAWkG,mBAAhC,EAAoD;AAClD,YAAIC,YAAY,GAAC,CAAC;AAAQ,UAAA,KAAK,EAAC,EAAd;AAAiB,UAAA,GAAG,EAAE,EAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAD,CAAjB;;AACA,aAAI,IAAI7D,KAAK,GAAC,CAAd,EAAiBA,KAAK,GAAC,KAAKtC,KAAL,CAAWkG,mBAAX,CAA+BD,SAA/B,EAA0C9E,MAAjE,EAAyEmB,KAAK,EAA9E,EAAiF;AAC/E,cAAI8D,WAAW,GAAC,KAAKpG,KAAL,CAAWkG,mBAAX,CAA+BD,SAA/B,EAA0C3D,KAA1C,CAAhB;AACA6D,UAAAA,YAAY,CAACtF,IAAb,CAAkB;AAAQ,YAAA,KAAK,EAAEuF,WAAf;AAA4B,YAAA,GAAG,EAAEA,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA+CA,WAA/C,CAAlB;AACD;;AACDJ,QAAAA,kBAAkB,CAACnF,IAAnB,CACE;AAAK,UAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAASoF,SAAS,IAAE,UAAX,GAAsB,WAAtB,GAAmCA,SAAS,IAAE,UAAX,GAAsB,YAAtB,GAAoCA,SAAS,IAAE,OAAX,GAAmB,WAAnB,GAA+B,QAA/G,CADA,EAEA;AACI,UAAA,IAAI,EAAEA,SADV;AAEI,UAAA,IAAI,EAAC,QAFT;AAGI,UAAA,KAAK,EAAE,KAAKjG,KAAL,CAAW8E,iBAAX,GAA+BmB,SAA/B,CAHX;AAII,UAAA,QAAQ,EAAE,KAAKjG,KAAL,CAAWgF,kBAJzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAKKmB,YALL,CAFA,CADF;AAaD;;AAEH,aACE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAqCH,kBAArC,CADF;AAGD;;;;EA3B8BpG,S,GA8B/B;;;IACMyG,oB;;;;;;;;;;;;;6BACO;AACP,aACE;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAwC,KAAKrG,KAAL,CAAWsG,IAAnD,CADF;AAGD;;;;EAL8B1G,S;;IAQ7B2G,c;;;;;;;;;;;;;6BAEO;AAAA;;AACP,UAAIC,kBAAkB,GAAC,KAAKxG,KAAL,CAAWe,YAAX,EAAvB;AACA,UAAI0F,gBAAgB,GAAC,KAAKzG,KAAL,CAAWoB,WAAX,GAAyBD,MAA9C;AACA,UAAIuF,WAAW,GAAC,IAAhB;AACA,UAAIC,YAAY,GAAC,IAAjB;;AACA,UAAGH,kBAAkB,GAAC,CAAtB,EAAwB;AACtBE,QAAAA,WAAW,GAAC,oBAAC,gBAAD;AAAkB,UAAA,IAAI,EAAC,iBAAvB;AAAmC,UAAA,OAAO,EAAE;AAAA,mBAAI,MAAI,CAAC1G,KAAL,CAAWiB,gBAAX,CAA4B,UAA5B,CAAJ;AAAA,WAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAZ;AACD;;AACD,UAAI2F,gBAAgB,GAAC,4BAAI;AAAC,QAAA,MAAI,CAAC5G,KAAL,CAAWiB,gBAAX,CAA4B,MAA5B;AAAoC,OAA9D;;AACA,UAAG,KAAKjB,KAAL,CAAWqD,oBAAd,EAAmC;AAAC;AAClCuD,QAAAA,gBAAgB,GAAC,4BAAI;AACnB,cAAG,MAAI,CAAC5G,KAAL,CAAWqD,oBAAX,EAAH,EACA;AACE,YAAA,MAAI,CAACrD,KAAL,CAAWiB,gBAAX,CAA4B,MAA5B;AACD;AACF,SALD;AAMD;;AACD,UAAGuF,kBAAkB,GAACC,gBAAgB,GAAC,CAAvC,EAAyC;AACvCE,QAAAA,YAAY,GAAC,oBAAC,gBAAD;AAAkB,UAAA,IAAI,EAAC,SAAvB;AAAiC,UAAA,OAAO,EAAEC,gBAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAb;AACD;;AACD,aACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAkC;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAwCF,WAAxC,CAAlC,EAA4F;AAAK,QAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAwCC,YAAxC,CAA5F,CADF;AAGD;;;;EAzBwB/G,S,GA4B7B;;;IACMiH,S;;;;;;;;;;;;;6BACO;AACP,aACE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK,KAAK7G,KAAL,CAAWkE,MAAX,CAAkBd,IAAvB,CAAL,OAAuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK,KAAKpD,KAAL,CAAWkE,MAAX,CAAkB1B,QAAvB,CAAvC,EAA6E,KAAKxC,KAAL,CAAWkE,MAAX,CAAkBuB,SAAlB,CAA4BqB,GAA5B,CAAgC,UAAAC,IAAI;AAAA,eAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIA,IAAJ,CAAJ;AAAA,OAApC,CAA7E,CAA7B,OAAwK;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAqC,KAAK/G,KAAL,CAAWgH,OAAhD,CAAxK,CADF;AAGD;;;;EALmBpH,S;;IAQlBqH,M;;;;;;;;;;;;;6BACK;AACP,aACE;AAAQ,QAAA,SAAS,EAAC,QAAlB;AAA2B,QAAA,OAAO,EAAE,KAAKjH,KAAL,CAAWkH,OAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAyD,KAAKlH,KAAL,CAAWsG,IAApE,CADF;AAGD;;;;EALkB1G,S;;IAQfuH,gB;;;;;;;;;;;;;6BACK;AACP,aACE;AAAQ,QAAA,SAAS,EAAC,oBAAlB;AAAuC,QAAA,OAAO,EAAE,KAAKnH,KAAL,CAAWkH,OAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAqE,KAAKlH,KAAL,CAAWsG,IAAhF,CADF;AAGD;;;;EAL4B1G,S;;IAQzBwH,Y;;;;;;;;;;;;;6BACK;AACP,aACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgC;AAAK,QAAA,GAAG,EAAEtH,WAAV;AAAuB,QAAA,GAAG,EAAC,aAA3B;AAAyC,QAAA,KAAK,EAAE;AAACuH,UAAAA,MAAM,EAAE;AAAT,SAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAhC,EAAmG,KAAKrH,KAAL,CAAWsG,IAA9G,CADF;AAGD;;;;EALwB1G,S;;IAQrB0H,a;;;;;;;;;;;;;6BACK;AACP,aACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmC,KAAKtH,KAAL,CAAWuH,OAA9C,CADF;AAGD;;;;EALyB3H,S;;AAU5B,eAAeG,aAAf","sourcesContent":["import React, { Component } from 'react'\nimport data from \"./DummyData\";\nimport './Components.css';\nimport error_panel from './images/error_panel.png';\n\nclass MainContainer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { page: \"questionnaire\" };\n      }\n    \n    handlePageChange = page_name => {\n        let new_state=this.state;\n        new_state.page=page_name;\n        this.setState(new_state);\n    }\n  render() {\n      let page=null;\n      if(this.state.page===\"questionnaire\"){\n          page=<Questionnaire/>\n      }\n    return (\n      <div className=\"main-container\">{page}</div>\n    );\n  }\n}\n\nclass LoginPage extends Component {\n  render() {\n    return (\n      <div>nothing for the moment</div>\n    );\n  }\n}\n\nclass Questionnaire extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {step_list: [\"initial_questions\"], step_index: 0, answers: { year: '', TOEIC: '', justification_no_english: '', justification_no_english_text: '', number_english_courses: 1, number_other_courses: 0, english_courses_ranking:[], other_courses_ranking:[]}};\n      }\n    buildStepList=(answers)=>{\n      let step_list=[\"initial_questions\"];\n      if(answers.number_english_courses>0){\n        step_list.push(\"ranking_english_courses\");\n      }\n      if(answers.number_other_courses>0){\n        step_list.push(\"ranking_other_courses\");\n      }\n      return step_list\n    }\n    \n    getStepIndex=()=>{return this.state.step_index;}\n    \n    handleStepChange = (direction) => {\n      if(direction===\"previous\"&&this.state.step_index>0){\n        this.setState({step_index: this.state.step_index-1});\n      } else if(direction===\"next\"&&this.state.step_index<this.state.step_list.length-1){\n        this.setState({step_index: this.state.step_index+1});\n      }\n    }\n\n    getStepList=()=>{return this.state.step_list;}\n\n    setStepList=(new_step_list)=>{this.setState({step_list: new_step_list});}\n\n    getAnswers=()=>{ return this.state.answers;}\n\n    setAnswers=(new_answers)=>{\n      let new_step_list=this.buildStepList(new_answers);\n      this.setState({answers: new_answers, step_list: new_step_list});\n    }\n\n    render() {\n        let step=null;\n        let current_step_name=this.state.step_list[this.state.step_index];\n        if(current_step_name===\"initial_questions\"){\n          step=<InitialQuestions \n          getStepIndex={this.getStepIndex}\n          handleStepChange={this.handleStepChange}\n          getStepList={this.getStepList}\n          setStepList={this.setStepList} \n          getAnswers={this.getAnswers}\n          setAnswers={this.setAnswers}\n          />;\n        }else if(current_step_name===\"ranking_english_courses\"){\n          let list_english_courses=data.courses.filter(function(value, index, arr){return value.language===\"Anglais\";});\n          step=<CourseRankingQuestion \n          instructions=\"Veuillez ordonner les cours d'Anglais par ordre de préférence\"\n          courses={list_english_courses} \n          key=\"english_courses_ranking\"\n          answer=\"english_courses_ranking\"\n          getStepIndex={this.getStepIndex}\n          handleStepChange={this.handleStepChange}\n          getStepList={this.getStepList}\n          setStepList={this.setStepList} \n          getAnswers={this.getAnswers}\n          setAnswers={this.setAnswers}\n          />;\n        }else if(current_step_name===\"ranking_other_courses\"){\n          let list_other_courses=data.courses.filter(function(value, index, arr){return value.language!=\"Anglais\";});\n          console.log(list_other_courses);\n          step=<CourseRankingQuestion \n          instructions=\"Veuillez ordonner les autres cours par ordre de préférence\"\n          courses={list_other_courses} \n          key=\"other_courses_ranking\"\n          answer=\"other_courses_ranking\"\n          getStepIndex={this.getStepIndex}\n          handleStepChange={this.handleStepChange}\n          getStepList={this.getStepList}\n          setStepList={this.setStepList} \n          getAnswers={this.getAnswers}\n          setAnswers={this.setAnswers}\n          />;\n        }\n      return (\n        <div className=\"questionnaire\">{step}</div>\n      );\n    }\n  }\n\nclass InitialQuestions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {error_messages: []};\n  }\n\n  handleInputChange= (event) => {\n    const target = event.target;\n    const value = target.type === 'number' ? Math.max(target.value, 0) : (target.type==='text' ? target.value.substring(0,200) : target.value);\n    const name = target.name;\n\n    let new_answers= this.props.getAnswers();\n    new_answers[name]=value;\n    this.props.setAnswers(new_answers);\n  }\n\n  verificationFunction =()=>{\n    let answers=this.props.getAnswers();\n    let all_questions_answered_properly=(answers.year!='')&&(answers.TOEIC!='')&&!((answers.number_english_courses===0)&&(answers.justification_no_english===''))&&!((answers.number_english_courses===0)&&(answers.justification_no_english==='Autre')&&(answers.justification_no_english_text===''));\n    this.setState({error_message: []});\n    if(!all_questions_answered_properly){\n      let current_error_messages=this.state.error_messages;\n      current_error_messages.push(<ErrorMessage text=\"Veuillez répondre à toutes les questions de cette page.\"/>);\n      this.setState({error_messages: current_error_messages});\n    }\n    //ajouter d'autres erreurs éventuelles\n    return all_questions_answered_properly;\n  }\n\n  render() {\n    let additionnal_question_about_english_courses=[];\n    if(this.props.getAnswers().number_english_courses<1)\n    {\n      additionnal_question_about_english_courses.push(\n        [\n        <label>Veuillez justifier l'absence de cours d'anglais dans vos choix.</label>,\n        <select\n          name=\"justification_no_english\"\n          type='select'\n          value={this.props.getAnswers().justification_no_english}\n          onChange={this.handleInputChange} >\n          <option value='Je dois me concentrer sur ma LV2'>Je dois me concentrer sur ma LV2</option>\n          <option value=\"J'ai déjà validé tous les ECTS nécessaires en Anglais\">J'ai déjà validé tous les ECTS nécessaires en Anglais</option>\n          <option value='Je ne suis pas aux Ponts ce semestre'>Je ne suis pas aux Ponts ce semestre</option>\n          <option value='Autre'>Autre</option>\n        </select>,\n        <br/>\n        ]\n      );\n    }\n    if(this.props.getAnswers().justification_no_english===\"Autre\")\n    {\n      additionnal_question_about_english_courses.push(\n      [\n      <label>Veuillez préciser cette autre raison.</label>,\n      <input\n        name=\"justification_no_english_text\"\n        type=\"text\"\n        value={this.props.getAnswers().justification_no_english_text}\n        onChange={this.handleInputChange} />,\n        <br/>\n      ]\n      );\n    }\n    let instructions=\"Veuillez répondre aux questions suivantes. Il vous sera demandé de classer les cours par ordre de préférence dans la suite du questionnaire.\";\n    if(this.state.error_messages.length>0){\n      instructions=this.state.error_messages;\n    }\n    return (\n      <div className=\"question\">\n      <QuestionInstructions text={instructions}/>\n      <div className=\"question-content\">\n      <form className=\"initial-questions-form\">\n        <label>\n          En quelle année êtes-vous ? </label>\n          <select\n            name=\"year\"\n            type='select'\n            value={this.props.getAnswers().year}\n            onChange={this.handleInputChange} >\n            <option value=\"\" selected disabled hidden>Choisir</option>\n            <option value='1A'>1A</option>\n            <option value='2/3A'>2/3A</option>\n            <option value='Cycle Master'>Cycle Master</option>\n          </select>\n          <br/>\n        <label>\n          Quelle note avez-vous obtenue au TOEIC ? </label>\n          <select\n            name=\"TOEIC\"\n            type='select'\n            value={this.props.getAnswers().TOEIC}\n            onChange={this.handleInputChange} >\n            <option value=\"\" selected disabled hidden>Choisir</option>\n            <option value='moins de 650'>moins de 650</option>\n            <option value='entre 650 et 785'>entre 650 et 785</option>\n            <option value='plus de 785'>plus de 785</option>\n          </select>\n          <br/>\n        <label>\n          Combien de cours d'Anglais souhaitez-vous suivre ? (Attention, une justification sera demandée si vous ne souhaitez pas en suivre)</label>\n          <input\n            name=\"number_english_courses\"\n            type=\"number\"\n            value={this.props.getAnswers().number_english_courses}\n            onChange={this.handleInputChange} />\n          <br/>\n        {additionnal_question_about_english_courses}\n        <label>\n          Combien de cours de langues différentes de l'anglais souhaitez-vous suivre ? (une langue au niveau débutant compte pour deux)</label>\n          <input\n            name=\"number_other_courses\"\n            type=\"number\"\n            value={this.props.getAnswers().number_other_courses}\n            onChange={this.handleInputChange} />\n      </form>\n      </div>\n      <QuestionFooter handleStepChange={this.props.handleStepChange} getStepList={this.props.getStepList} getStepIndex={this.props.getStepIndex} verificationFunction={this.verificationFunction}/>\n      </div>\n    );\n  }\n}\n\nclass CourseRankingQuestion extends Component {\n\n    setRanking=(new_ranking)=>{\n      let new_answers=this.props.getAnswers();\n      new_answers[this.props.answer]=new_ranking;\n      this.props.setAnswers(new_answers)\n    }\n\n    getRanking=()=>{\n      return this.props.getAnswers()[this.props.answer];\n    }\n\n    handleAddCourseToRanking = course =>{\n        if(!(this.getRanking().includes(course))){\n            let new_ranking=this.getRanking();\n            new_ranking.push(course);\n            this.setRanking(new_ranking);\n        }\n    }\n\n    handleRankUp = (index_in_ranking) =>{//fait gagner une place dans le classement\n        if(index_in_ranking>0){\n            let new_ranking=this.getRanking();\n            let course_to_move=this.getRanking()[index_in_ranking];//swap\n            new_ranking[index_in_ranking]=new_ranking[index_in_ranking-1];\n            new_ranking[index_in_ranking-1]=course_to_move;\n            this.setRanking(new_ranking);\n        }\n    }\n\n    handleRankDown = (index_in_ranking) =>{//fait perdre une place dans le classement\n        if(index_in_ranking<this.getRanking().length-1){\n          let new_ranking=this.getRanking();\n          let course_to_move=this.getRanking()[index_in_ranking];//swap\n          new_ranking[index_in_ranking]=new_ranking[index_in_ranking+1];\n          new_ranking[index_in_ranking+1]=course_to_move;\n          this.setRanking(new_ranking);\n      }\n    }\n\n    handleDeletionFromRanking =(index_in_ranking)=>{\n        let new_ranking=this.getRanking();\n        new_ranking.splice(index_in_ranking, 1);\n        this.setRanking(new_ranking);\n    }\n\n    render() {\n      return (\n        <div className=\"question\">\n          <QuestionInstructions text={this.props.instructions}/>\n          <div className=\"question-content\">\n              <CourseList courses={this.props.courses} handleAddCourseToRanking={this.handleAddCourseToRanking}/>\n              <CourseRanking ranking= {this.getRanking()} handleRankUp={this.handleRankUp} handleRankDown={this.handleRankDown} handleDeletionFromRanking={this.handleDeletionFromRanking}/>\n          </div>   \n          <QuestionFooter handleStepChange={this.props.handleStepChange} getStepList={this.props.getStepList} getStepIndex={this.props.getStepIndex}/>\n        </div>\n      );\n    }\n  }\n\nclass CourseRanking extends Component {\n    render() {\n        let ranking_display=[];\n        for(let index=0; index<this.props.ranking.length; index++){\n            ranking_display.push(\n            <CourseBox key={index} course={this.props.ranking[index]} buttons={[\n                <Button text=\"monter\" onClick={()=>this.props.handleRankUp(index)}/>,\n                <Button text=\"descendre\" onClick={()=>this.props.handleRankDown(index)}/>,\n                <Button text=\"supprimer\" onClick={()=>this.props.handleDeletionFromRanking(index)}/>]}/>\n            );\n        }\n      return (\n        <div className=\"course-ranking\"><h1 className=\"course-ranking-header\">Mon classement</h1><CourseBoxList content={ranking_display}/></div>\n      );\n    }\n  }\n\nclass CourseList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {current_filters: {language:\"\", schedule:\"\", level:\"\"}, criteria_with_options: this.buildCriteriaWithOptions()};//pas de filtrage par défaut\n  }\n\n  getCurrentFilters=()=>{\n    return this.state.current_filters;\n  }\n\n  handleFilterChange=(event) => {\n    const target = event.target;\n    const value =  target.value;\n    const name = target.name;\n\n    let new_filters= this.state.current_filters;\n    new_filters[name]=value;\n    this.props.setState({current_filters: new_filters});\n  }\n\n  buildCriteriaWithOptions=()=>{\n    let list_languages=[];\n    let list_schedules=[];\n    let list_levels=[];\n    for(let index=0; index<this.props.courses.length; index++){\n      let current_course=this.props.courses[index];\n      if(!list_languages.includes(current_course.language)){list_languages.push(current_course.language)};\n      if(!list_levels.includes(current_course.level)){list_levels.push(current_course.level)};\n      for(let index_schedule=0; index_schedule<current_course.schedules.length; index_schedule++){\n        let schedule=current_course.schedules[index_schedule];\n        if(!list_schedules.includes(schedule)){list_schedules.push(schedule)};\n      }\n    }\n    let criteria_with_options ={};\n    if(list_languages.length>1){\n      criteria_with_options.language=[list_languages];\n    }\n    if(list_schedules.length>1){\n      criteria_with_options.schedule=[list_schedules];\n    }\n    if(list_levels.length>1){\n      criteria_with_options.level=[list_levels];\n    }\n    console.log(criteria_with_options);\n    return criteria_with_options;\n  }\n\n  buildListCoursesToDisplay=()=>{\n    let list_courses_to_display=this.props.courses;\n    if(this.state.current_filters.language!=\"\"){\n      list_courses_to_display.filter(function(value, index, arr){return value.language===this.state.current_filters.language;});\n    }\n    if(this.state.current_filters.schedule!=\"\"){\n      list_courses_to_display.filter(function(value, index, arr){return value.schedules.includes(this.state.current_filters.schedule);});\n    }\n    if(this.state.current_filters.level!=\"\"){\n      list_courses_to_display.filter(function(value, index, arr){return value.level===this.state.current_filters.level;});\n    }\n    console.log(list_courses_to_display);\n    return list_courses_to_display;\n  }\n\n    render() {\n        let list_display=[];\n        let list_courses_to_display=this.buildListCoursesToDisplay();\n        for(let index=0; index<list_courses_to_display.length; index++){\n            list_display.push(\n            <CourseBox key={index} course={list_courses_to_display[index]} buttons={[\n                <Button text=\"ajouter au classement\" onClick={()=>this.props.handleAddCourseToRanking(list_courses_to_display[index])}/>\n                ]}/>\n            );\n        }\n      return (\n        <div className=\"course-list\">\n          <h1 className=\"course-list-header\">Liste des cours</h1>\n          <CourseListFilter criteriaWithOptions={this.state.criteria_with_options} getCurrentFilters={this.getCurrentFilters} handleFilterChange={this.props.handleFilterChange}/>\n          <CourseBoxList content={list_display}/>\n        </div>\n      );\n    }\n  }\n\nclass CourseListFilter extends Component {\n  render() {\n    let criteria_selection=[];\n    for(let criterion in this.props.criteriaWithOptions){\n      let list_options=[<option value=\"\" key={\"\"}></option>];\n      for(let index=0; index<this.props.criteriaWithOptions[criterion].length; index++){\n        let option_name=this.props.criteriaWithOptions[criterion][index];\n        list_options.push(<option value={option_name} key={option_name}>{option_name}</option>);\n      }\n      criteria_selection.push(\n        <div className=\"course-list-filter-option\">\n        <label >{criterion==\"language\"?\"Langue : \":(criterion==\"schedule\"?\"Horaire : \":(criterion==\"level\"?\"Niveau : \":\"erreur\"))}</label>\n        <select\n            name={criterion}\n            type='select'\n            value={this.props.getCurrentFilters()[criterion]}\n            onChange={this.props.handleFilterChange} >\n            {list_options}\n          </select>\n      </div>\n        \n      )\n    }\n    \n  return (\n    <div className=\"course-list-filter\">{criteria_selection}</div>\n  );\n}\n}\n\n//structure générale de question\nclass QuestionInstructions extends Component {\n    render() {\n      return (\n        <h2 className=\"question-instructions\"> {this.props.text}</h2>\n      );\n    }\n  }\n\nclass QuestionFooter extends Component {\n\n    render() {\n      let current_step_index=this.props.getStepIndex();\n      let step_list_length=this.props.getStepList().length;\n      let left_button=null;\n      let right_button=null;\n      if(current_step_index>0){\n        left_button=<ChangeStepButton text=\"Précédent\" onClick={()=>this.props.handleStepChange(\"previous\")}/>\n      }\n      let nextButtonEffect=()=>{this.props.handleStepChange(\"next\")}\n      if(this.props.verificationFunction){//s'il y a une vérification à faire, elle est faite avant de passer à la question suivante\n        nextButtonEffect=()=>{\n          if(this.props.verificationFunction())\n          {\n            this.props.handleStepChange(\"next\");\n          }\n        }\n      }\n      if(current_step_index<step_list_length-1){\n        right_button=<ChangeStepButton text=\"Suivant\" onClick={nextButtonEffect }/>\n      }\n      return (\n        <div className=\"question-footer\"> <div className=\"question-footer-left\"> {left_button}</div><div className=\"question-footer-right\">{right_button}</div></div>\n      );\n    }\n  }\n\n//classes utiles\nclass CourseBox extends Component {\n    render() {\n      return (\n        <div className=\"course-box\"> <div><h2>{this.props.course.name}</h2> <h3>{this.props.course.language}</h3>{this.props.course.schedules.map(date => <p>{date}</p>)}</div> <div className=\"course-box-buttons\">{this.props.buttons}</div></div>\n      );\n    }\n  }\n\nclass Button extends Component {\n  render() {\n    return (\n      <button className=\"button\" onClick={this.props.onClick}>{this.props.text}</button>\n    );\n  }\n}\n\nclass ChangeStepButton extends Component {\n  render() {\n    return (\n      <button className=\"change-step-button\" onClick={this.props.onClick}>{this.props.text}</button>\n    );\n  }\n}\n\nclass ErrorMessage extends Component {\n  render() {\n    return (\n      <div className=\"error-message\" ><img src={error_panel} alt=\"error_panel\" style={{height: \"5vh\"}}/>{this.props.text}</div>\n    );\n  }\n}\n\nclass CourseBoxList extends Component {\n  render() {\n    return (\n      <div className=\"course-box-list\" >{this.props.content}</div>\n    );\n  }\n}\n\n\n\nexport default MainContainer;\n"]},"metadata":{},"sourceType":"module"}