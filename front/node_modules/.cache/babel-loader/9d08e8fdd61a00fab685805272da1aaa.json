{"ast":null,"code":"import _classCallCheck from \"/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation5/language-allocation/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation5/language-allocation/front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation5/language-allocation/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation5/language-allocation/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation5/language-allocation/front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation5/language-allocation/front/src/Questionnaire.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport dummyData from \"./DummyData\";\nimport url from \"./url\";\nimport vowGenerator from \"./VowGenerator\";\nimport error_panel from './images/error_panel.png';\nimport './Questionnaire.css';\n\nvar Questionnaire =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Questionnaire, _Component);\n\n  function Questionnaire(props) {\n    var _this;\n\n    _classCallCheck(this, Questionnaire);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Questionnaire).call(this, props));\n\n    _this.buildStepList = function (answers) {\n      var step_list = [\"initial_questions\"];\n\n      if (answers.number_english_courses > 0 || answers.number_other_courses > 0) {\n        step_list.push(\"course_ranking_instructions\");\n      }\n\n      if (answers.number_english_courses > 0) {\n        step_list.push(\"ranking_english_courses\");\n      }\n\n      if (answers.number_other_courses > 0) {\n        step_list.push(\"ranking_other_courses\");\n      }\n\n      step_list.push(\"final_question\");\n      return step_list;\n    };\n\n    _this.buidAvailableCourses = function (answers, data) {\n      var available_courses = data.courses;\n\n      if (answers.year === '1A') {\n        available_courses = available_courses.filter(function (course) {\n          var available_for_1A = true;\n\n          for (var i = 0; i < course.creneaux.length; i++) {\n            available_for_1A = available_for_1A && data.schedules[course.creneaux[i]].type.split(', ').includes('1A');\n          }\n\n          return available_for_1A;\n        });\n      } else if (answers.year === '2A/3A') {\n        var _available_courses = _available_courses.filter(function (course) {\n          var available_for_2A3A = true;\n\n          for (var i = 0; i < course.creneaux.length; i++) {\n            available_for_2A3A = available_for_2A3A && (data.schedules[course.creneaux[i]].type.split(', ').includes('2A') || data.schedules[course.creneaux[i]].type.split(', ').includes('3A'));\n          }\n\n          return available_for_2A3A;\n        });\n      }\n\n      return available_courses;\n    };\n\n    _this.getStepIndex = function () {\n      return _this.state.step_index;\n    };\n\n    _this.getUserName = function () {\n      return _this.state.data.user_name;\n    };\n\n    _this.handleStepChange = function (direction) {\n      if (direction === \"previous\" && _this.state.step_index > 0) {\n        _this.setState({\n          step_index: _this.state.step_index - 1\n        });\n      } else if (direction === \"next\" && _this.state.step_index < _this.state.step_list.length - 1) {\n        if (_this.state.step_index + 1 === _this.state.step_list.length - 1) {\n          //vows computed when going to the last page\n          _this.updateVows();\n        }\n\n        _this.setState({\n          step_index: _this.state.step_index + 1\n        });\n      }\n    };\n\n    _this.getStepList = function () {\n      return _this.state.step_list;\n    };\n\n    _this.setStepList = function (new_step_list) {\n      _this.setState({\n        step_list: new_step_list\n      });\n    };\n\n    _this.getAnswers = function () {\n      return _this.state.answers;\n    };\n\n    _this.setAnswers = function (new_answers) {\n      var new_step_list = _this.buildStepList(new_answers);\n\n      _this.setState({\n        answers: new_answers,\n        step_list: new_step_list\n      });\n    };\n\n    _this.updateVows = function () {\n      var answers = _this.state.answers;\n      var user_vows = vowGenerator(answers.number_english_courses, answers.number_other_courses, answers.english_courses_ranking, answers.other_courses_ranking, _this.state.data.schedules, _this.state.data.empty_course);\n      var new_state = _this.state;\n      new_state.data.user_vows = user_vows;\n\n      _this.setState(new_state);\n    };\n\n    _this.enoughVows = function () {\n      return _this.state.data.user_vows.length > 5; //!!!!!!!!!!!!!!!!!!!!!Ã  modifier\n    };\n\n    _this.getAnswersAreSent = function () {\n      return _this.state.answers_are_sent;\n    };\n\n    _this.sendAnswers = function () {\n      console.log(_this.state.data.user_vows);\n      var object_to_send = {\n        vows: _this.state.data.user_vows\n      };\n      axios.post(url + \"users/students/vows/\" + _this.state.data.token, object_to_send).then(function (result) {\n        _this.setState({\n          answers_are_sent: true\n        });\n      }, function (error) {\n        _this.setState({\n          answers_are_sent: false\n        });\n      });\n    };\n\n    _this.getSchedules = function () {\n      return _this.state.data.schedules;\n    };\n\n    _this.state = {\n      data: {\n        courses: dummyData,\n        empty_course: null,\n        schedules: [],\n        user_id: null,\n        user_name: null,\n        user_vows: null,\n        token: null\n      },\n      is_loaded: false,\n      step_list: [\"initial_questions\"],\n      step_index: 0,\n      answers_are_sent: false,\n      answers: {\n        year: '',\n        TOEIC: '',\n        justification_no_english: '',\n        justification_no_english_text: '',\n        number_english_courses: 1,\n        number_other_courses: 0,\n        english_courses_ranking: [],\n        other_courses_ranking: []\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Questionnaire, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var new_state = this.state;\n      new_state.data.user_name = window.sessionStorage.getItem(\"name\");\n      new_state.data.user_email = window.sessionStorage.getItem(\"email\");\n      new_state.data.vows = window.sessionStorage.getItem(\"vows\");\n      new_state.data.token = window.sessionStorage.getItem(\"token\");\n      new_state.is_loaded = true;\n      this.setState({\n        new_state: new_state\n      });\n      console.log(new_state);\n      axios.get(url + \"courses/\", {\n        withCredentials: false\n      }).then(function (result) {\n        var new_state = _this2.state;\n        new_state.data.courses = result.data.result.slice(1); //the empty course should be the first of the list\n\n        new_state.data.empty_course = result.data.result[0];\n        new_state.is_loaded = true;\n\n        _this2.setState({\n          new_state: new_state\n        });\n      }, function (error) {\n        _this2.setState({\n          is_loaded: false\n        });\n      });\n      axios.get(url + \"creneaux/\", {\n        withCredentials: false\n      }).then(function (result) {\n        var new_state = _this2.state;\n        new_state.data.schedules = result.data.result;\n        new_state.is_loaded = true;\n\n        _this2.setState({\n          new_state: new_state\n        });\n      }, function (error) {\n        _this2.setState({\n          is_loaded: false\n        });\n      }); //this.setState({data: dummyData})\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var data = this.state.data;\n      var step = null;\n      var current_step_name = this.state.step_list[this.state.step_index];\n      var available_courses = this.buidAvailableCourses(this.state.answers, data);\n\n      if (current_step_name === \"initial_questions\") {\n        step = React.createElement(InitialQuestions, {\n          getStepIndex: this.getStepIndex,\n          getUserName: this.getUserName,\n          handleStepChange: this.handleStepChange,\n          getStepList: this.getStepList,\n          setStepList: this.setStepList,\n          getAnswers: this.getAnswers,\n          setAnswers: this.setAnswers,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        });\n      } else if (current_step_name === \"course_ranking_instructions\") {\n        step = React.createElement(CourseRankingInstructions, {\n          instructions: \"Veuillez lire attentivement les consignes pour le classement des cours.\",\n          key: \"course_ranking_instructions\",\n          getStepIndex: this.getStepIndex,\n          handleStepChange: this.handleStepChange,\n          getStepList: this.getStepList,\n          setStepList: this.setStepList,\n          getAnswers: this.getAnswers,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        });\n      } else if (current_step_name === \"ranking_english_courses\") {\n        var list_english_courses = available_courses.filter(function (value, index, arr) {\n          return value.language === \"Anglais\";\n        });\n        step = React.createElement(CourseRankingQuestion, {\n          instructions: \"Veuillez ordonner les cours d'Anglais par ordre de pr\\xE9f\\xE9rence\",\n          courses: list_english_courses,\n          key: \"english_courses_ranking\",\n          answer: \"english_courses_ranking\",\n          getStepIndex: this.getStepIndex,\n          handleStepChange: this.handleStepChange,\n          getStepList: this.getStepList,\n          setStepList: this.setStepList,\n          getAnswers: this.getAnswers,\n          setAnswers: this.setAnswers,\n          getSchedules: this.getSchedules,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198\n          },\n          __self: this\n        });\n      } else if (current_step_name === \"ranking_other_courses\") {\n        var list_other_courses = available_courses.filter(function (value, index, arr) {\n          return value.language !== \"Anglais\";\n        });\n        step = React.createElement(CourseRankingQuestion, {\n          instructions: \"Veuillez classer les cours de langue autre que l'Anglais par ordre de pr\\xE9f\\xE9rence\",\n          courses: list_other_courses,\n          key: \"other_courses_ranking\",\n          answer: \"other_courses_ranking\",\n          getStepIndex: this.getStepIndex,\n          handleStepChange: this.handleStepChange,\n          getStepList: this.getStepList,\n          setStepList: this.setStepList,\n          getAnswers: this.getAnswers,\n          setAnswers: this.setAnswers,\n          getSchedules: this.getSchedules,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        });\n      } else if (current_step_name === \"final_question\") {\n        step = React.createElement(FinalQuestion, {\n          instructions: \"Ce questionnaire est maintenant termin\\xE9. Veuillez envoyer vos r\\xE9ponses pour que celles-ci soient prises en compte.\",\n          key: \"final-question\",\n          getStepIndex: this.getStepIndex,\n          handleStepChange: this.handleStepChange,\n          getStepList: this.getStepList,\n          setStepList: this.setStepList,\n          getAnswersAreSent: this.getAnswersAreSent,\n          sendAnswers: this.sendAnswers,\n          enoughVows: this.enoughVows,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"questionnaire\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, step);\n    }\n  }]);\n\n  return Questionnaire;\n}(Component);\n\nvar InitialQuestions =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(InitialQuestions, _Component2);\n\n  function InitialQuestions(props) {\n    var _this3;\n\n    _classCallCheck(this, InitialQuestions);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(InitialQuestions).call(this, props));\n\n    _this3.handleInputChange = function (event) {\n      var target = event.target;\n      var value = target.type === 'number' ? Math.min(Math.max(target.value, 0), 4) : target.type === 'text' ? target.value.substring(0, 200) : target.value;\n      var name = target.name;\n\n      var new_answers = _this3.props.getAnswers();\n\n      new_answers[name] = value;\n\n      _this3.props.setAnswers(new_answers);\n    };\n\n    _this3.verificationFunction = function () {\n      var answers = _this3.props.getAnswers();\n\n      var all_questions_answered_properly = answers.year !== '' && answers.TOEIC !== '' && !(answers.number_english_courses === 0 && answers.justification_no_english === '') && !(answers.number_english_courses === 0 && answers.justification_no_english === 'Autre' && answers.justification_no_english_text === '');\n      var current_error_messages = [];\n\n      if (!all_questions_answered_properly) {\n        current_error_messages.push(React.createElement(ErrorMessage, {\n          text: \"Veuillez r\\xE9pondre \\xE0 toutes les questions de cette page.\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267\n          },\n          __self: this\n        }));\n      }\n\n      _this3.setState({\n        error_messages: current_error_messages\n      }); //ajouter d'autres erreurs Ã©ventuelles\n\n\n      return all_questions_answered_properly;\n    };\n\n    _this3.state = {\n      error_messages: []\n    };\n    return _this3;\n  }\n\n  _createClass(InitialQuestions, [{\n    key: \"render\",\n    value: function render() {\n      var additionnal_question_about_english_courses = [];\n\n      if (this.props.getAnswers().number_english_courses < 1) {\n        additionnal_question_about_english_courses.push([React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280\n          },\n          __self: this\n        }, \"Veuillez justifier l'absence de cours d'anglais dans vos choix.\"), React.createElement(\"select\", {\n          name: \"justification_no_english\",\n          type: \"select\",\n          className: \"questionnaire-form-select\",\n          value: this.props.getAnswers().justification_no_english,\n          onChange: this.handleInputChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        }, React.createElement(\"option\", {\n          value: \"\",\n          selected: true,\n          disabled: true,\n          hidden: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, \"Choisir\"), React.createElement(\"option\", {\n          value: \"Je suis le CIM ou j'ai valid\\xE9 le CIM\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }, \"Je suis le CIM ou j'ai valid\\xE9 le CIM\"), React.createElement(\"option\", {\n          value: \"J'ai valid\\xE9 tous mes ECTS d'Anglais et l'obligation TOEIC\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }, \"J'ai valid\\xE9 tous mes ECTS d'Anglais et l'obligation TOEIC\"), React.createElement(\"option\", {\n          value: \"Je dois me concentrer sur ma LV2 ce semestre\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        }, \"Je dois me concentrer sur ma LV2 ce semestre\"), React.createElement(\"option\", {\n          value: \"Je suis des cours hors ENPC\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291\n          },\n          __self: this\n        }, \"Je suis des cours hors ENPC\"), React.createElement(\"option\", {\n          value: \"Je ne suis pas \\xE0 l'ENPC ce semestre\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292\n          },\n          __self: this\n        }, \"Je ne suis pas \\xE0 l'ENPC ce semestre\"), React.createElement(\"option\", {\n          value: \"Je suis stagiaire \\xE9tranger(e)\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        }, \"Je suis stagiaire \\xE9tranger(e)\"), React.createElement(\"option\", {\n          value: \"Autre\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, \"Autre\")), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296\n          },\n          __self: this\n        })]);\n      }\n\n      if (this.props.getAnswers().number_english_courses < 1 && this.props.getAnswers().justification_no_english === \"Autre\") {\n        additionnal_question_about_english_courses.push([React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 304\n          },\n          __self: this\n        }, \"Veuillez pr\\xE9ciser cette autre raison.\"), React.createElement(\"input\", {\n          name: \"justification_no_english_text\",\n          type: \"text\",\n          className: \"questionnaire-form-text\",\n          value: this.props.getAnswers().justification_no_english_text,\n          onChange: this.handleInputChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 305\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 311\n          },\n          __self: this\n        })]);\n      }\n\n      var instructions = React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, \"Bienvenue \" + this.props.getUserName() + \". Veuillez rÃ©pondre aux questions suivantes.\");\n\n      if (this.state.error_messages.length > 0) {\n        instructions = this.state.error_messages;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, React.createElement(QuestionInstructions, {\n        text: instructions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"question-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"initial-questions-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, \"En quelle ann\\xE9e \\xEAtes-vous ? \"), React.createElement(\"select\", {\n        name: \"year\",\n        type: \"select\",\n        className: \"questionnaire-form-select\",\n        value: this.props.getAnswers().year,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        disabled: true,\n        hidden: true,\n        className: \"questionnaire-form-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, \"Choisir\"), React.createElement(\"option\", {\n        value: \"1A\",\n        className: \"questionnaire-form-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, \"1A\"), React.createElement(\"option\", {\n        value: \"2/3A\",\n        className: \"questionnaire-form-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, \"2/3A\"), React.createElement(\"option\", {\n        value: \"Stagiaire \\xE9tranger\",\n        className: \"questionnaire-form-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, \"Stagiaire \\xE9tranger\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, \"Quelle note avez-vous obtenue au TOEIC ? \"), React.createElement(\"select\", {\n        name: \"TOEIC\",\n        type: \"select\",\n        className: \"questionnaire-form-select\",\n        value: this.props.getAnswers().TOEIC,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        disabled: true,\n        hidden: true,\n        className: \"questionnaire-form-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, \"Choisir\"), React.createElement(\"option\", {\n        value: \"moins de 650\",\n        className: \"questionnaire-form-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, \"moins de 650\"), React.createElement(\"option\", {\n        value: \"entre 650 et 785\",\n        className: \"questionnaire-form-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, \"entre 650 et 785\"), React.createElement(\"option\", {\n        value: \"plus de 785\",\n        className: \"questionnaire-form-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, \"plus de 785\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      }, \"Combien de cours d'Anglais souhaitez-vous suivre ? Attention, une justification sera demand\\xE9e si vous ne souhaitez pas en suivre.\", this.props.getAnswers().TOEIC === 'moins de 650' || this.props.getAnswers().TOEIC === 'entre 650 et 785' ? React.createElement(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, \"Avec votre note au TOEIC, vous \\xEAtes invit\\xE9(e) \\xE0 en prendre au moins deux.\") : null), React.createElement(\"input\", {\n        name: \"number_english_courses\",\n        type: \"number\",\n        className: \"questionnaire-form-number\",\n        value: this.props.getAnswers().number_english_courses,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }), additionnal_question_about_english_courses, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, \"Combien de cours de langues diff\\xE9rentes de l'anglais souhaitez-vous suivre ? (Souvenez vous que les cours niveau d\\xE9butant comptent deux cr\\xE9neaux.)\"), React.createElement(\"input\", {\n        name: \"number_other_courses\",\n        type: \"number\",\n        className: \"questionnaire-form-number\",\n        value: this.props.getAnswers().number_other_courses,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }))), React.createElement(QuestionFooter, {\n        handleStepChange: this.props.handleStepChange,\n        getStepList: this.props.getStepList,\n        getStepIndex: this.props.getStepIndex,\n        verificationFunction: this.verificationFunction,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return InitialQuestions;\n}(Component);\n\nvar CourseRankingInstructions =\n/*#__PURE__*/\nfunction (_Component3) {\n  _inherits(CourseRankingInstructions, _Component3);\n\n  function CourseRankingInstructions() {\n    _classCallCheck(this, CourseRankingInstructions);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseRankingInstructions).apply(this, arguments));\n  }\n\n  _createClass(CourseRankingInstructions, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }, React.createElement(QuestionInstructions, {\n        text: this.props.instructions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"question-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ranking-instructions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }, \"Vous allez devoir classer des cours par ordre de pr\\xE9f\\xE9rence parmi ceux disponibles pour vous.\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, \"Ce classement sera soumis \\xE0 un programme d'optimisation qui a pour but d'attibuer \\xE0 chacun des cours en maximisant la satisfaction globale, ce n'est PAS UN SHOTGUN.\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, \"Vous n'\\xEAtes pas tenus de classer tous les cours et seuls les cours que vous avez class\\xE9s pourront vous \\xEAtre attribu\\xE9s.\"), React.createElement(WarningMessage, {\n        text: \"Cependant ATTENTION ! Veillez Ã  classer suffisamment de cours pour Ãªtre certain(e) d'en avoir en cas de forte demande de vos premiers choix.\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }), React.createElement(WarningMessage, {\n        text: \"Si vous avez class\\xE9 trop peu de cours et que le programme n'arrive pas \\xE0 vous en attribuer assez parmi ceux class\\xE9s, vous aurez moins de cours que ce que vous souhaitiez, voire aucun.\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393\n        },\n        __self: this\n      }, \"Il est donc dans votre int\\xE9r\\xEAt de classer un maximum de cours dans les langues que vous voulez \\xE9tudier, sous peine de ne pas valider suffisamment d'ECTS.\"), this.props.getAnswers().number_english_courses > 0 ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }) : null, this.props.getAnswers().number_english_courses + this.props.getAnswers().number_other_courses > 1 ? React.createElement(WarningMessage, {\n        text: \"Veillez Ã  classer des cours se rÃ©partissant sur diffÃ©rents crÃ©neaux. Seuls des cours compatibles au niveau des horaires pourront vous Ãªtre attribuÃ©s.\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398\n        },\n        __self: this\n      }) : null, this.props.getAnswers().number_other_courses > 0 ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, \"Vous pouvez classer des cours de langues diff\\xE9rentes dans la cat\\xE9gorie \\\"langues diff\\xE9rentes de l'Anglais\\\". Cependant vous ne pourrez \\xE9tudier que deux langues \\xE0 la fois (Anglais compris). Si vous classez trois langues ou plus, le programme vous en attribuera deux en fonction des disponibilit\\xE9s.\") : null, this.props.getAnswers().TOEIC === 'moins de 650' ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404\n        },\n        __self: this\n      }) : null, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406\n        },\n        __self: this\n      }, \"Vous pourrez revenir \\xE0 cette page de consignes en cas de doute.\"))), React.createElement(QuestionFooter, {\n        handleStepChange: this.props.handleStepChange,\n        getStepList: this.props.getStepList,\n        getStepIndex: this.props.getStepIndex,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CourseRankingInstructions;\n}(Component);\n\nvar CourseRankingQuestion =\n/*#__PURE__*/\nfunction (_Component4) {\n  _inherits(CourseRankingQuestion, _Component4);\n\n  function CourseRankingQuestion(props) {\n    var _this4;\n\n    _classCallCheck(this, CourseRankingQuestion);\n\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(CourseRankingQuestion).call(this, props));\n\n    _this4.setRanking = function (new_ranking) {\n      var new_answers = _this4.props.getAnswers();\n\n      new_answers[_this4.props.answer] = new_ranking;\n\n      _this4.props.setAnswers(new_answers);\n    };\n\n    _this4.getRanking = function () {\n      return _this4.props.getAnswers()[_this4.props.answer];\n    };\n\n    _this4.handleAddCourseToRanking = function (course) {\n      if (!_this4.getRanking().includes(course)) {\n        var new_ranking = _this4.getRanking();\n\n        new_ranking.push(course);\n\n        _this4.setRanking(new_ranking);\n      }\n    };\n\n    _this4.handleRankUp = function (index_in_ranking) {\n      //fait gagner une place dans le classement\n      if (index_in_ranking > 0) {\n        var new_ranking = _this4.getRanking();\n\n        var course_to_move = _this4.getRanking()[index_in_ranking]; //swap\n\n\n        new_ranking[index_in_ranking] = new_ranking[index_in_ranking - 1];\n        new_ranking[index_in_ranking - 1] = course_to_move;\n\n        _this4.setRanking(new_ranking);\n      }\n    };\n\n    _this4.handleRankDown = function (index_in_ranking) {\n      //fait perdre une place dans le classement\n      if (index_in_ranking < _this4.getRanking().length - 1) {\n        var new_ranking = _this4.getRanking();\n\n        var course_to_move = _this4.getRanking()[index_in_ranking]; //swap\n\n\n        new_ranking[index_in_ranking] = new_ranking[index_in_ranking + 1];\n        new_ranking[index_in_ranking + 1] = course_to_move;\n\n        _this4.setRanking(new_ranking);\n      }\n    };\n\n    _this4.handleDeletionFromRanking = function (index_in_ranking) {\n      var new_ranking = _this4.getRanking();\n\n      new_ranking.splice(index_in_ranking, 1);\n\n      _this4.setRanking(new_ranking);\n    };\n\n    _this4.verificationFunction = function () {\n      var answers = _this4.props.getAnswers();\n\n      var current_error_messages = [];\n      var all_is_right = true;\n\n      if (answers[_this4.props.answer].length === 0) {\n        //classement vide affiche un message d'erreur\n        current_error_messages.push(React.createElement(ErrorMessage, {\n          text: \"Attention ! Vous n'avez class\\xE9 aucun cours ! Veuillez modifier le nombre de cours en d\\xE9but de questionnaire si vous ne souhaitez en suivre aucun dans cette cat\\xE9gorie.\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 470\n          },\n          __self: this\n        }));\n        all_is_right = false;\n      }\n\n      _this4.setState({\n        error_messages: current_error_messages\n      });\n\n      return all_is_right;\n    };\n\n    _this4.state = {\n      error_messages: []\n    };\n    return _this4;\n  }\n\n  _createClass(CourseRankingQuestion, [{\n    key: \"render\",\n    value: function render() {\n      var instructions = this.props.instructions;\n\n      if (this.state.error_messages.length > 0) {\n        instructions = this.state.error_messages;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483\n        },\n        __self: this\n      }, React.createElement(QuestionInstructions, {\n        text: instructions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 484\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"question-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485\n        },\n        __self: this\n      }, React.createElement(CourseList, {\n        courses: this.props.courses,\n        handleAddCourseToRanking: this.handleAddCourseToRanking,\n        getSchedules: this.props.getSchedules,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486\n        },\n        __self: this\n      }), React.createElement(CourseRanking, {\n        ranking: this.getRanking(),\n        handleRankUp: this.handleRankUp,\n        handleRankDown: this.handleRankDown,\n        handleDeletionFromRanking: this.handleDeletionFromRanking,\n        getSchedules: this.props.getSchedules,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 487\n        },\n        __self: this\n      })), React.createElement(QuestionFooter, {\n        handleStepChange: this.props.handleStepChange,\n        getStepList: this.props.getStepList,\n        getStepIndex: this.props.getStepIndex,\n        verificationFunction: this.verificationFunction,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CourseRankingQuestion;\n}(Component);\n\nvar CourseRanking =\n/*#__PURE__*/\nfunction (_Component5) {\n  _inherits(CourseRanking, _Component5);\n\n  function CourseRanking() {\n    _classCallCheck(this, CourseRanking);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseRanking).apply(this, arguments));\n  }\n\n  _createClass(CourseRanking, [{\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var ranking_display = [];\n\n      var _loop = function _loop(index) {\n        ranking_display.push(React.createElement(CourseBox, {\n          key: index,\n          course: _this5.props.ranking[index],\n          getSchedules: _this5.props.getSchedules,\n          buttons: [React.createElement(Button, {\n            text: \"monter\",\n            onClick: function onClick() {\n              return _this5.props.handleRankUp(index);\n            },\n            key: \"monter\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 502\n            },\n            __self: this\n          }), React.createElement(Button, {\n            text: \"descendre\",\n            onClick: function onClick() {\n              return _this5.props.handleRankDown(index);\n            },\n            key: \"descendre\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 503\n            },\n            __self: this\n          }), React.createElement(Button, {\n            text: \"supprimer\",\n            onClick: function onClick() {\n              return _this5.props.handleDeletionFromRanking(index);\n            },\n            key: \"supprimer\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 504\n            },\n            __self: this\n          })],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 501\n          },\n          __self: this\n        }));\n      };\n\n      for (var index = 0; index < this.props.ranking.length; index++) {\n        _loop(index);\n      }\n\n      return React.createElement(\"div\", {\n        className: \"course-ranking\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"course-ranking-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508\n        },\n        __self: this\n      }, \"Mon classement\"), React.createElement(CourseBoxList, {\n        content: ranking_display,\n        emptyText: \"Vous n'avez pas encore class\\xE9 de cours dans cette cat\\xE9gorie.\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CourseRanking;\n}(Component);\n\nvar FinalQuestion =\n/*#__PURE__*/\nfunction (_Component6) {\n  _inherits(FinalQuestion, _Component6);\n\n  function FinalQuestion() {\n    _classCallCheck(this, FinalQuestion);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FinalQuestion).apply(this, arguments));\n  }\n\n  _createClass(FinalQuestion, [{\n    key: \"render\",\n    value: function render() {\n      var enough_vows = this.props.enoughVows();\n      return React.createElement(\"div\", {\n        className: \"question\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522\n        },\n        __self: this\n      }, React.createElement(QuestionInstructions, {\n        text: this.props.instructions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"question-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 524\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"final-question-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525\n        },\n        __self: this\n      }, this.props.getAnswersAreSent() ? React.createElement(\"div\", {\n        className: \"final-buttons-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527\n        },\n        __self: this\n      }, \"Vos r\\xE9ponses ont bien \\xE9t\\xE9 envoy\\xE9es.\") : [enough_vows ? null : [React.createElement(WarningMessage, {\n        key: \"warning-message1\",\n        text: \"ATTENTION ! Vous avez class\\xE9 trop peu de cours ou peu de cours compatibles entre eux. Nous vous invitons \\xE0 en classer davantage avant d'envoyer vos r\\xE9ponses.\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529\n        },\n        __self: this\n      }), React.createElement(WarningMessage, {\n        key: \"warning-message2\",\n        text: \"N'ignorez ce message que si vous \\xEAtes absolument certain(e) d'avoir des places dans les cours que vous avez class\\xE9s.\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530\n        },\n        __self: this\n      })], React.createElement(\"div\", {\n        className: \"final-buttons-box\",\n        key: \"final-button-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 532\n        },\n        __self: this\n      }, React.createElement(FinalButton, {\n        text: \"Envoyer les rÃ©ponses\",\n        onClick: this.props.sendAnswers,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 533\n        },\n        __self: this\n      }), React.createElement(FinalButton, {\n        text: \"Annuler le questionnaire\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534\n        },\n        __self: this\n      }))])), this.props.getAnswersAreSent() ? null : React.createElement(QuestionFooter, {\n        handleStepChange: this.props.handleStepChange,\n        getStepList: this.props.getStepList,\n        getStepIndex: this.props.getStepIndex,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return FinalQuestion;\n}(Component);\n\nvar CourseList =\n/*#__PURE__*/\nfunction (_Component7) {\n  _inherits(CourseList, _Component7);\n\n  function CourseList(props) {\n    var _this6;\n\n    _classCallCheck(this, CourseList);\n\n    _this6 = _possibleConstructorReturn(this, _getPrototypeOf(CourseList).call(this, props));\n\n    _this6.getCurrentFilters = function () {\n      return _this6.state.current_filters;\n    };\n\n    _this6.handleFilterChange = function (event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n      var new_filters = _this6.state.current_filters;\n      new_filters[name] = value;\n\n      _this6.setState({\n        current_filters: new_filters\n      });\n    };\n\n    _this6.buildCriteriaWithOptions = function () {\n      var list_languages = [];\n      var list_schedules = [];\n      var list_levels = [];\n\n      for (var index = 0; index < _this6.props.courses.length; index++) {\n        var current_course = _this6.props.courses[index];\n\n        if (!list_languages.includes(current_course.language)) {\n          list_languages.push(current_course.language);\n        }\n\n        ;\n\n        if (!list_levels.includes(current_course.level)) {\n          list_levels.push(current_course.level);\n        }\n\n        ;\n\n        for (var index_schedule = 0; index_schedule < current_course.creneaux.length; index_schedule++) {\n          var schedule = current_course.creneaux[index_schedule];\n\n          if (!list_schedules.includes(schedule)) {\n            list_schedules.push(schedule);\n          }\n\n          ;\n        }\n      }\n\n      var criteria_with_options = {};\n\n      if (list_languages.length > 1) {\n        criteria_with_options.language = list_languages;\n      }\n\n      if (list_schedules.length > 1) {\n        criteria_with_options.schedule = list_schedules;\n      }\n\n      if (list_levels.length > 1) {\n        criteria_with_options.level = list_levels;\n      }\n\n      return criteria_with_options;\n    };\n\n    _this6.buildListCoursesToDisplay = function () {\n      var list_courses_to_display = _this6.props.courses;\n\n      if (_this6.state.current_filters.language !== \"\") {\n        list_courses_to_display = list_courses_to_display.filter(function (value, index, arr) {\n          return value.language === _this6.state.current_filters.language;\n        });\n      }\n\n      if (_this6.state.current_filters.schedule !== \"\") {\n        list_courses_to_display = list_courses_to_display.filter(function (value, index, arr) {\n          return value.creneaux.includes(parseInt(_this6.state.current_filters.schedule));\n        });\n      }\n\n      if (_this6.state.current_filters.level !== \"\") {\n        list_courses_to_display = list_courses_to_display.filter(function (value, index, arr) {\n          return value.level === _this6.state.current_filters.level;\n        });\n      }\n\n      return list_courses_to_display;\n    };\n\n    _this6.state = {\n      current_filters: {\n        language: \"\",\n        schedule: \"\",\n        level: \"\"\n      },\n      criteria_with_options: _this6.buildCriteriaWithOptions()\n    }; //pas de filtrage par dÃ©faut\n\n    return _this6;\n  }\n\n  _createClass(CourseList, [{\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      var list_display = [];\n      var list_courses_to_display = this.buildListCoursesToDisplay();\n\n      var _loop2 = function _loop2(index) {\n        list_display.push(React.createElement(CourseBox, {\n          key: index,\n          course: list_courses_to_display[index],\n          getSchedules: _this7.props.getSchedules,\n          buttons: [React.createElement(Button, {\n            text: \"ajouter au classement\",\n            onClick: function onClick() {\n              return _this7.props.handleAddCourseToRanking(list_courses_to_display[index]);\n            },\n            key: \"ajouter\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 612\n            },\n            __self: this\n          })],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 611\n          },\n          __self: this\n        }));\n      };\n\n      for (var index = 0; index < list_courses_to_display.length; index++) {\n        _loop2(index);\n      }\n\n      return React.createElement(\"div\", {\n        className: \"course-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 617\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"course-list-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 618\n        },\n        __self: this\n      }, \"Liste des cours\"), React.createElement(CourseListFilter, {\n        criteriaWithOptions: this.state.criteria_with_options,\n        getCurrentFilters: this.getCurrentFilters,\n        handleFilterChange: this.handleFilterChange,\n        getSchedules: this.props.getSchedules,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 619\n        },\n        __self: this\n      }), React.createElement(CourseBoxList, {\n        content: list_display,\n        emptyText: \"Aucun cours \\xE0 afficher avec ce filtrage.\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 620\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CourseList;\n}(Component);\n\nvar CourseListFilter =\n/*#__PURE__*/\nfunction (_Component8) {\n  _inherits(CourseListFilter, _Component8);\n\n  function CourseListFilter() {\n    _classCallCheck(this, CourseListFilter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseListFilter).apply(this, arguments));\n  }\n\n  _createClass(CourseListFilter, [{\n    key: \"render\",\n    value: function render() {\n      var schedules = this.props.getSchedules();\n      var criteria_selection = [];\n\n      for (var criterion in this.props.criteriaWithOptions) {\n        var list_options = [React.createElement(\"option\", {\n          value: \"\",\n          key: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 631\n          },\n          __self: this\n        })];\n\n        for (var index = 0; index < this.props.criteriaWithOptions[criterion].length; index++) {\n          var option_name = this.props.criteriaWithOptions[criterion][index];\n\n          if (criterion !== 'schedule') {\n            list_options.push(React.createElement(\"option\", {\n              value: option_name,\n              key: option_name,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 635\n              },\n              __self: this\n            }, option_name));\n          } else {\n            list_options.push(React.createElement(\"option\", {\n              value: option_name,\n              key: option_name,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 637\n              },\n              __self: this\n            }, schedules[option_name].day + (schedules[option_name].day === \"hors-crÃ©neaux\" ? \"\" : \" \" + schedules[option_name].begin + \"-\" + schedules[option_name].end)));\n          }\n        }\n\n        criteria_selection.push(React.createElement(\"div\", {\n          className: \"course-list-filter-option\",\n          key: criterion,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 642\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 643\n          },\n          __self: this\n        }, criterion === \"language\" ? \"Langue : \" : criterion === \"schedule\" ? \"Horaire : \" : criterion === \"level\" ? \"Niveau : \" : \"erreur\"), React.createElement(\"select\", {\n          name: criterion,\n          type: \"select\",\n          value: this.props.getCurrentFilters()[criterion],\n          onChange: this.props.handleFilterChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 644\n          },\n          __self: this\n        }, list_options)));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"course-list-filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 658\n        },\n        __self: this\n      }, criteria_selection);\n    }\n  }]);\n\n  return CourseListFilter;\n}(Component); //structure gÃ©nÃ©rale de question\n\n\nvar QuestionInstructions =\n/*#__PURE__*/\nfunction (_Component9) {\n  _inherits(QuestionInstructions, _Component9);\n\n  function QuestionInstructions() {\n    _classCallCheck(this, QuestionInstructions);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(QuestionInstructions).apply(this, arguments));\n  }\n\n  _createClass(QuestionInstructions, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"h2\", {\n        className: \"question-instructions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 667\n        },\n        __self: this\n      }, \" \", this.props.text);\n    }\n  }]);\n\n  return QuestionInstructions;\n}(Component);\n\nvar QuestionFooter =\n/*#__PURE__*/\nfunction (_Component10) {\n  _inherits(QuestionFooter, _Component10);\n\n  function QuestionFooter() {\n    _classCallCheck(this, QuestionFooter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(QuestionFooter).apply(this, arguments));\n  }\n\n  _createClass(QuestionFooter, [{\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      var current_step_index = this.props.getStepIndex();\n      var step_list_length = this.props.getStepList().length;\n      var left_button = null;\n      var right_button = null;\n\n      if (current_step_index > 0) {\n        left_button = React.createElement(ChangeStepButton, {\n          text: \"Pr\\xE9c\\xE9dent\",\n          onClick: function onClick() {\n            return _this8.props.handleStepChange(\"previous\");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 680\n          },\n          __self: this\n        });\n      }\n\n      var nextButtonEffect = function nextButtonEffect() {\n        _this8.props.handleStepChange(\"next\");\n      };\n\n      if (this.props.verificationFunction) {\n        //s'il y a une vÃ©rification Ã  faire, elle est faite avant de passer Ã  la question suivante\n        nextButtonEffect = function nextButtonEffect() {\n          if (_this8.props.verificationFunction()) {\n            _this8.props.handleStepChange(\"next\");\n          }\n        };\n      }\n\n      if (current_step_index < step_list_length - 1) {\n        right_button = React.createElement(ChangeStepButton, {\n          text: \"Suivant\",\n          onClick: nextButtonEffect,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 692\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"question-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 695\n        },\n        __self: this\n      }, \" \", React.createElement(\"div\", {\n        className: \"question-footer-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 695\n        },\n        __self: this\n      }, \" \", left_button), React.createElement(\"div\", {\n        className: \"question-footer-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 695\n        },\n        __self: this\n      }, right_button));\n    }\n  }]);\n\n  return QuestionFooter;\n}(Component); //classes utiles\n\n\nvar CourseBox =\n/*#__PURE__*/\nfunction (_Component11) {\n  _inherits(CourseBox, _Component11);\n\n  function CourseBox() {\n    _classCallCheck(this, CourseBox);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseBox).apply(this, arguments));\n  }\n\n  _createClass(CourseBox, [{\n    key: \"render\",\n    value: function render() {\n      var schedules = this.props.getSchedules();\n      var current_course_schedules_list = this.props.course.creneaux.map(function (schedule_index) {\n        return React.createElement(\"p\", {\n          key: schedule_index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 704\n          },\n          __self: this\n        }, schedules[schedule_index].day + (schedules[schedule_index].day === \"hors-crÃ©neaux\" ? \"\" : \" \" + schedules[schedule_index].begin + \"-\" + schedules[schedule_index].end));\n      });\n      return React.createElement(\"div\", {\n        className: \"course-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 706\n        },\n        __self: this\n      }, \" \", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 706\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 706\n        },\n        __self: this\n      }, this.props.course.name), \" \", React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 706\n        },\n        __self: this\n      }, this.props.course.language), current_course_schedules_list), \" \", React.createElement(\"div\", {\n        className: \"course-box-buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 706\n        },\n        __self: this\n      }, this.props.buttons));\n    }\n  }]);\n\n  return CourseBox;\n}(Component);\n\nvar Button =\n/*#__PURE__*/\nfunction (_Component12) {\n  _inherits(Button, _Component12);\n\n  function Button() {\n    _classCallCheck(this, Button);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Button).apply(this, arguments));\n  }\n\n  _createClass(Button, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"button\", {\n        className: \"button\",\n        onClick: this.props.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 715\n        },\n        __self: this\n      }, this.props.text);\n    }\n  }]);\n\n  return Button;\n}(Component);\n\nvar ChangeStepButton =\n/*#__PURE__*/\nfunction (_Component13) {\n  _inherits(ChangeStepButton, _Component13);\n\n  function ChangeStepButton() {\n    _classCallCheck(this, ChangeStepButton);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ChangeStepButton).apply(this, arguments));\n  }\n\n  _createClass(ChangeStepButton, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"button\", {\n        className: \"change-step-button\",\n        onClick: this.props.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 723\n        },\n        __self: this\n      }, this.props.text);\n    }\n  }]);\n\n  return ChangeStepButton;\n}(Component);\n\nvar FinalButton =\n/*#__PURE__*/\nfunction (_Component14) {\n  _inherits(FinalButton, _Component14);\n\n  function FinalButton() {\n    _classCallCheck(this, FinalButton);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FinalButton).apply(this, arguments));\n  }\n\n  _createClass(FinalButton, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"button\", {\n        className: \"final-button\",\n        onClick: this.props.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 731\n        },\n        __self: this\n      }, this.props.text);\n    }\n  }]);\n\n  return FinalButton;\n}(Component);\n\nvar ErrorMessage =\n/*#__PURE__*/\nfunction (_Component15) {\n  _inherits(ErrorMessage, _Component15);\n\n  function ErrorMessage() {\n    _classCallCheck(this, ErrorMessage);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ErrorMessage).apply(this, arguments));\n  }\n\n  _createClass(ErrorMessage, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"error-message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 740\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: error_panel,\n        alt: \"error_panel\",\n        style: {\n          height: \"5vh\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 740\n        },\n        __self: this\n      }), this.props.text);\n    }\n  }]);\n\n  return ErrorMessage;\n}(Component);\n\nvar WarningMessage =\n/*#__PURE__*/\nfunction (_Component16) {\n  _inherits(WarningMessage, _Component16);\n\n  function WarningMessage() {\n    _classCallCheck(this, WarningMessage);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(WarningMessage).apply(this, arguments));\n  }\n\n  _createClass(WarningMessage, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"warning-message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 748\n        },\n        __self: this\n      }, this.props.text);\n    }\n  }]);\n\n  return WarningMessage;\n}(Component);\n\nvar CourseBoxList =\n/*#__PURE__*/\nfunction (_Component17) {\n  _inherits(CourseBoxList, _Component17);\n\n  function CourseBoxList() {\n    _classCallCheck(this, CourseBoxList);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CourseBoxList).apply(this, arguments));\n  }\n\n  _createClass(CourseBoxList, [{\n    key: \"render\",\n    value: function render() {\n      return this.props.content.length === 0 ? React.createElement(\"div\", {\n        className: \"course-box-list-empty-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 757\n        },\n        __self: this\n      }, this.props.emptyText) : React.createElement(\"div\", {\n        className: \"course-box-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 758\n        },\n        __self: this\n      }, this.props.content);\n    }\n  }]);\n\n  return CourseBoxList;\n}(Component);\n\nexport default Questionnaire;","map":{"version":3,"sources":["/home/luca/Documents/ENPC-2A/Projet-departement/language-allocation5/language-allocation/front/src/Questionnaire.js"],"names":["React","Component","axios","dummyData","url","vowGenerator","error_panel","Questionnaire","props","buildStepList","answers","step_list","number_english_courses","number_other_courses","push","buidAvailableCourses","data","available_courses","courses","year","filter","course","available_for_1A","i","creneaux","length","schedules","type","split","includes","available_for_2A3A","getStepIndex","state","step_index","getUserName","user_name","handleStepChange","direction","setState","updateVows","getStepList","setStepList","new_step_list","getAnswers","setAnswers","new_answers","user_vows","english_courses_ranking","other_courses_ranking","empty_course","new_state","enoughVows","getAnswersAreSent","answers_are_sent","sendAnswers","console","log","object_to_send","vows","post","token","then","result","error","getSchedules","user_id","is_loaded","TOEIC","justification_no_english","justification_no_english_text","window","sessionStorage","getItem","user_email","get","withCredentials","slice","step","current_step_name","list_english_courses","value","index","arr","language","list_other_courses","InitialQuestions","handleInputChange","event","target","Math","min","max","substring","name","verificationFunction","all_questions_answered_properly","current_error_messages","error_messages","additionnal_question_about_english_courses","instructions","color","CourseRankingInstructions","CourseRankingQuestion","setRanking","new_ranking","answer","getRanking","handleAddCourseToRanking","handleRankUp","index_in_ranking","course_to_move","handleRankDown","handleDeletionFromRanking","splice","all_is_right","CourseRanking","ranking_display","ranking","FinalQuestion","enough_vows","CourseList","getCurrentFilters","current_filters","handleFilterChange","new_filters","buildCriteriaWithOptions","list_languages","list_schedules","list_levels","current_course","level","index_schedule","schedule","criteria_with_options","buildListCoursesToDisplay","list_courses_to_display","parseInt","list_display","CourseListFilter","criteria_selection","criterion","criteriaWithOptions","list_options","option_name","day","begin","end","QuestionInstructions","text","QuestionFooter","current_step_index","step_list_length","left_button","right_button","nextButtonEffect","CourseBox","current_course_schedules_list","map","schedule_index","buttons","Button","onClick","ChangeStepButton","FinalButton","ErrorMessage","height","WarningMessage","CourseBoxList","content","emptyText"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport dummyData from \"./DummyData\";\nimport url from \"./url\";\nimport vowGenerator from \"./VowGenerator\";\nimport error_panel from './images/error_panel.png';\nimport './Questionnaire.css';\n\nclass Questionnaire extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { data: {courses: dummyData, empty_course: null, schedules: [], user_id: null, user_name: null, user_vows: null, token: null}, is_loaded: false, step_list: [\"initial_questions\"], step_index: 0, answers_are_sent: false, answers: { year: '', TOEIC: '', justification_no_english: '', justification_no_english_text: '', number_english_courses: 1, number_other_courses: 0, english_courses_ranking:[], other_courses_ranking:[]}};\n\n      }\n\n\n    componentDidMount(){\n      let new_state=this.state;\n      new_state.data.user_name=window.sessionStorage.getItem(\"name\");\n      new_state.data.user_email = window.sessionStorage.getItem(\"email\");\n      new_state.data.vows=window.sessionStorage.getItem(\"vows\");\n      new_state.data.token=window.sessionStorage.getItem(\"token\");\n      new_state.is_loaded=true;\n      this.setState({\n        new_state\n      });\n      console.log(new_state)\n\n\n\n      axios.get(url+\"courses/\", {withCredentials:false})\n      .then(\n        (result) => {\n          let new_state=this.state;\n          new_state.data.courses=result.data.result.slice(1);//the empty course should be the first of the list\n          new_state.data.empty_course=result.data.result[0];\n          new_state.is_loaded=true;\n          this.setState({\n            new_state\n          });\n        },\n        (error) => {\n          this.setState({\n            is_loaded: false\n          });\n        }\n      );\n      axios.get(url+\"creneaux/\", {withCredentials:false})\n      .then(\n        (result) => {\n          let new_state=this.state;\n          new_state.data.schedules=result.data.result;\n          new_state.is_loaded=true;\n          this.setState({\n            new_state\n          });\n        },\n        (error) => {\n          this.setState({\n            is_loaded: false\n          });\n        }\n      );\n\n      //this.setState({data: dummyData})\n    }\n\n    buildStepList=(answers)=>{\n      let step_list=[\"initial_questions\"];\n      if(answers.number_english_courses>0 || answers.number_other_courses>0){\n        step_list.push(\"course_ranking_instructions\");\n      }\n      if(answers.number_english_courses>0){\n        step_list.push(\"ranking_english_courses\");\n      }\n      if(answers.number_other_courses>0){\n        step_list.push(\"ranking_other_courses\");\n      }\n      step_list.push(\"final_question\")\n      return step_list\n    }\n\n    buidAvailableCourses=(answers, data)=>{\n      let available_courses=data.courses;\n      if(answers.year==='1A'){\n        available_courses=available_courses\n        .filter(\n          (course)=>{\n            let available_for_1A=true;\n            for(let i=0; i<course.creneaux.length; i++){\n              available_for_1A=available_for_1A&& data.schedules[course.creneaux[i]].type.split(', ').includes('1A');\n            }\n            return available_for_1A;\n          }\n          )\n      } else if(answers.year==='2A/3A'){\n        let available_courses=available_courses\n        .filter(\n          (course)=>{\n            let available_for_2A3A=true;\n            for(let i=0; i<course.creneaux.length; i++){\n              available_for_2A3A=available_for_2A3A&& (data.schedules[course.creneaux[i]].type.split(', ').includes('2A')||data.schedules[course.creneaux[i]].type.split(', ').includes('3A'));\n            }\n            return available_for_2A3A;\n          }\n          )\n      }\n      return available_courses;\n    }\n\n    getStepIndex=()=>{return this.state.step_index;}\n\n    getUserName=()=>{return this.state.data.user_name;}\n\n    handleStepChange = (direction) => {\n      if(direction===\"previous\"&&this.state.step_index>0){\n        this.setState({step_index: this.state.step_index-1});\n      } else if(direction===\"next\"&&this.state.step_index<this.state.step_list.length-1){\n        if(this.state.step_index+1===this.state.step_list.length-1){ //vows computed when going to the last page\n          this.updateVows()\n        }\n        this.setState({step_index: this.state.step_index+1});\n      }\n    }\n\n    getStepList=()=>{return this.state.step_list;}\n\n    setStepList=(new_step_list)=>{this.setState({step_list: new_step_list});}\n\n    getAnswers=()=>{ return this.state.answers;}\n\n    setAnswers=(new_answers)=>{\n      let new_step_list=this.buildStepList(new_answers);\n      this.setState({answers: new_answers, step_list: new_step_list});\n    }\n\n    updateVows=()=>{\n      let answers=this.state.answers;\n      let user_vows=vowGenerator(answers.number_english_courses, answers.number_other_courses, answers.english_courses_ranking, answers.other_courses_ranking, this.state.data.schedules, this.state.data.empty_course);\n      let new_state=this.state;\n      new_state.data.user_vows=user_vows;\n      this.setState(new_state);\n    }\n\n    enoughVows=()=>{\n      return this.state.data.user_vows.length>5; //!!!!!!!!!!!!!!!!!!!!!Ã  modifier\n    }\n\n    getAnswersAreSent=()=>{\n        return this.state.answers_are_sent;\n    }\n\n    sendAnswers=()=>{\n      console.log(this.state.data.user_vows)\n      let object_to_send={vows: this.state.data.user_vows};\n      axios.post(url+\"users/students/vows/\"+this.state.data.token,object_to_send)\n      .then(\n        (result) => {\n          this.setState({answers_are_sent: true})\n        },\n        (error) => {\n          this.setState({answers_are_sent: false})\n        }\n      );\n    }\n\n    getSchedules = ()=>{\n      return this.state.data.schedules;\n    }\n\n    render() {\n        let data=this.state.data;\n        let step=null;\n        let current_step_name=this.state.step_list[this.state.step_index];\n        let available_courses=this.buidAvailableCourses(this.state.answers, data);\n        if(current_step_name===\"initial_questions\"){\n          step=<InitialQuestions\n          getStepIndex={this.getStepIndex}\n          getUserName = {this.getUserName}\n          handleStepChange={this.handleStepChange}\n          getStepList={this.getStepList}\n          setStepList={this.setStepList}\n          getAnswers={this.getAnswers}\n          setAnswers={this.setAnswers}\n          />;\n        }else if(current_step_name===\"course_ranking_instructions\"){\n          step=<CourseRankingInstructions\n          instructions=\"Veuillez lire attentivement les consignes pour le classement des cours.\"\n          key=\"course_ranking_instructions\"\n          getStepIndex={this.getStepIndex}\n          handleStepChange={this.handleStepChange}\n          getStepList={this.getStepList}\n          setStepList={this.setStepList}\n          getAnswers={this.getAnswers}\n          />;\n        }else if(current_step_name===\"ranking_english_courses\"){\n          let list_english_courses=available_courses.filter(function(value, index, arr){return value.language===\"Anglais\";});\n          step=<CourseRankingQuestion\n          instructions=\"Veuillez ordonner les cours d'Anglais par ordre de prÃ©fÃ©rence\"\n          courses={list_english_courses}\n          key=\"english_courses_ranking\"\n          answer=\"english_courses_ranking\"\n          getStepIndex={this.getStepIndex}\n          handleStepChange={this.handleStepChange}\n          getStepList={this.getStepList}\n          setStepList={this.setStepList}\n          getAnswers={this.getAnswers}\n          setAnswers={this.setAnswers}\n          getSchedules={this.getSchedules}\n          />;\n        }else if(current_step_name===\"ranking_other_courses\"){\n          let list_other_courses=available_courses.filter(function(value, index, arr){return value.language!==\"Anglais\";});\n          step=<CourseRankingQuestion\n          instructions=\"Veuillez classer les cours de langue autre que l'Anglais par ordre de prÃ©fÃ©rence\"\n          courses={list_other_courses}\n          key=\"other_courses_ranking\"\n          answer=\"other_courses_ranking\"\n          getStepIndex={this.getStepIndex}\n          handleStepChange={this.handleStepChange}\n          getStepList={this.getStepList}\n          setStepList={this.setStepList}\n          getAnswers={this.getAnswers}\n          setAnswers={this.setAnswers}\n          getSchedules={this.getSchedules}\n          />;\n        }else if(current_step_name===\"final_question\"){\n            step=<FinalQuestion\n            instructions=\"Ce questionnaire est maintenant terminÃ©. Veuillez envoyer vos rÃ©ponses pour que celles-ci soient prises en compte.\"\n            key=\"final-question\"\n            getStepIndex={this.getStepIndex}\n            handleStepChange={this.handleStepChange}\n            getStepList={this.getStepList}\n            setStepList={this.setStepList}\n            getAnswersAreSent={this.getAnswersAreSent}\n            sendAnswers={this.sendAnswers}\n            enoughVows={this.enoughVows}\n            />;\n          }\n      return (\n        <div className=\"questionnaire\">{step}</div>\n      );\n    }\n  }\n\nclass InitialQuestions extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {error_messages: []};\n  }\n\n  handleInputChange= (event) => {\n    const target = event.target;\n    const value = target.type === 'number' ? Math.min(Math.max(target.value, 0), 4) : (target.type==='text' ? target.value.substring(0,200) : target.value);\n    const name = target.name;\n\n    let new_answers= this.props.getAnswers();\n    new_answers[name]=value;\n    this.props.setAnswers(new_answers);\n  }\n\n  verificationFunction =()=>{\n    let answers=this.props.getAnswers();\n    let all_questions_answered_properly=(answers.year!=='')&&(answers.TOEIC!=='')&&!((answers.number_english_courses===0)&&(answers.justification_no_english===''))&&!((answers.number_english_courses===0)&&(answers.justification_no_english==='Autre')&&(answers.justification_no_english_text===''));\n    let current_error_messages=[];\n    if(!all_questions_answered_properly){\n      current_error_messages.push(<ErrorMessage text=\"Veuillez rÃ©pondre Ã  toutes les questions de cette page.\"/>);\n    }\n    this.setState({error_messages: current_error_messages});\n    //ajouter d'autres erreurs Ã©ventuelles\n    return all_questions_answered_properly;\n  }\n\n  render() {\n    let additionnal_question_about_english_courses=[];\n    if(this.props.getAnswers().number_english_courses<1)\n    {\n      additionnal_question_about_english_courses.push(\n        [\n        <label>Veuillez justifier l'absence de cours d'anglais dans vos choix.</label>,\n        <select\n          name=\"justification_no_english\"\n          type='select'\n          className=\"questionnaire-form-select\"\n          value={this.props.getAnswers().justification_no_english}\n          onChange={this.handleInputChange} >\n          <option value=\"\" selected disabled hidden>Choisir</option>\n          <option value=\"Je suis le CIM ou j'ai validÃ© le CIM\">Je suis le CIM ou j'ai validÃ© le CIM</option>\n          <option value=\"J'ai validÃ© tous mes ECTS d'Anglais et l'obligation TOEIC\">J'ai validÃ© tous mes ECTS d'Anglais et l'obligation TOEIC</option>\n          <option value='Je dois me concentrer sur ma LV2 ce semestre'>Je dois me concentrer sur ma LV2 ce semestre</option>\n          <option value=\"Je suis des cours hors ENPC\">Je suis des cours hors ENPC</option>\n          <option value=\"Je ne suis pas Ã  l'ENPC ce semestre\">Je ne suis pas Ã  l'ENPC ce semestre</option>\n          <option value=\"Je suis stagiaire Ã©tranger(e)\">Je suis stagiaire Ã©tranger(e)</option>\n          <option value='Autre'>Autre</option>\n        </select>,\n        <br/>\n        ]\n      );\n    }\n    if((this.props.getAnswers().number_english_courses<1)&&(this.props.getAnswers().justification_no_english===\"Autre\"))\n    {\n      additionnal_question_about_english_courses.push(\n      [\n      <label>Veuillez prÃ©ciser cette autre raison.</label>,\n      <input\n        name=\"justification_no_english_text\"\n        type=\"text\"\n        className=\"questionnaire-form-text\"\n        value={this.props.getAnswers().justification_no_english_text}\n        onChange={this.handleInputChange} />,\n        <br/>\n      ]\n      );\n    }\n    let instructions=<p>{\"Bienvenue \"+this.props.getUserName()+\". Veuillez rÃ©pondre aux questions suivantes.\"}</p>;\n    if(this.state.error_messages.length>0){\n      instructions=this.state.error_messages;\n    }\n    return (\n      <div className=\"question\">\n      <QuestionInstructions text={instructions}/>\n      <div className=\"question-content\">\n      <form className=\"initial-questions-form\">\n        <label>\n          En quelle annÃ©e Ãªtes-vous ? </label>\n          <select\n            name=\"year\"\n            type='select'\n            className=\"questionnaire-form-select\"\n            value={this.props.getAnswers().year}\n            onChange={this.handleInputChange} >\n            <option value=\"\" disabled hidden className=\"questionnaire-form-option\">Choisir</option>\n            <option value='1A' className=\"questionnaire-form-option\">1A</option>\n            <option value='2/3A' className=\"questionnaire-form-option\">2/3A</option>\n            <option value='Stagiaire Ã©tranger' className=\"questionnaire-form-option\">Stagiaire Ã©tranger</option>\n          </select>\n          <br/>\n        <label>\n          Quelle note avez-vous obtenue au TOEIC ? </label>\n          <select\n            name=\"TOEIC\"\n            type='select'\n            className=\"questionnaire-form-select\"\n            value={this.props.getAnswers().TOEIC}\n            onChange={this.handleInputChange} >\n            <option value=\"\" disabled hidden className=\"questionnaire-form-option\">Choisir</option>\n            <option value='moins de 650' className=\"questionnaire-form-option\">moins de 650</option>\n            <option value='entre 650 et 785' className=\"questionnaire-form-option\">entre 650 et 785</option>\n            <option value='plus de 785' className=\"questionnaire-form-option\">plus de 785</option>\n          </select>\n          <br/>\n        <label>\n          Combien de cours d'Anglais souhaitez-vous suivre ? Attention, une justification sera demandÃ©e si vous ne souhaitez pas en suivre.\n          {this.props.getAnswers().TOEIC==='moins de 650' || this.props.getAnswers().TOEIC==='entre 650 et 785' ? <p style={{color: \"red\"}}>Avec votre note au TOEIC, vous Ãªtes invitÃ©(e) Ã  en prendre au moins deux.</p>:null}\n          </label>\n          <input\n            name=\"number_english_courses\"\n            type=\"number\"\n            className=\"questionnaire-form-number\"\n            value={this.props.getAnswers().number_english_courses}\n            onChange={this.handleInputChange} />\n          <br/>\n        {additionnal_question_about_english_courses}\n        <label>\n          Combien de cours de langues diffÃ©rentes de l'anglais souhaitez-vous suivre ? (Souvenez vous que les cours niveau dÃ©butant comptent deux crÃ©neaux.)</label>\n          <input\n            name=\"number_other_courses\"\n            type=\"number\"\n            className=\"questionnaire-form-number\"\n            value={this.props.getAnswers().number_other_courses}\n            onChange={this.handleInputChange} />\n      </form>\n      </div>\n      <QuestionFooter handleStepChange={this.props.handleStepChange} getStepList={this.props.getStepList} getStepIndex={this.props.getStepIndex} verificationFunction={this.verificationFunction}/>\n      </div>\n    );\n  }\n}\n\nclass CourseRankingInstructions extends Component {\n\n  render() {\n      return (\n        <div className=\"question\">\n          <QuestionInstructions text={this.props.instructions}/>\n          <div className=\"question-content\">\n            <div className=\"ranking-instructions\">\n              <p>Vous allez devoir classer des cours par ordre de prÃ©fÃ©rence parmi ceux disponibles pour vous.</p>\n              <p>Ce classement sera soumis Ã  un programme d'optimisation qui a pour but d'attibuer Ã  chacun des cours en maximisant la satisfaction globale, ce n'est PAS UN SHOTGUN.</p>\n              <p>Vous n'Ãªtes pas tenus de classer tous les cours et seuls les cours que vous avez classÃ©s pourront vous Ãªtre attribuÃ©s.</p>\n              <WarningMessage text={\"Cependant ATTENTION ! Veillez Ã  classer suffisamment de cours pour Ãªtre certain(e) d'en avoir en cas de forte demande de vos premiers choix.\"}/>\n              <WarningMessage text=\"Si vous avez classÃ© trop peu de cours et que le programme n'arrive pas Ã  vous en attribuer assez parmi ceux classÃ©s, vous aurez moins de cours que ce que vous souhaitiez, voire aucun.\"/>\n              <p>Il est donc dans votre intÃ©rÃªt de classer un maximum de cours dans les langues que vous voulez Ã©tudier, sous peine de ne pas valider suffisamment d'ECTS.</p>\n              {this.props.getAnswers().number_english_courses>0 ?\n              <p></p>\n              :null}\n              {this.props.getAnswers().number_english_courses + this.props.getAnswers().number_other_courses>1?\n              <WarningMessage text={\"Veillez Ã  classer des cours se rÃ©partissant sur diffÃ©rents crÃ©neaux. Seuls des cours compatibles au niveau des horaires pourront vous Ãªtre attribuÃ©s.\"}/>\n              :null}\n              {this.props.getAnswers().number_other_courses>0 ?\n              <p>Vous pouvez classer des cours de langues diffÃ©rentes dans la catÃ©gorie \"langues diffÃ©rentes de l'Anglais\". Cependant vous ne pourrez Ã©tudier que deux langues Ã  la fois (Anglais compris). Si vous classez trois langues ou plus, le programme vous en attribuera deux en fonction des disponibilitÃ©s.</p>\n              :null}\n              {this.props.getAnswers().TOEIC==='moins de 650' ?\n              <p></p>\n              :null}\n              <p>Vous pourrez revenir Ã  cette page de consignes en cas de doute.</p>\n            </div>\n          </div>\n          <QuestionFooter handleStepChange={this.props.handleStepChange} getStepList={this.props.getStepList} getStepIndex={this.props.getStepIndex}/>\n        </div>\n      );\n    }\n} \n\nclass CourseRankingQuestion extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {error_messages: []};\n      }\n\n    setRanking=(new_ranking)=>{\n      let new_answers=this.props.getAnswers();\n      new_answers[this.props.answer]=new_ranking;\n      this.props.setAnswers(new_answers)\n    }\n\n    getRanking=()=>{\n      return this.props.getAnswers()[this.props.answer];\n    }\n\n    handleAddCourseToRanking = course =>{\n        if(!(this.getRanking().includes(course))){\n            let new_ranking=this.getRanking();\n            new_ranking.push(course);\n            this.setRanking(new_ranking);\n        }\n    }\n\n    handleRankUp = (index_in_ranking) =>{//fait gagner une place dans le classement\n        if(index_in_ranking>0){\n            let new_ranking=this.getRanking();\n            let course_to_move=this.getRanking()[index_in_ranking];//swap\n            new_ranking[index_in_ranking]=new_ranking[index_in_ranking-1];\n            new_ranking[index_in_ranking-1]=course_to_move;\n            this.setRanking(new_ranking);\n        }\n    }\n\n    handleRankDown = (index_in_ranking) =>{//fait perdre une place dans le classement\n        if(index_in_ranking<this.getRanking().length-1){\n          let new_ranking=this.getRanking();\n          let course_to_move=this.getRanking()[index_in_ranking];//swap\n          new_ranking[index_in_ranking]=new_ranking[index_in_ranking+1];\n          new_ranking[index_in_ranking+1]=course_to_move;\n          this.setRanking(new_ranking);\n      }\n    }\n\n    handleDeletionFromRanking =(index_in_ranking)=>{\n        let new_ranking=this.getRanking();\n        new_ranking.splice(index_in_ranking, 1);\n        this.setRanking(new_ranking);\n    }\n\n    verificationFunction=()=>{\n        let answers = this.props.getAnswers();\n        let current_error_messages=[];\n        let all_is_right=true;\n        if(answers[this.props.answer].length===0){//classement vide affiche un message d'erreur\n            current_error_messages.push(<ErrorMessage text=\"Attention ! Vous n'avez classÃ© aucun cours ! Veuillez modifier le nombre de cours en dÃ©but de questionnaire si vous ne souhaitez en suivre aucun dans cette catÃ©gorie.\"/>);\n            all_is_right=false;\n        }\n        this.setState({error_messages: current_error_messages});\n        return all_is_right;\n    }\n\n    render() {\n        let instructions=this.props.instructions;\n        if(this.state.error_messages.length>0){\n            instructions=this.state.error_messages;\n          }\n      return (\n        <div className=\"question\">\n          <QuestionInstructions text={instructions}/>\n          <div className=\"question-content\">\n              <CourseList courses={this.props.courses} handleAddCourseToRanking={this.handleAddCourseToRanking} getSchedules={this.props.getSchedules}/>\n              <CourseRanking ranking= {this.getRanking()} handleRankUp={this.handleRankUp} handleRankDown={this.handleRankDown} handleDeletionFromRanking={this.handleDeletionFromRanking} getSchedules={this.props.getSchedules}/>\n          </div>\n          <QuestionFooter handleStepChange={this.props.handleStepChange} getStepList={this.props.getStepList} getStepIndex={this.props.getStepIndex} verificationFunction={this.verificationFunction}/>\n        </div>\n      );\n    }\n  }\n\nclass CourseRanking extends Component {\n\n    render() {\n        let ranking_display=[];\n        for(let index=0; index<this.props.ranking.length; index++){\n            ranking_display.push(\n            <CourseBox key={index} course={this.props.ranking[index]} getSchedules={this.props.getSchedules} buttons={[\n                <Button text=\"monter\" onClick={()=>this.props.handleRankUp(index)} key=\"monter\"/>,\n                <Button text=\"descendre\" onClick={()=>this.props.handleRankDown(index)} key=\"descendre\"/>,\n                <Button text=\"supprimer\" onClick={()=>this.props.handleDeletionFromRanking(index)} key=\"supprimer\"/>]}/>\n            );\n        }\n      return (\n      <div className=\"course-ranking\"><h1 className=\"course-ranking-header\">Mon classement</h1>\n        <CourseBoxList content={ranking_display} emptyText=\"Vous n'avez pas encore classÃ© de cours dans cette catÃ©gorie.\"/>\n        </div>\n      );\n    }\n  }\n\n\nclass FinalQuestion extends Component {\n\n\n    render() {\n      let enough_vows= this.props.enoughVows();\n        return (\n          <div className=\"question\">\n            <QuestionInstructions text={this.props.instructions}/>\n            <div className=\"question-content\">\n              <div className=\"final-question-container\">\n              \n              {this.props.getAnswersAreSent() ? <div className=\"final-buttons-box\">Vos rÃ©ponses ont bien Ã©tÃ© envoyÃ©es.</div> :\n                  [enough_vows ? null : \n                    [<WarningMessage key= \"warning-message1\" text=\"ATTENTION ! Vous avez classÃ© trop peu de cours ou peu de cours compatibles entre eux. Nous vous invitons Ã  en classer davantage avant d'envoyer vos rÃ©ponses.\"/>,\n                  <WarningMessage key= \"warning-message2\" text=\"N'ignorez ce message que si vous Ãªtes absolument certain(e) d'avoir des places dans les cours que vous avez classÃ©s.\"/> ],\n                   \n                  <div className=\"final-buttons-box\" key=\"final-button-box\">\n                  <FinalButton text={\"Envoyer les rÃ©ponses\"} onClick={this.props.sendAnswers}/>\n                  <FinalButton text={\"Annuler le questionnaire\"}/>\n                  </div> ]\n              }\n              </div>\n            </div>\n            {this.props.getAnswersAreSent() ? null : <QuestionFooter handleStepChange={this.props.handleStepChange} getStepList={this.props.getStepList} getStepIndex={this.props.getStepIndex}/>}\n          </div>\n        );\n      }\n  }\n\nclass CourseList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {current_filters: {language:\"\", schedule:\"\", level:\"\"}, criteria_with_options: this.buildCriteriaWithOptions()};//pas de filtrage par dÃ©faut\n  }\n\n  getCurrentFilters=()=>{\n    return this.state.current_filters;\n  }\n\n  handleFilterChange=(event) => {\n    const target = event.target;\n    const value =  target.value;\n    const name = target.name;\n\n    let new_filters= this.state.current_filters;\n    new_filters[name]=value;\n    this.setState({current_filters: new_filters});\n  }\n\n  buildCriteriaWithOptions=()=>{\n    let list_languages=[];\n    let list_schedules=[];\n    let list_levels=[];\n    for(let index=0; index<this.props.courses.length; index++){\n      let current_course=this.props.courses[index];\n      if(!list_languages.includes(current_course.language)){list_languages.push(current_course.language)};\n      if(!list_levels.includes(current_course.level)){list_levels.push(current_course.level)};\n      for(let index_schedule=0; index_schedule<current_course.creneaux.length; index_schedule++){\n        let schedule=current_course.creneaux[index_schedule];\n        if(!list_schedules.includes(schedule)){list_schedules.push(schedule)};\n      }\n    }\n    let criteria_with_options ={};\n    if(list_languages.length>1){\n      criteria_with_options.language=list_languages;\n    }\n    if(list_schedules.length>1){\n      criteria_with_options.schedule=list_schedules;\n    }\n    if(list_levels.length>1){\n      criteria_with_options.level=list_levels;\n    }\n    return criteria_with_options;\n\n  }\n\n  buildListCoursesToDisplay=()=>{\n    let list_courses_to_display=this.props.courses;\n    if(this.state.current_filters.language!==\"\"){\n      list_courses_to_display = list_courses_to_display.filter((value, index, arr)=>{return value.language===this.state.current_filters.language;});\n    }\n    if(this.state.current_filters.schedule!==\"\"){\n      list_courses_to_display = list_courses_to_display.filter((value, index, arr)=>{return value.creneaux.includes(parseInt(this.state.current_filters.schedule));});\n    }\n    if(this.state.current_filters.level!==\"\"){\n      list_courses_to_display = list_courses_to_display.filter((value, index, arr)=>{return value.level===this.state.current_filters.level;});\n    }\n    return list_courses_to_display;\n  }\n\n    render() {\n        let list_display=[];\n        let list_courses_to_display=this.buildListCoursesToDisplay();\n        for(let index=0; index<list_courses_to_display.length; index++){\n            list_display.push(\n            <CourseBox key={index} course={list_courses_to_display[index]} getSchedules={this.props.getSchedules} buttons={[\n                <Button text=\"ajouter au classement\" onClick={()=>this.props.handleAddCourseToRanking(list_courses_to_display[index])} key=\"ajouter\"/>\n                ]}/>\n            );\n        }\n      return (\n        <div className=\"course-list\">\n          <h1 className=\"course-list-header\">Liste des cours</h1>\n          <CourseListFilter criteriaWithOptions={this.state.criteria_with_options} getCurrentFilters={this.getCurrentFilters} handleFilterChange={this.handleFilterChange} getSchedules={this.props.getSchedules}/>\n          <CourseBoxList content={list_display} emptyText=\"Aucun cours Ã  afficher avec ce filtrage.\"/>\n        </div>\n      );\n    }\n  }\n\nclass CourseListFilter extends Component {\n  render() {\n    let schedules=this.props.getSchedules();\n    let criteria_selection=[];\n    for(let criterion in this.props.criteriaWithOptions){\n      let list_options=[<option value=\"\" key={\"\"}></option>];\n      for(let index=0; index<this.props.criteriaWithOptions[criterion].length; index++){\n        let option_name=this.props.criteriaWithOptions[criterion][index];\n        if(criterion!=='schedule'){\n          list_options.push(<option value={option_name} key={option_name}>{option_name}</option>);\n        } else {\n          list_options.push(<option value={option_name} key={option_name}>{schedules[option_name].day+(schedules[option_name].day===\"hors-crÃ©neaux\"? \"\":(\" \"+schedules[option_name].begin+\"-\"+schedules[option_name].end))}</option>);\n        }\n\n      }\n      criteria_selection.push(\n        <div className=\"course-list-filter-option\" key={criterion}>\n        <label >{criterion===\"language\"?\"Langue : \":(criterion===\"schedule\"?\"Horaire : \":(criterion===\"level\"?\"Niveau : \":\"erreur\"))}</label>\n        <select\n            name={criterion}\n            type='select'\n            value={this.props.getCurrentFilters()[criterion]}\n            onChange={this.props.handleFilterChange} >\n            {list_options}\n          </select>\n      </div>\n\n      );\n    }\n\n\n  return (\n    <div className=\"course-list-filter\">{criteria_selection}</div>\n  );\n}\n}\n\n//structure gÃ©nÃ©rale de question\nclass QuestionInstructions extends Component {\n    render() {\n      return (\n        <h2 className=\"question-instructions\"> {this.props.text}</h2>\n      );\n    }\n  }\n\nclass QuestionFooter extends Component {\n\n    render() {\n      let current_step_index=this.props.getStepIndex();\n      let step_list_length=this.props.getStepList().length;\n      let left_button=null;\n      let right_button=null;\n      if(current_step_index>0){\n        left_button=<ChangeStepButton text=\"PrÃ©cÃ©dent\" onClick={()=>this.props.handleStepChange(\"previous\")}/>\n      }\n      let nextButtonEffect=()=>{this.props.handleStepChange(\"next\")}\n      if(this.props.verificationFunction){//s'il y a une vÃ©rification Ã  faire, elle est faite avant de passer Ã  la question suivante\n        nextButtonEffect=()=>{\n          if(this.props.verificationFunction())\n          {\n            this.props.handleStepChange(\"next\");\n          }\n        }\n      }\n      if(current_step_index<step_list_length-1){\n        right_button=<ChangeStepButton text=\"Suivant\" onClick={nextButtonEffect }/>\n      }\n      return (\n        <div className=\"question-footer\"> <div className=\"question-footer-left\"> {left_button}</div><div className=\"question-footer-right\">{right_button}</div></div>\n      );\n    }\n  }\n\n//classes utiles\nclass CourseBox extends Component {\n    render() {\n      let schedules=this.props.getSchedules();\n      let current_course_schedules_list=this.props.course.creneaux.map(schedule_index => <p key={schedule_index}>{schedules[schedule_index].day+(schedules[schedule_index].day===\"hors-crÃ©neaux\"?\"\":(\" \"+schedules[schedule_index].begin+\"-\"+schedules[schedule_index].end))}</p>)\n      return (\n        <div className=\"course-box\"> <div><h2>{this.props.course.name}</h2> <h3>{this.props.course.language}</h3>{current_course_schedules_list}</div> <div className=\"course-box-buttons\">{this.props.buttons}</div></div>\n      );\n    }\n  }\n\n\nclass Button extends Component {\n  render() {\n    return (\n      <button className=\"button\" onClick={this.props.onClick}>{this.props.text}</button>\n    );\n  }\n}\n\nclass ChangeStepButton extends Component {\n  render() {\n    return (\n      <button className=\"change-step-button\" onClick={this.props.onClick}>{this.props.text}</button>\n    );\n  }\n}\n\nclass FinalButton extends Component {\n    render() {\n      return (\n        <button className=\"final-button\" onClick={this.props.onClick}>{this.props.text}</button>\n      );\n    }\n  }\n\n\nclass ErrorMessage extends Component {\n  render() {\n    return (\n      <div className=\"error-message\" ><img src={error_panel} alt=\"error_panel\" style={{height: \"5vh\"}}/>{this.props.text}</div>\n    );\n  }\n}\n\nclass WarningMessage extends Component {\n  render() {\n    return (\n      <div className=\"warning-message\" >{this.props.text}</div>\n    );\n  }\n}\n\nclass CourseBoxList extends Component {\n  render() {\n    return (\n      this.props.content.length===0 ?\n      <div className=\"course-box-list-empty-text\" >{this.props.emptyText}</div>:\n      <div className=\"course-box-list\" >{this.props.content}</div>\n    );\n  }\n}\n\n\nexport default Questionnaire;\n"]},"metadata":{},"sourceType":"module"}